# Zeabur Cache Issues - Solutions Guide

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ GitHub, Zeabur –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Docker —Å–ª–æ–∏, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ—É–¥–∞—á–Ω—ã–º —Å–±–æ—Ä–∫–∞–º. –ü—Ä–∏ —ç—Ç–æ–º –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å —Å —Ç–µ–º –∂–µ –∫–æ–º–º–∏—Ç–æ–º —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ.

## –†–µ—à–µ–Ω–∏—è

### 1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Dockerfile (—É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ)
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è package.json —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `ARG CACHE_BUST` –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–µ—à–∞
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ npm cache –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 2. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–µ—à–∞ —á–µ—Ä–µ–∑ zeabur.json
–î–æ–±–∞–≤—å—Ç–µ –≤ `zeabur.json` build args:

```json
{
  "build": {
    "type": "docker",
    "dockerfile": "Dockerfile",
    "args": {
      "CACHE_BUST": "${ZEABUR_BUILD_ID}"
    }
  }
}
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ zbpack.json –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–µ—à–µ–º
–í —Ñ–∞–π–ª–µ `zbpack.json` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:

```json
{
  "build_command": "docker build --no-cache -f Dockerfile .",
  "cache": {
    "enabled": false
  }
}
```

### 4. –ë—ã—Å—Ç—Ä—ã–µ —Ä–µ—à–µ–Ω–∏—è (workarounds)

#### A. –ß–µ—Ä–µ–∑ Zeabur Dashboard:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å–∞
2. –ù–∞–π–¥–∏—Ç–µ "Build Configuration"
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è: `DOCKER_BUILDKIT=1`
4. –î–æ–±–∞–≤—å—Ç–µ build arg: `CACHE_BUST` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º `${ZEABUR_BUILD_ID}`

#### B. –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ - —Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–¥–µ–ø–ª–æ–π:
1. –í Zeabur dashboard –Ω–∞–∂–º–∏—Ç–µ "Redeploy"
2. –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é "Force rebuild" (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)
3. –ò–ª–∏ —É–¥–∞–ª–∏—Ç–µ –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å –∑–∞–Ω–æ–≤–æ

#### C. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π Dockerfile:
–°–æ–∑–¥–∞–π—Ç–µ `Dockerfile.nocache` —Å –¥–∏—Ä–µ–∫—Ç–∏–≤–æ–π:
```dockerfile
# –î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞
ARG BUILDKIT_INLINE_CACHE=0
```

### 5. –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.github/workflows/zeabur-deploy.yml`:

```yaml
name: Deploy to Zeabur
on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Update CACHE_BUST
        run: |
          echo "CACHE_BUST=$(date +%s)" >> $GITHUB_ENV
          
      - name: Trigger Zeabur Deploy
        run: |
          curl -X POST https://api.zeabur.com/deploy \
            -H "Authorization: Bearer ${{ secrets.ZEABUR_TOKEN }}" \
            -d '{"cache_bust": "'$CACHE_BUST'"}'
```

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∫–µ—à–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
```bash
# –í –ª–æ–≥–∞—Ö —Å–±–æ—Ä–∫–∏ –∏—â–∏—Ç–µ:
- "Using cache" - —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–µ—à–∞
- "CACHED" - —Å–ª–æ–∏ –≤–∑—è—Ç—ã –∏–∑ –∫–µ—à–∞
- "npm install" –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è < 10 —Å–µ–∫ = –≤–µ—Ä–æ—è—Ç–Ω–æ –∏–∑ –∫–µ—à–∞
```

### 7. –ü—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω—ã–µ –º–µ—Ä—ã

1. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤ package.json
   - –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ package-lock.json

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –°–ª–µ–¥–∏—Ç–µ –∑–∞ –≤—Ä–µ–º–µ–Ω–µ–º —Å–±–æ—Ä–∫–∏
   - –ï—Å–ª–∏ —Å–±–æ—Ä–∫–∞ < 2 –º–∏–Ω—É—Ç = –≤–µ—Ä–æ—è—Ç–Ω–æ –∫–µ—à

3. **–†–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞:**
   - –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é –¥–µ–ª–∞–π—Ç–µ force rebuild
   - –ü—Ä–∏ major –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö –≤—Å–µ–≥–¥–∞ –æ—á–∏—â–∞–π—Ç–µ –∫–µ—à

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Zeabur

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è:
- Discord: https://discord.gg/zeabur
- Email: support@zeabur.com
- –£–∫–∞–∂–∏—Ç–µ Service ID –∏ Build ID

## –°—Ç–∞—Ç—É—Å
üü° **–¢—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π** 