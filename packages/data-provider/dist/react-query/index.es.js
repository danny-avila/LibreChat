import{useQueryClient as e,useMutation as t,useQuery as n}from"@tanstack/react-query";import{z as o}from"zod";import a from"axios";var i,r,s,l,u,c,p,d,m,f,g=function(){return g=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},g.apply(this,arguments)};function v(e,t,n,o){return new(n||(n=Promise))((function(a,i){function r(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,s)}l((o=o.apply(e,t||[])).next())}))}function b(e,t){var n,o,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=s(0),r.throw=s(1),r.return=s(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(i=0)),i;)try{if(n=1,o&&(a=2&s[0]?o.return:s[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,s[1])).done)return a;switch(o=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,o=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],o=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function h(e,t,n){if(n||2===arguments.length)for(var o,a=0,i=t.length;a<i;a++)!o&&a in t||(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,function(e){e.execute_code="execute_code",e.code_interpreter="code_interpreter",e.file_search="file_search",e.retrieval="retrieval",e.function="function"}(i||(i={})),function(e){e.code_interpreter="code_interpreter",e.execute_code="execute_code",e.file_search="file_search"}(r||(r={})),function(e){e.FILE_CITATION="file_citation",e.FILE_PATH="file_path"}(s||(s={})),function(e){e.IN_PROGRESS="in_progress",e.CANCELLED="cancelled",e.FAILED="failed",e.COMPLETED="completed",e.EXPIRED="expired"}(l||(l={})),function(e){e.TEXT="text",e.IMAGE_FILE="image_file"}(u||(u={})),function(e){e.QUEUED="queued",e.IN_PROGRESS="in_progress",e.REQUIRES_ACTION="requires_action",e.CANCELLING="cancelling",e.CANCELLED="cancelled",e.FAILED="failed",e.COMPLETED="completed",e.EXPIRED="expired"}(c||(c={})),function(e){e.ServiceHttp="service_http",e.OAuth="oauth",e.None="none"}(p||(p={})),function(e){e.Bearer="bearer",e.Basic="basic",e.Custom="custom"}(d||(d={})),function(e){e.DefaultPost="default_post",e.BasicAuthHeader="basic_auth_header"}(m||(m={})),function(e){e.Vision="vision",e.FineTune="fine-tune",e.FineTuneResults="fine-tune-results",e.Assistants="assistants",e.AssistantsOutput="assistants_output"}(f||(f={}));var _,x,T,y,O,E={order:"desc",limit:100};!function(e){e.ThreadCreated="thread.created",e.ThreadRunCreated="thread.run.created",e.ThreadRunQueued="thread.run.queued",e.ThreadRunInProgress="thread.run.in_progress",e.ThreadRunRequiresAction="thread.run.requires_action",e.ThreadRunCompleted="thread.run.completed",e.ThreadRunFailed="thread.run.failed",e.ThreadRunCancelling="thread.run.cancelling",e.ThreadRunCancelled="thread.run.cancelled",e.ThreadRunExpired="thread.run.expired",e.ThreadRunStepCreated="thread.run.step.created",e.ThreadRunStepInProgress="thread.run.step.in_progress",e.ThreadRunStepCompleted="thread.run.step.completed",e.ThreadRunStepFailed="thread.run.step.failed",e.ThreadRunStepCancelled="thread.run.step.cancelled",e.ThreadRunStepExpired="thread.run.step.expired",e.ThreadRunStepDelta="thread.run.step.delta",e.ThreadMessageCreated="thread.message.created",e.ThreadMessageInProgress="thread.message.in_progress",e.ThreadMessageCompleted="thread.message.completed",e.ThreadMessageIncomplete="thread.message.incomplete",e.ThreadMessageDelta="thread.message.delta",e.ErrorEvent="error"}(_||(_={})),o.string().uuid(),function(e){e.OVERRIDE_AUTH="override_auth",e.USER_PROVIDED="user_provided",e.SYSTEM_DEFINED="system_defined"}(O||(O={}));var I,A,S=o.nativeEnum(O);!function(e){e.azureOpenAI="azureOpenAI",e.openAI="openAI",e.bingAI="bingAI",e.chatGPTBrowser="chatGPTBrowser",e.google="google",e.gptPlugins="gptPlugins",e.anthropic="anthropic",e.assistants="assistants",e.azureAssistants="azureAssistants",e.agents="agents",e.custom="custom",e.bedrock="bedrock"}(I||(I={})),new Set([I.agents,I.openAI,I.bedrock,I.azureOpenAI,I.anthropic,I.custom]),function(e){e.AI21="ai21",e.Amazon="amazon",e.Anthropic="anthropic",e.Cohere="cohere",e.Meta="meta",e.MistralAI="mistral",e.StabilityAI="stability"}(A||(A={}));var L;!function(e){e.low="low",e.auto="auto",e.high="high"}(L||(L={})),(x={})[L.low]=0,x[L.auto]=1,x[L.high]=2,L.low,L.auto,L.high;var R=o.nativeEnum(L);(T={agent:{},id:"",name:"",description:"",instructions:"",model:"",model_parameters:{},tools:[],provider:{},projectIds:[],isCollaborative:!1})[i.execute_code]=!1,T[i.file_search]=!1,{type:i.function}[i.function]={name:"image_vision",description:"Get detailed text descriptions for all current image attachments.",parameters:{type:"object",properties:{},required:[]}};var k,P={model:{default:"gpt-4o"},temperature:{min:0,max:2,step:.01,default:1},top_p:{min:0,max:1,step:.01,default:1},presence_penalty:{min:0,max:2,step:.01,default:0},frequency_penalty:{min:0,max:2,step:.01,default:0},resendFiles:{default:!0},maxContextTokens:{default:void 0},max_tokens:{default:void 0},imageDetail:{default:L.auto,min:0,max:2,step:1}},C=8192,M=4096,N={model:{default:"claude-3-5-sonnet-20241022"},temperature:{min:0,max:1,step:.01,default:1},promptCache:{default:!0},maxOutputTokens:{min:1,max:C,step:1,default:C,reset:function(e){return e.includes("claude-3-5-sonnet")?C:4096},set:function(e,t){return!t.includes("claude-3-5-sonnet")&&e>M?M:e}},topP:{min:0,max:1,step:.01,default:.7},topK:{min:1,max:40,step:1,default:5},resendFiles:{default:!0},maxContextTokens:{default:void 0},legacy:{maxOutputTokens:{min:1,max:M,step:1,default:M}}},w={model:{default:"gpt-3.5-turbo-test"},temperature:{min:0,max:1,step:.01,default:1},top_p:{min:0,max:1,step:.01,default:1},presence_penalty:{min:0,max:2,step:.01,default:0},frequency_penalty:{min:0,max:2,step:.01,default:0},resendFiles:{default:!0},maxContextTokens:{default:void 0},max_tokens:{default:void 0},imageDetail:{default:L.auto}},j=((y={})[I.openAI]=P,y[I.google]={model:{default:"gemini-1.5-flash-latest"},maxOutputTokens:{min:1,max:8192,step:1,default:8192},temperature:{min:0,max:2,step:.01,default:1},topP:{min:0,max:1,step:.01,default:.95},topK:{min:1,max:40,step:1,default:40}},y[I.anthropic]=N,y[I.agents]=w,y[I.bedrock]=w,y)[I.google],U=o.nativeEnum(I),D=o.union([U,o.string()]),G=o.object({authField:o.string(),label:o.string(),description:o.string()}),F=o.object({name:o.string(),pluginKey:o.string(),description:o.string(),icon:o.string(),authConfig:o.array(G).optional(),authenticated:o.boolean().optional(),isButton:o.boolean().optional()}),z=o.object({input:o.object({content:o.string()}),output:o.object({content:o.string()})});!function(e){e.functions="functions",e.classic="classic"}(k||(k={}));var K={min:0,max:1,step:.01,default:0},Q=(k.functions,k.functions,k.classic,{default:!0});o.nativeEnum(k);var B=o.object({agent:o.string().default(k.functions),skipCompletion:o.boolean().default(Q.default),model:o.string(),temperature:o.number().default(K.default)});o.object({messageId:o.string(),endpoint:o.string().optional(),clientId:o.string().nullable().optional(),conversationId:o.string().nullable(),parentMessageId:o.string().nullable(),responseMessageId:o.string().nullable().optional(),overrideParentMessageId:o.string().nullable().optional(),bg:o.string().nullable().optional(),model:o.string().nullable().optional(),title:o.string().nullable().or(o.literal("New Chat")).default("New Chat"),sender:o.string().optional(),text:o.string(),generation:o.string().nullable().optional(),isEdited:o.boolean().optional(),isCreatedByUser:o.boolean(),error:o.boolean().optional(),createdAt:o.string().optional().default((function(){return(new Date).toISOString()})),updatedAt:o.string().optional().default((function(){return(new Date).toISOString()})),current:o.boolean().optional(),unfinished:o.boolean().optional(),searchResult:o.boolean().optional(),finish_reason:o.string().optional(),thread_id:o.string().optional(),iconURL:o.string().optional()});var q,W,H=o.union([o.number(),o.string()]).transform((function(e){return"string"==typeof e?""===e.trim()?void 0:parseFloat(e):e})),V=o.lazy((function(){return o.union([o.null(),o.boolean(),o.number(),o.string(),o.array(o.lazy((function(){return V}))),o.record(o.lazy((function(){return V})))])})),Y=o.object({conversationId:o.string().nullable(),endpoint:U.nullable(),endpointType:U.optional(),isArchived:o.boolean().optional(),title:o.string().nullable().or(o.literal("New Chat")).default("New Chat"),user:o.string().optional(),messages:o.array(o.string()).optional(),tools:o.union([o.array(F),o.array(o.string())]).optional(),modelLabel:o.string().nullable().optional(),userLabel:o.string().optional(),model:o.string().nullable().optional(),promptPrefix:o.string().nullable().optional(),temperature:o.number().optional(),topP:o.number().optional(),topK:o.number().optional(),top_p:o.number().optional(),frequency_penalty:o.number().optional(),presence_penalty:o.number().optional(),parentMessageId:o.string().optional(),maxOutputTokens:H.optional(),maxContextTokens:H.optional(),max_tokens:H.optional(),promptCache:o.boolean().optional(),system:o.string().optional(),artifacts:o.string().optional(),context:o.string().nullable().optional(),examples:o.array(z).optional(),tags:o.array(o.string()).optional(),createdAt:o.string(),updatedAt:o.string(),file_ids:o.array(o.string()).optional(),resendFiles:o.boolean().optional(),imageDetail:R.optional(),assistant_id:o.string().optional(),agent_id:o.string().optional(),region:o.string().optional(),maxTokens:H.optional(),additionalModelRequestFields:V.optional(),instructions:o.string().optional(),additional_instructions:o.string().optional(),presetOverride:o.record(o.unknown()).optional(),stop:o.array(o.string()).optional(),iconURL:o.string().optional(),greeting:o.string().optional(),spec:o.string().optional(),suggestions:o.array(o.string()).optional(),systemMessage:o.string().nullable().optional(),jailbreak:o.boolean().optional(),jailbreakConversationId:o.string().nullable().optional(),conversationSignature:o.string().nullable().optional(),clientId:o.string().nullable().optional(),invocationId:o.number().nullable().optional(),toneStyle:o.string().nullable().optional(),resendImages:o.boolean().optional(),agentOptions:B.nullable().optional(),chatGptLabel:o.string().nullable().optional()}),X=Y.omit({conversationId:!0,createdAt:!0,updatedAt:!0,title:!0}).merge(o.object({conversationId:o.string().nullable().optional(),presetId:o.string().nullable().optional(),title:o.string().nullable().optional(),defaultPreset:o.boolean().optional(),order:o.number().optional(),endpoint:D.nullable()}));function J(e){var t=g({},e);return Object.keys(t).forEach((function(e){var n=t[e];null==n&&delete t[e]})),t}Y.merge(o.object({endpoint:D.nullable()})),Y.merge(o.object({endpoint:D.nullable()})),o.object({conversationId:o.string(),shareId:o.string(),messages:o.array(o.string()),isAnonymous:o.boolean(),isPublic:o.boolean(),isVisible:o.boolean(),title:o.string(),createdAt:o.string(),updatedAt:o.string()}),o.object({_id:o.string(),user:o.string(),tag:o.string(),description:o.string().optional(),createdAt:o.string(),updatedAt:o.string(),count:o.number(),position:o.number()}),Y.pick({model:!0,modelLabel:!0,promptPrefix:!0,examples:!0,temperature:!0,maxOutputTokens:!0,artifacts:!0,topP:!0,topK:!0,iconURL:!0,greeting:!0,spec:!0,maxContextTokens:!0}).transform((function(e){var t,n,o,a,i,r,s,l,u,c,p,d;return g(g({},e),{model:null!==(t=e.model)&&void 0!==t?t:j.model.default,modelLabel:null!==(n=e.modelLabel)&&void 0!==n?n:null,promptPrefix:null!==(o=e.promptPrefix)&&void 0!==o?o:null,examples:null!==(a=e.examples)&&void 0!==a?a:[{input:{content:""},output:{content:""}}],temperature:null!==(i=e.temperature)&&void 0!==i?i:j.temperature.default,maxOutputTokens:null!==(r=e.maxOutputTokens)&&void 0!==r?r:j.maxOutputTokens.default,topP:null!==(s=e.topP)&&void 0!==s?s:j.topP.default,topK:null!==(l=e.topK)&&void 0!==l?l:j.topK.default,iconURL:null!==(u=e.iconURL)&&void 0!==u?u:void 0,greeting:null!==(c=e.greeting)&&void 0!==c?c:void 0,spec:null!==(p=e.spec)&&void 0!==p?p:void 0,maxContextTokens:null!==(d=e.maxContextTokens)&&void 0!==d?d:void 0})})).catch((function(){return{model:j.model.default,modelLabel:null,promptPrefix:null,examples:[{input:{content:""},output:{content:""}}],temperature:j.temperature.default,maxOutputTokens:j.maxOutputTokens.default,topP:j.topP.default,topK:j.topK.default,iconURL:void 0,greeting:void 0,spec:void 0,maxContextTokens:void 0}})),Y.pick({jailbreak:!0,systemMessage:!0,context:!0,toneStyle:!0,jailbreakConversationId:!0,conversationSignature:!0,clientId:!0,invocationId:!0}).transform((function(e){var t,n,o,a,i,r,s,l;return g(g({},e),{model:"",jailbreak:null!==(t=e.jailbreak)&&void 0!==t&&t,systemMessage:null!==(n=e.systemMessage)&&void 0!==n?n:null,context:null!==(o=e.context)&&void 0!==o?o:null,toneStyle:null!==(a=e.toneStyle)&&void 0!==a?a:"creative",jailbreakConversationId:null!==(i=e.jailbreakConversationId)&&void 0!==i?i:null,conversationSignature:null!==(r=e.conversationSignature)&&void 0!==r?r:null,clientId:null!==(s=e.clientId)&&void 0!==s?s:null,invocationId:null!==(l=e.invocationId)&&void 0!==l?l:1})})).catch((function(){return{model:"",jailbreak:!1,systemMessage:null,context:null,toneStyle:"creative",jailbreakConversationId:null,conversationSignature:null,clientId:null,invocationId:1}})),Y.pick({model:!0}).transform((function(e){var t;return g(g({},e),{model:null!==(t=e.model)&&void 0!==t?t:"text-davinci-002-render-sha"})})).catch((function(){return{model:"text-davinci-002-render-sha"}})),Y.pick({model:!0,modelLabel:!0,chatGptLabel:!0,promptPrefix:!0,temperature:!0,artifacts:!0,top_p:!0,presence_penalty:!0,frequency_penalty:!0,tools:!0,agentOptions:!0,iconURL:!0,greeting:!0,spec:!0,maxContextTokens:!0}).transform((function(e){var t,n,o,a,i,r,s,l,u,c,p,d,m,f,v=g(g({},e),{model:null!==(t=e.model)&&void 0!==t?t:"gpt-3.5-turbo",chatGptLabel:null!==(o=null!==(n=e.chatGptLabel)&&void 0!==n?n:e.modelLabel)&&void 0!==o?o:null,promptPrefix:null!==(a=e.promptPrefix)&&void 0!==a?a:null,temperature:null!==(i=e.temperature)&&void 0!==i?i:.8,top_p:null!==(r=e.top_p)&&void 0!==r?r:1,presence_penalty:null!==(s=e.presence_penalty)&&void 0!==s?s:0,frequency_penalty:null!==(l=e.frequency_penalty)&&void 0!==l?l:0,tools:null!==(u=e.tools)&&void 0!==u?u:[],agentOptions:null!==(c=e.agentOptions)&&void 0!==c?c:{agent:k.functions,skipCompletion:!0,model:"gpt-3.5-turbo",temperature:0},iconURL:null!==(p=e.iconURL)&&void 0!==p?p:void 0,greeting:null!==(d=e.greeting)&&void 0!==d?d:void 0,spec:null!==(m=e.spec)&&void 0!==m?m:void 0,maxContextTokens:null!==(f=e.maxContextTokens)&&void 0!==f?f:void 0});return null!=e.modelLabel&&""!==e.modelLabel&&(v.modelLabel=null),v})).catch((function(){return{model:"gpt-3.5-turbo",chatGptLabel:null,promptPrefix:null,temperature:.8,top_p:1,presence_penalty:0,frequency_penalty:0,tools:[],agentOptions:{agent:k.functions,skipCompletion:!0,model:"gpt-3.5-turbo",temperature:0},iconURL:void 0,greeting:void 0,spec:void 0,maxContextTokens:void 0}})),Y.pick({model:!0,assistant_id:!0,instructions:!0,artifacts:!0,promptPrefix:!0,iconURL:!0,greeting:!0,spec:!0}).transform((function(e){var t,n,o,a,i,r,s;return g(g({},e),{model:null!==(t=e.model)&&void 0!==t?t:P.model.default,assistant_id:null!==(n=e.assistant_id)&&void 0!==n?n:void 0,instructions:null!==(o=e.instructions)&&void 0!==o?o:void 0,promptPrefix:null!==(a=e.promptPrefix)&&void 0!==a?a:null,iconURL:null!==(i=e.iconURL)&&void 0!==i?i:void 0,greeting:null!==(r=e.greeting)&&void 0!==r?r:void 0,spec:null!==(s=e.spec)&&void 0!==s?s:void 0})})).catch((function(){return{model:P.model.default,assistant_id:void 0,instructions:void 0,promptPrefix:null,iconURL:void 0,greeting:void 0,spec:void 0}})),Y.pick({model:!0,assistant_id:!0,instructions:!0,promptPrefix:!0,artifacts:!0,iconURL:!0,greeting:!0,spec:!0}).transform(J).catch((function(){return{}})),Y.pick({model:!0,modelLabel:!0,temperature:!0,top_p:!0,presence_penalty:!0,frequency_penalty:!0,resendFiles:!0,imageDetail:!0,agent_id:!0,instructions:!0,promptPrefix:!0,iconURL:!0,greeting:!0,maxContextTokens:!0}).transform((function(e){var t,n,o,a,i,r,s,l,u,c,p,d,m;return g(g({},e),{model:null!==(t=e.model)&&void 0!==t?t:w.model.default,modelLabel:null!==(n=e.modelLabel)&&void 0!==n?n:null,temperature:null!==(o=e.temperature)&&void 0!==o?o:1,top_p:null!==(a=e.top_p)&&void 0!==a?a:1,presence_penalty:null!==(i=e.presence_penalty)&&void 0!==i?i:0,frequency_penalty:null!==(r=e.frequency_penalty)&&void 0!==r?r:0,resendFiles:"boolean"==typeof e.resendFiles?e.resendFiles:w.resendFiles.default,imageDetail:null!==(s=e.imageDetail)&&void 0!==s?s:L.auto,agent_id:null!==(l=e.agent_id)&&void 0!==l?l:void 0,instructions:null!==(u=e.instructions)&&void 0!==u?u:void 0,promptPrefix:null!==(c=e.promptPrefix)&&void 0!==c?c:null,iconURL:null!==(p=e.iconURL)&&void 0!==p?p:void 0,greeting:null!==(d=e.greeting)&&void 0!==d?d:void 0,maxContextTokens:null!==(m=e.maxContextTokens)&&void 0!==m?m:void 0})})).catch((function(){return{model:w.model.default,modelLabel:null,temperature:1,top_p:1,presence_penalty:0,frequency_penalty:0,resendFiles:w.resendFiles.default,imageDetail:L.auto,agent_id:void 0,instructions:void 0,promptPrefix:null,iconURL:void 0,greeting:void 0,maxContextTokens:void 0}})),Y.pick({model:!0,modelLabel:!0,chatGptLabel:!0,promptPrefix:!0,temperature:!0,top_p:!0,presence_penalty:!0,frequency_penalty:!0,resendFiles:!0,artifacts:!0,imageDetail:!0,stop:!0,iconURL:!0,greeting:!0,spec:!0,maxContextTokens:!0,max_tokens:!0}).transform((function(e){return J(e)})).catch((function(){return{}})),Y.pick({model:!0,modelLabel:!0,promptPrefix:!0,examples:!0,temperature:!0,maxOutputTokens:!0,artifacts:!0,topP:!0,topK:!0,iconURL:!0,greeting:!0,spec:!0,maxContextTokens:!0}).transform((function(e){var t=g({},e);return t.temperature===j.temperature.default&&delete t.temperature,t.maxOutputTokens===j.maxOutputTokens.default&&delete t.maxOutputTokens,t.topP===j.topP.default&&delete t.topP,t.topK===j.topK.default&&delete t.topK,J(t)})).catch((function(){return{}})),Y.pick({model:!0,modelLabel:!0,promptPrefix:!0,temperature:!0,maxOutputTokens:!0,topP:!0,topK:!0,resendFiles:!0,promptCache:!0,artifacts:!0,iconURL:!0,greeting:!0,spec:!0,maxContextTokens:!0}).transform((function(e){return J(e)})).catch((function(){return{}})),Y.pick({model:!0}).transform((function(e){return J(g({},e))})).catch((function(){return{}})),Y.pick({model:!0,modelLabel:!0,chatGptLabel:!0,promptPrefix:!0,temperature:!0,top_p:!0,presence_penalty:!0,frequency_penalty:!0,tools:!0,agentOptions:!0,iconURL:!0,greeting:!0,spec:!0,maxContextTokens:!0}).transform((function(e){var t,n=g({},e);return null===n.modelLabel&&delete n.modelLabel,null===n.chatGptLabel&&delete n.chatGptLabel,null===n.promptPrefix&&delete n.promptPrefix,.8===n.temperature&&delete n.temperature,1===n.top_p&&delete n.top_p,0===n.presence_penalty&&delete n.presence_penalty,0===n.frequency_penalty&&delete n.frequency_penalty,0===(null===(t=n.tools)||void 0===t?void 0:t.length)&&delete n.tools,n.agentOptions&&n.agentOptions.agent===k.functions&&!0===n.agentOptions.skipCompletion&&"gpt-3.5-turbo"===n.agentOptions.model&&0===n.agentOptions.temperature&&delete n.agentOptions,J(n)})).catch((function(){return{}})),o.object({bannerId:o.string(),message:o.string(),displayFrom:o.string(),displayTo:o.string(),createdAt:o.string(),updatedAt:o.string(),isPublic:o.boolean()}),Y.pick({spec:!0,iconURL:!0,greeting:!0,agent_id:!0,resendFiles:!0,instructions:!0,additional_instructions:!0}).transform(J).catch((function(){return{}})),(q={})[I.openAI]=!0,q[I.google]=!0,q[I.assistants]=!0,q[I.azureAssistants]=!0,q[I.agents]=!0,q[I.azureOpenAI]=!0,q[I.anthropic]=!0,q[I.custom]=!0,q[I.bedrock]=!0;var $=["application/vnd.ms-excel","application/msexcel","application/x-msexcel","application/x-ms-excel","application/x-excel","application/x-dos_ms_excel","application/xls","application/x-xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];h(["text/x-c","text/x-c++","application/csv","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/html","text/x-java","application/json","text/markdown","application/pdf","text/x-php","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/x-python","text/x-script.python","text/x-ruby","text/x-tex","text/plain","text/css","text/vtt","image/jpeg","text/javascript","image/gif","image/png","application/x-tar","application/typescript","application/xml","application/zip"],$,!0),h(["text/x-c","text/x-c++","application/csv","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/html","text/x-java","application/json","text/markdown","application/pdf","text/x-php","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/x-python","text/x-script.python","text/x-ruby","text/x-tex","text/plain","text/css","image/jpeg","text/javascript","image/gif","image/png","application/x-tar","application/typescript","application/xml","application/zip"],$,!0);var Z=[/^(text\/(x-c|x-csharp|x-c\+\+|x-java|html|markdown|x-php|x-python|x-script\.python|x-ruby|x-tex|plain|css|vtt|javascript|csv))$/,/^application\/(vnd\.ms-excel|msexcel|x-msexcel|x-ms-excel|x-excel|x-dos_ms_excel|xls|x-xls|vnd\.openxmlformats-officedocument\.spreadsheetml\.sheet)$/,/^(application\/(epub\+zip|csv|json|pdf|x-tar|typescript|vnd\.openxmlformats-officedocument\.(wordprocessingml\.document|presentationml\.presentation|spreadsheetml\.sheet)|xml|zip))$/,/^image\/(jpeg|gif|png|webp)$/],ee=function(e){return 1048576*e},te=ee(512),ne={fileLimit:10,fileSizeLimit:te,totalSizeLimit:te,supportedMimeTypes:Z,disabled:!1};(W={})[I.assistants]=ne,W[I.azureAssistants]=ne,W[I.agents]=ne,W.default={fileLimit:10,fileSizeLimit:te,totalSizeLimit:te,supportedMimeTypes:Z,disabled:!1},ee(2);var oe,ae,ie,re,se,le,ue,ce,pe,de,me=o.array(o.any()).optional().refine((function(e){return!e||e.every((function(e){return e instanceof RegExp||"string"==typeof e}))}),{message:"Each mimeType must be a string or a RegExp object."}),fe=o.object({disabled:o.boolean().optional(),fileLimit:o.number().min(0).optional(),fileSizeLimit:o.number().min(0).optional(),totalSizeLimit:o.number().min(0).optional(),supportedMimeTypes:me.optional()}),ge=o.object({endpoints:o.record(fe).optional(),serverFileSizeLimit:o.number().min(0).optional(),avatarSizeLimit:o.number().min(0).optional()}),ve=o.object({name:o.string(),label:o.string(),preset:X,order:o.number().optional(),default:o.boolean().optional(),description:o.string().optional(),showIconInMenu:o.boolean().optional(),showIconInHeader:o.boolean().optional(),iconURL:o.union([o.string(),U]).optional(),authType:S.optional()}),be=o.object({enforce:o.boolean().default(!1),prioritize:o.boolean().default(!0),list:o.array(ve).optional()});!function(e){e.local="local",e.firebase="firebase",e.azure="azure",e.openai="openai",e.s3="s3",e.vectordb="vectordb",e.execute_code="execute_code"}(oe||(oe={})),function(e){e.avatar="avatar",e.unknown="unknown",e.agents="agents",e.assistants="assistants",e.execute_code="execute_code",e.image_generation="image_generation",e.assistants_output="assistants_output",e.message_attachment="message_attachment",e.filename="filename",e.updatedAt="updatedAt",e.source="source",e.filterSource="filterSource",e.context="context",e.bytes="bytes"}(ae||(ae={}));var he,_e=["gpt-4o","o1-preview-2024-09-12","o1-preview","o1-mini-2024-09-12","o1-mini","chatgpt-4o-latest","gpt-4o-2024-05-13","gpt-4o-2024-08-06","gpt-4o-mini","gpt-4o-mini-2024-07-18","gpt-4-turbo-preview","gpt-3.5-turbo-0125","gpt-4-0125-preview","gpt-4-1106-preview","gpt-3.5-turbo-1106","gpt-3.5-turbo-0125","gpt-4-turbo","gpt-4-0125","gpt-4-1106"];!function(e){e.default="default",e.advanced="advanced"}(he||(he={}));var xe,Te,ye=o.nativeEnum(oe),Oe=o.object({deploymentName:o.string().optional(),version:o.string().optional(),assistants:o.boolean().optional()}).or(o.boolean()),Ee=o.object({apiKey:o.string(),serverless:o.boolean().optional(),instanceName:o.string().optional(),deploymentName:o.string().optional(),assistants:o.boolean().optional(),addParams:o.record(o.any()).optional(),dropParams:o.array(o.string()).optional(),forcePrompt:o.boolean().optional(),version:o.string().optional(),baseURL:o.string().optional(),additionalHeaders:o.record(o.any()).optional()}),Ie=o.object({group:o.string(),models:o.record(o.string(),Oe)}).required().and(Ee),Ae=o.array(Ie).min(1);!function(e){e.code_interpreter="code_interpreter",e.image_vision="image_vision",e.retrieval="retrieval",e.actions="actions",e.tools="tools"}(xe||(xe={})),function(e){e.hide_sequential_outputs="hide_sequential_outputs",e.end_after_tools="end_after_tools",e.execute_code="execute_code",e.file_search="file_search",e.actions="actions",e.tools="tools"}(Te||(Te={})),(ie={})[I.assistants]=2,ie[I.azureAssistants]=1;var Se=o.object({streamRate:o.number().optional(),baseURL:o.string().optional(),titlePrompt:o.string().optional(),titleModel:o.string().optional()});Se.merge(o.object({availableRegions:o.array(o.string()).optional()}));var Le,Re=Se.merge(o.object({disableBuilder:o.boolean().optional(),pollIntervalMs:o.number().optional(),timeoutMs:o.number().optional(),version:o.union([o.string(),o.number()]).default(2),supportedIds:o.array(o.string()).min(1).optional(),excludedIds:o.array(o.string()).min(1).optional(),privateAssistants:o.boolean().optional(),retrievalModels:o.array(o.string()).min(1).optional().default(_e),capabilities:o.array(o.nativeEnum(xe)).optional().default([xe.code_interpreter,xe.image_vision,xe.retrieval,xe.actions,xe.tools]),apiKey:o.string().optional(),models:o.object({default:o.array(o.string()).min(1),fetch:o.boolean().optional(),userIdQuery:o.boolean().optional()}).optional(),titleConvo:o.boolean().optional(),titleMethod:o.union([o.literal("completion"),o.literal("functions")]).optional(),headers:o.record(o.any()).optional()})),ke=Se.merge(o.object({disableBuilder:o.boolean().optional(),pollIntervalMs:o.number().optional(),timeoutMs:o.number().optional(),version:o.union([o.string(),o.number()]).default(2),supportedIds:o.array(o.string()).min(1).optional(),excludedIds:o.array(o.string()).min(1).optional(),privateAssistants:o.boolean().optional(),retrievalModels:o.array(o.string()).min(1).optional().default(_e),capabilities:o.array(o.nativeEnum(xe)).optional().default([xe.code_interpreter,xe.image_vision,xe.retrieval,xe.actions,xe.tools]),apiKey:o.string().optional(),models:o.object({default:o.array(o.string()).min(1),fetch:o.boolean().optional(),userIdQuery:o.boolean().optional()}).optional(),titleConvo:o.boolean().optional(),titleMethod:o.union([o.literal("completion"),o.literal("functions")]).optional(),headers:o.record(o.any()).optional()})),Pe=Se.merge(o.object({name:o.string().refine((function(e){return!U.safeParse(e).success}),{message:"Value cannot be one of the default endpoint (EModelEndpoint) values: ".concat(Object.values(I).join(", "))}),apiKey:o.string(),baseURL:o.string(),models:o.object({default:o.array(o.string()).min(1),fetch:o.boolean().optional(),userIdQuery:o.boolean().optional()}),titleConvo:o.boolean().optional(),titleMethod:o.union([o.literal("completion"),o.literal("functions")]).optional(),summarize:o.boolean().optional(),summaryModel:o.string().optional(),forcePrompt:o.boolean().optional(),modelDisplayLabel:o.string().optional(),headers:o.record(o.any()).optional(),addParams:o.record(o.any()).optional(),dropParams:o.array(o.string()).optional(),customOrder:o.number().optional(),directEndpoint:o.boolean().optional(),titleMessageRole:o.string().optional()})),Ce=o.object({groups:Ae,plugins:o.boolean().optional(),assistants:o.boolean().optional()}).and(Pe.pick({streamRate:!0,titleConvo:!0,titleMethod:!0,titleModel:!0,summarize:!0,summaryModel:!0,customOrder:!0}).partial()),Me=o.object({url:o.string().optional(),apiKey:o.string(),model:o.string(),voices:o.array(o.string())}),Ne=o.object({instanceName:o.string(),apiKey:o.string(),deploymentName:o.string(),apiVersion:o.string(),model:o.string(),voices:o.array(o.string())}),we=o.object({url:o.string().optional(),websocketUrl:o.string().optional(),apiKey:o.string(),model:o.string(),voices:o.array(o.string()),voice_settings:o.object({similarity_boost:o.number().optional(),stability:o.number().optional(),style:o.number().optional(),use_speaker_boost:o.boolean().optional()}).optional(),pronunciation_dictionary_locators:o.array(o.string()).optional()}),je=o.object({url:o.string(),apiKey:o.string().optional(),voices:o.array(o.string()),backend:o.string()}),Ue=o.object({openai:Me.optional(),azureOpenAI:Ne.optional(),elevenlabs:we.optional(),localai:je.optional()}),De=o.object({url:o.string().optional(),apiKey:o.string(),model:o.string()}),Ge=o.object({instanceName:o.string(),apiKey:o.string(),deploymentName:o.string(),apiVersion:o.string()}),Fe=o.object({openai:De.optional(),azureOpenAI:Ge.optional()}),ze=o.object({conversationMode:o.boolean().optional(),advancedMode:o.boolean().optional(),speechToText:o.boolean().optional().or(o.object({engineSTT:o.string().optional(),languageSTT:o.string().optional(),autoTranscribeAudio:o.boolean().optional(),decibelValue:o.number().optional(),autoSendText:o.number().optional()})).optional(),textToSpeech:o.boolean().optional().or(o.object({engineTTS:o.string().optional(),voice:o.string().optional(),languageTTS:o.string().optional(),automaticPlayback:o.boolean().optional(),playbackRate:o.number().optional(),cacheTTS:o.boolean().optional()})).optional()}).optional();!function(e){e.FILE_UPLOAD="FILE_UPLOAD",e.IMPORT="IMPORT",e.TTS="TTS",e.STT="STT"}(Le||(Le={}));var Ke,Qe,Be,qe=o.object({fileUploads:o.object({ipMax:o.number().optional(),ipWindowInMinutes:o.number().optional(),userMax:o.number().optional(),userWindowInMinutes:o.number().optional()}).optional(),conversationsImport:o.object({ipMax:o.number().optional(),ipWindowInMinutes:o.number().optional(),userMax:o.number().optional(),userWindowInMinutes:o.number().optional()}).optional(),tts:o.object({ipMax:o.number().optional(),ipWindowInMinutes:o.number().optional(),userMax:o.number().optional(),userWindowInMinutes:o.number().optional()}).optional(),stt:o.object({ipMax:o.number().optional(),ipWindowInMinutes:o.number().optional(),userMax:o.number().optional(),userWindowInMinutes:o.number().optional()}).optional()});!function(e){e.PNG="png",e.WEBP="webp",e.JPEG="jpeg"}(Ke||(Ke={})),o.object({version:o.string(),cache:o.boolean().default(!0),secureImageLinks:o.boolean().optional(),imageOutputType:o.nativeEnum(Ke).default(Ke.PNG),includedTools:o.array(o.string()).optional(),filteredTools:o.array(o.string()).optional(),interface:o.object({privacyPolicy:o.object({externalUrl:o.string().optional(),openNewTab:o.boolean().optional()}).optional(),termsOfService:o.object({externalUrl:o.string().optional(),openNewTab:o.boolean().optional(),modalAcceptance:o.boolean().optional(),modalTitle:o.string().optional(),modalContent:o.string().or(o.array(o.string())).optional()}).optional(),endpointsMenu:o.boolean().optional(),modelSelect:o.boolean().optional(),parameters:o.boolean().optional(),sidePanel:o.boolean().optional(),multiConvo:o.boolean().optional(),bookmarks:o.boolean().optional(),presets:o.boolean().optional(),prompts:o.boolean().optional(),agents:o.boolean().optional()}).default({endpointsMenu:!0,modelSelect:!0,parameters:!0,sidePanel:!0,presets:!0,multiConvo:!0,bookmarks:!0,prompts:!0,agents:!0}),fileStrategy:ye.default(oe.local),registration:o.object({socialLogins:o.array(o.string()).optional(),allowedDomains:o.array(o.string()).optional()}).default({socialLogins:["google","facebook","openid","github","discord"]}),speech:o.object({tts:Ue.optional(),stt:Fe.optional(),speechTab:ze.optional()}).optional(),rateLimits:qe.optional(),fileConfig:ge.optional(),modelSpecs:be.optional(),endpoints:o.object((re={all:Se.optional()},re[I.openAI]=Se.optional(),re[I.google]=Se.optional(),re[I.anthropic]=Se.optional(),re[I.gptPlugins]=Se.optional(),re[I.azureOpenAI]=Ce.optional(),re[I.azureAssistants]=Re.optional(),re[I.assistants]=Re.optional(),re[I.agents]=ke.optional(),re[I.custom]=o.array(Pe.partial()).optional(),re[I.bedrock]=Se.optional(),re)).strict().refine((function(e){return Object.keys(e).length>0}),{message:"At least one `endpoints` field must be provided."}).optional()}),function(e){e.anyscale="anyscale",e.apipie="apipie",e.cohere="cohere",e.fireworks="fireworks",e.deepseek="deepseek",e.groq="groq",e.huggingface="huggingface",e.mistral="mistral",e.mlx="mlx",e.ollama="ollama",e.openrouter="openrouter",e.perplexity="perplexity",e.shuttleai="shuttleai",e["together.ai"]="together.ai",e.unify="unify",e.xai="xai"}(Qe||(Qe={})),function(e){e.openrouter="openrouter"}(Be||(Be={})),I.openAI,I.assistants,I.azureAssistants,I.azureOpenAI,I.agents,I.bingAI,I.chatGPTBrowser,I.gptPlugins,I.google,I.anthropic,I.custom,I.bedrock,(se={})[I.openAI]="OpenAI",se[I.assistants]="Assistants",se[I.agents]="Agents",se[I.azureAssistants]="Azure Assistants",se[I.azureOpenAI]="Azure OpenAI",se[I.bingAI]="Bing",se[I.chatGPTBrowser]="ChatGPT",se[I.gptPlugins]="Plugins",se[I.google]="Google",se[I.anthropic]="Anthropic",se[I.custom]="Custom",se[I.bedrock]="AWS Bedrock",se[Qe.ollama]="Ollama",se[Qe.xai]="xAI";var We,He,Ve,Ye,Xe,Je,$e,Ze,et,tt,nt,ot,at,it,rt,st,lt=["gpt-4o-mini","gpt-4o","gpt-3.5-turbo","gpt-3.5-turbo-0125","gpt-4-turbo","gpt-4-turbo-2024-04-09","gpt-4-0125-preview","gpt-4-turbo-preview","gpt-4-1106-preview","gpt-3.5-turbo-1106","gpt-3.5-turbo-16k-0613","gpt-3.5-turbo-16k","gpt-4","gpt-4-0314","gpt-4-32k-0314","gpt-4-0613","gpt-3.5-turbo-0613"],ut=((le={})[I.azureAssistants]=lt,le[I.assistants]=h(["chatgpt-4o-latest"],lt,!0),le[I.agents]=lt,le[I.google]=["gemini-pro","gemini-pro-vision","chat-bison","chat-bison-32k","codechat-bison","codechat-bison-32k","text-bison","text-bison-32k","text-unicorn","code-gecko","code-bison","code-bison-32k"],le[I.anthropic]=["claude-3-5-haiku-20241022","claude-3-5-sonnet-20241022","claude-3-5-sonnet-20240620","claude-3-5-sonnet-latest","claude-3-opus-20240229","claude-3-sonnet-20240229","claude-3-haiku-20240307","claude-2.1","claude-2","claude-1.2","claude-1","claude-1-100k","claude-instant-1","claude-instant-1-100k"],le[I.openAI]=h(h(["chatgpt-4o-latest"],lt,!0),["gpt-4-vision-preview","gpt-3.5-turbo-instruct-0914","gpt-3.5-turbo-instruct"],!1),le[I.bedrock]=["anthropic.claude-3-5-sonnet-20241022-v2:0","anthropic.claude-3-5-sonnet-20240620-v1:0","anthropic.claude-3-5-haiku-20241022-v1:0","anthropic.claude-3-haiku-20240307-v1:0","anthropic.claude-3-opus-20240229-v1:0","anthropic.claude-3-sonnet-20240229-v1:0","anthropic.claude-v2","anthropic.claude-v2:1","anthropic.claude-instant-v1","cohere.command-r-v1:0","cohere.command-r-plus-v1:0","meta.llama2-13b-chat-v1","meta.llama2-70b-chat-v1","meta.llama3-8b-instruct-v1:0","meta.llama3-70b-instruct-v1:0","meta.llama3-1-8b-instruct-v1:0","meta.llama3-1-70b-instruct-v1:0","meta.llama3-1-405b-instruct-v1:0","mistral.mistral-7b-instruct-v0:2","mistral.mixtral-8x7b-instruct-v0:1","mistral.mistral-large-2402-v1:0","mistral.mistral-large-2407-v1:0","mistral.mistral-small-2402-v1:0","ai21.jamba-instruct-v1:0","amazon.titan-text-lite-v1","amazon.titan-text-express-v1","amazon.titan-text-premier-v1:0"],le),ct=ut[I.openAI],pt=((ue={initial:[]})[I.openAI]=ct,ue[I.assistants]=ct.filter((function(e){return/gpt-4|gpt-3\\.5/i.test(e)&&!/vision|instruct/i.test(e)})),ue[I.agents]=ct,ue[I.gptPlugins]=ct,ue[I.azureOpenAI]=ct,ue[I.bingAI]=["BingAI","Sydney"],ue[I.chatGPTBrowser]=["text-davinci-002-render-sha"],ue[I.google]=ut[I.google],ue[I.anthropic]=ut[I.anthropic],ue[I.bedrock]=ut[I.bedrock],ue);(ce={})[I.openAI]="/api/ask/".concat(I.openAI),ce[I.bingAI]="/api/ask/".concat(I.bingAI),ce[I.google]="/api/ask/".concat(I.google),ce[I.custom]="/api/ask/".concat(I.custom),ce[I.anthropic]="/api/ask/".concat(I.anthropic),ce[I.gptPlugins]="/api/ask/".concat(I.gptPlugins),ce[I.azureOpenAI]="/api/ask/".concat(I.azureOpenAI),ce[I.chatGPTBrowser]="/api/ask/".concat(I.chatGPTBrowser),ce[I.azureAssistants]="/api/assistants/v1/chat",ce[I.assistants]="/api/assistants/v2/chat",ce[I.agents]="/api/".concat(I.agents,"/chat"),ce[I.bedrock]="/api/".concat(I.bedrock,"/chat"),new Set([I.gptPlugins,I.anthropic,I.google,I.openAI,I.azureOpenAI,I.custom,I.agents,I.bedrock]),(pe={})[I.custom]=!0,pe[I.openAI]=!0,pe[I.anthropic]=!0,pe[I.gptPlugins]=!0,pe[I.assistants]=!0,pe[I.agents]=!0,pe[I.azureAssistants]=!0,pe[I.azureOpenAI]=!0,pe[I.bedrock]=!0,function(e){e.generative="generative",e.agents="agents"}(We||(We={})),function(e){e.PROMPT_GROUPS="promptGroups",e.SHARED_LINKS="sharedLinks"}(He||(He={})),function(e){e[e.ONE_HOUR=36e5]="ONE_HOUR",e[e.THIRTY_MINUTES=18e5]="THIRTY_MINUTES",e[e.TEN_MINUTES=6e5]="TEN_MINUTES",e[e.FIVE_MINUTES=3e5]="FIVE_MINUTES",e[e.TWO_MINUTES=12e4]="TWO_MINUTES",e[e.ONE_MINUTE=6e4]="ONE_MINUTE",e[e.THIRTY_SECONDS=3e4]="THIRTY_SECONDS"}(Ve||(Ve={})),function(e){e.CONFIG_STORE="configStore",e.ROLES="roles",e.PLUGINS="plugins",e.GEN_TITLE="genTitle",e.TOOLS="tools",e.MODELS_CONFIG="modelsConfig",e.MODEL_QUERIES="modelQueries",e.STARTUP_CONFIG="startupConfig",e.ENDPOINT_CONFIG="endpointsConfig",e.TOKEN_CONFIG="tokenConfig",e.CUSTOM_CONFIG="customConfig",e.ABORT_KEYS="abortKeys",e.OVERRIDE_CONFIG="overrideConfig",e.BANS="bans",e.ENCODED_DOMAINS="encoded_domains",e.AUDIO_RUNS="audioRuns",e.MESSAGES="messages"}(Ye||(Ye={})),function(e){e.FILE_UPLOAD_LIMIT="file_upload_limit",e.ILLEGAL_MODEL_REQUEST="illegal_model_request",e.TOKEN_BALANCE="token_balance",e.BAN="ban",e.TTS_LIMIT="tts_limit",e.STT_LIMIT="stt_limit",e.RESET_PASSWORD_LIMIT="reset_password_limit",e.VERIFY_EMAIL_LIMIT="verify_email_limit",e.CONVO_ACCESS="convo_access",e.TOOL_CALL_LIMIT="tool_call_limit"}(Xe||(Xe={})),function(e){e.NO_USER_KEY="no_user_key",e.EXPIRED_USER_KEY="expired_user_key",e.INVALID_USER_KEY="invalid_user_key",e.NO_BASE_URL="no_base_url",e.MODERATION="moderation",e.INPUT_LENGTH="INPUT_LENGTH",e.INVALID_REQUEST="invalid_request_error",e.NO_SYSTEM_MESSAGES="no_system_messages"}(Je||(Je={})),function(e){e.GOOGLE_SERVICE_KEY="GOOGLE_SERVICE_KEY",e.GOOGLE_API_KEY="GOOGLE_API_KEY"}($e||($e={})),function(e){e[e.LOW=85]="LOW",e[e.HIGH=170]="HIGH",e[e.ADDITIONAL=85]="ADDITIONAL"}(Ze||(Ze={})),function(e){e.GENERAL="general",e.CHAT="chat",e.SPEECH="speech",e.BETA="beta",e.DATA="data",e.ACCOUNT="account",e.COMMANDS="commands"}(et||(et={})),function(e){e.OPENAI="openai",e.AZURE_OPENAI="azureOpenAI"}(tt||(tt={})),function(e){e.OPENAI="openai",e.AZURE_OPENAI="azureOpenAI",e.ELEVENLABS="elevenlabs",e.LOCALAI="localai"}(nt||(nt={})),function(e){e.VERSION="v0.7.5",e.CONFIG_VERSION="1.1.8",e.NO_PARENT="00000000-0000-0000-0000-000000000000",e.NEW_CONVO="new",e.SEARCH="search",e[e.ENCODED_DOMAIN_LENGTH=10]="ENCODED_DOMAIN_LENGTH",e.CURRENT_MODEL="current_model",e.COMMON_DIVIDER="__",e[e.COMMANDS_MAX_LENGTH=56]="COMMANDS_MAX_LENGTH",e[e.DEFAULT_STREAM_RATE=1]="DEFAULT_STREAM_RATE",e.SAVED_TAG="Saved",e[e.MAX_CONVO_STARTERS=4]="MAX_CONVO_STARTERS",e.GLOBAL_PROJECT_NAME="instance"}(ot||(ot={})),function(e){e.APP_TITLE="appTitle",e.LAST_CONVO_SETUP="lastConversationSetup",e.LAST_BING="lastBingSettings",e.LAST_MODEL="lastSelectedModel",e.LAST_TOOLS="lastSelectedTools",e.LAST_SPEC="lastSelectedSpec",e.FILES_TO_DELETE="filesToDelete",e.ASST_ID_PREFIX="assistant_id__",e.AGENT_ID_PREFIX="agent_id__",e.FORK_SETTING="forkSetting",e.REMEMBER_FORK_OPTION="rememberDefaultFork",e.FORK_SPLIT_AT_TARGET="splitAtTarget",e.TEXT_DRAFT="textDraft_",e.FILES_DRAFT="filesDraft_",e.LAST_PROMPT_CATEGORY="lastPromptCategory",e.ENABLE_USER_MSG_MARKDOWN="enableUserMsgMarkdown",e.SHOW_ANALYSIS_CODE="showAnalysisCode"}(at||(at={})),function(e){e.DIRECT_PATH="directPath",e.INCLUDE_BRANCHES="includeBranches",e.TARGET_LEVEL=""}(it||(it={})),function(e){e.API_URL="https://api.cohere.ai/v1",e.ROLE_USER="USER",e.ROLE_SYSTEM="SYSTEM",e.ROLE_CHATBOT="CHATBOT",e.TITLE_MESSAGE="TITLE:"}(rt||(rt={})),function(e){e.ALL="sys__all__sys",e.MY_PROMPTS="sys__my__prompts__sys",e.NO_CATEGORY="sys__no__category__sys",e.SHARED_PROMPTS="sys__shared__prompts__sys"}(st||(st={})),(de={})[I.openAI]=I.openAI,de[I.bedrock]=I.bedrock,de[I.azureOpenAI]=I.openAI,de[I.anthropic]=I.anthropic;var dt=function(e,t){return"/api/messages/".concat(e).concat(t?"/".concat(t):"")},mt="/api/keys",ft="/api/convos",gt=function(e,t){return"/api/search?q=".concat(e,"&pageNumber=").concat(t)};function vt(e,t){return v(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return[4,a.post(e,JSON.stringify(t),{headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent().data]}}))}))}var bt=!1,ht=[],_t=function(e){return vt(function(e){return"/api/auth/refresh".concat(!0===e?"?retry=true":"")}(e))},xt=function(e){!function(e){a.defaults.headers.common.Authorization="Bearer "+e}(e),window.dispatchEvent(new CustomEvent("tokenUpdated",{detail:e}))},Tt=function(e,t){void 0===t&&(t=null),ht.forEach((function(n){e?n.reject(e):n.resolve(t)})),ht=[]};a.interceptors.response.use((function(e){return e}),(function(e){return v(void 0,void 0,void 0,(function(){var t,n,o,i,r,s,l;return b(this,(function(u){switch(u.label){case 0:if(t=e.config,!e.response)return[2,Promise.reject(e)];if(401!==e.response.status||t._retry)return[3,13];if(console.warn("401 error, refreshing token"),t._retry=!0,!bt)return[3,5];u.label=1;case 1:return u.trys.push([1,4,,5]),[4,new Promise((function(e,t){ht.push({resolve:e,reject:t})}))];case 2:return i=u.sent(),t.headers.Authorization="Bearer "+i,[4,a(t)];case 3:return[2,u.sent()];case 4:return n=u.sent(),[2,Promise.reject(n)];case 5:bt=!0,u.label=6;case 6:return u.trys.push([6,11,12,13]),[4,_t(!0===(null===(s=t.url)||void 0===s?void 0:s.includes("api/auth/refresh")))];case 7:return o=u.sent(),(i=null!==(l=null==o?void 0:o.token)&&void 0!==l?l:"")?(t.headers.Authorization="Bearer "+i,xt(i),Tt(null,i),[4,a(t)]):[3,9];case 8:return[2,u.sent()];case 9:window.location.href.includes("share/")?console.log("Refresh token failed from shared link, attempting request to ".concat(t.url)):window.location.href="/login",u.label=10;case 10:return[3,13];case 11:return r=u.sent(),Tt(r,null),[2,Promise.reject(r)];case 12:return bt=!1,[7];case 13:return[2,Promise.reject(e)]}}))}))}));var yt={get:function(e,t){return v(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return[4,a.get(e,g({},t))];case 1:return[2,n.sent().data]}}))}))},getResponse:function(e,t){return v(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return[4,a.get(e,g({},t))];case 1:return[2,n.sent()]}}))}))},post:vt,postMultiPart:function(e,t,n){return v(this,void 0,void 0,(function(){return b(this,(function(o){switch(o.label){case 0:return[4,a.post(e,t,g(g({},n),{headers:{"Content-Type":"multipart/form-data"}}))];case 1:return[2,o.sent().data]}}))}))},postTTS:function(e,t,n){return v(this,void 0,void 0,(function(){return b(this,(function(o){switch(o.label){case 0:return[4,a.post(e,t,g(g({},n),{headers:{"Content-Type":"multipart/form-data"},responseType:"arraybuffer"}))];case 1:return[2,o.sent().data]}}))}))},put:function(e,t){return v(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return[4,a.put(e,JSON.stringify(t),{headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent().data]}}))}))},delete:function(e){return v(this,void 0,void 0,(function(){return b(this,(function(t){switch(t.label){case 0:return[4,a.delete(e)];case 1:return[2,t.sent().data]}}))}))},deleteWithOptions:function(e,t){return v(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return[4,a.delete(e,g({},t))];case 1:return[2,n.sent().data]}}))}))},patch:function(e,t){return v(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return[4,a.patch(e,JSON.stringify(t),{headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent().data]}}))}))},refreshToken:_t,dispatchTokenUpdatedEvent:xt};function Ot(e){return yt.delete(function(e){return"".concat(mt,"/").concat(e)}(e))}function Et(){return yt.delete("".concat(mt,"?all=true"))}function It(e){if(!e.value)throw new Error("value is required");return yt.put(mt,e)}var At=function(e){return yt.get(function(e){return"".concat(mt,"?name=").concat(e)}(e))},St=function(){return yt.get("/api/config")};function Lt(){return yt.post("".concat(ft,"/clear"),{arg:{}})}var Rt,kt;function Pt(e){return yt.get(function(e){return"".concat(ft,"/").concat(e)}(e))}!function(e){e.messages="messages",e.sharedMessages="sharedMessages",e.sharedLinks="sharedLinks",e.allConversations="allConversations",e.archivedConversations="archivedConversations",e.searchConversations="searchConversations",e.conversation="conversation",e.searchEnabled="searchEnabled",e.user="user",e.name="name",e.models="models",e.balance="balance",e.endpoints="endpoints",e.presets="presets",e.searchResults="searchResults",e.tokenCount="tokenCount",e.availablePlugins="availablePlugins",e.startupConfig="startupConfig",e.assistants="assistants",e.assistant="assistant",e.agents="agents",e.agent="agent",e.endpointsConfigOverride="endpointsConfigOverride",e.files="files",e.fileConfig="fileConfig",e.tools="tools",e.toolAuth="toolAuth",e.toolCalls="toolCalls",e.agentTools="agentTools",e.actions="actions",e.assistantDocs="assistantDocs",e.agentDocs="agentDocs",e.fileDownload="fileDownload",e.voices="voices",e.customConfigSpeech="customConfigSpeech",e.prompts="prompts",e.prompt="prompt",e.promptGroups="promptGroups",e.allPromptGroups="allPromptGroups",e.promptGroup="promptGroup",e.categories="categories",e.randomPrompts="randomPrompts",e.roles="roles",e.conversationTags="conversationTags",e.health="health",e.userTerms="userTerms",e.banner="banner"}(Rt||(Rt={})),function(e){e.fileUpload="fileUpload",e.fileDelete="fileDelete",e.updatePreset="updatePreset",e.deletePreset="deletePreset",e.logoutUser="logoutUser",e.avatarUpload="avatarUpload",e.speechToText="speechToText",e.textToSpeech="textToSpeech",e.assistantAvatarUpload="assistantAvatarUpload",e.agentAvatarUpload="agentAvatarUpload",e.updateAction="updateAction",e.updateAgentAction="updateAgentAction",e.deleteAction="deleteAction",e.deleteAgentAction="deleteAgentAction",e.deleteUser="deleteUser",e.updateRole="updateRole"}(kt||(kt={}));var Ct=function(){var n=e();return t((function(e){return function(e,t,n){return yt.post(function(e){return"/api/ask/".concat(e,"/abort")}(e),{arg:{abortKey:t,message:n}})}(e.endpoint,e.abortKey,e.message)}),{onSuccess:function(){n.invalidateQueries([Rt.balance])}})},Mt=function(e){return n([Rt.user],(function(){return yt.get("/api/user")}),g({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:!1},e))},Nt=function(e,t){return n([Rt.messages,e],(function(){return"new"===(t=e)?Promise.resolve([]):yt.get(dt(t));var t}),g({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},t))},wt=function(e,t){return n([Rt.sharedMessages,e],(function(){return function(e){return yt.get(function(e){return"".concat("/api/share","/").concat(e)}(e))}(e)}),g({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},t))},jt=function(e){return n([Rt.balance],(function(){return yt.get("/api/balance")}),g({refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:!0},e))},Ut=function(e,t){return n([Rt.conversation,e],(function(){return Pt(e)}),g({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},t))},Dt=function(n){var o=e();return t((function(){return Pt(n)}),{onSuccess:function(){o.invalidateQueries([Rt.conversation,n])}})},Gt=function(n){var o=e();return t((function(e){return function(e){var t=e.conversationId,n=e.messageId,o=e.text;if(!t)throw new Error("conversationId is required");return yt.put(dt(t,n),{text:o})}(e)}),{onSuccess:function(){o.invalidateQueries([Rt.messages,n])}})},Ft=function(n){var o=e();return t((function(e){return function(e){var t=e.conversationId,n=e.messageId,o=e.index,a=e.text;if(!t)throw new Error("conversationId is required");return yt.put(dt(t,n),{text:a,index:o})}(e)}),{onSuccess:function(){o.invalidateQueries([Rt.messages,n])}})},zt=function(){var n=e();return t((function(e){return It(e)}),{onSuccess:function(e,t){n.invalidateQueries([Rt.name,t.name])}})},Kt=function(){var n=e();return t((function(){return Lt()}),{onSuccess:function(){n.invalidateQueries([Rt.allConversations])}})},Qt=function(n){var o=e();return t((function(){return Ot(n)}),{onSuccess:function(){var e,t;o.invalidateQueries([Rt.name,n]),(t=null!=(e=n)?e:"")&&t.toLowerCase().endsWith(I.assistants)&&(o.invalidateQueries([Rt.assistants,n,E]),o.invalidateQueries([Rt.assistantDocs]),o.invalidateQueries([Rt.assistants]),o.invalidateQueries([Rt.assistant]),o.invalidateQueries([Rt.actions]),o.invalidateQueries([Rt.tools]))}})},Bt=function(){var n=e();return t((function(){return Et()}),{onSuccess:function(){n.invalidateQueries([Rt.name]),n.invalidateQueries([Rt.assistants,I.assistants,E]),n.invalidateQueries([Rt.assistants,I.azureAssistants,E]),n.invalidateQueries([Rt.assistantDocs]),n.invalidateQueries([Rt.assistants]),n.invalidateQueries([Rt.assistant]),n.invalidateQueries([Rt.actions]),n.invalidateQueries([Rt.tools])}})},qt=function(e){return n([Rt.searchEnabled],(function(){return yt.get("/api/search/enable")}),g({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},e))},Wt=function(e){return n([Rt.endpoints],(function(){return yt.get("/api/endpoints")}),g({staleTime:1/0,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},e))},Ht=function(e){return n([Rt.models],(function(){return v(void 0,void 0,void 0,(function(){return b(this,(function(e){return[2,yt.get("/api/models")]}))}))}),g({initialData:pt,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,staleTime:1/0},e))},Vt=function(){var n=e();return t((function(e){return function(e){return yt.post("/api/presets",e)}(e)}),{onSuccess:function(){n.invalidateQueries([Rt.presets])}})},Yt=function(){var n=e();return t((function(e){return t=e,yt.post("/api/presets/delete",t);var t}),{onSuccess:function(){n.invalidateQueries([Rt.presets])}})},Xt=function(e,t,o){return n([Rt.searchResults,t,e],(function(){return function(e,t){return v(void 0,void 0,void 0,(function(){return b(this,(function(n){return[2,yt.get(gt(e,t))]}))}))}(e,t)}),g({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},o))},Jt=function(){var n=e();return t((function(e){return function(e){return yt.post("/api/tokenizer",{arg:e})}(e.text)}),{onSuccess:function(){n.invalidateQueries([Rt.tokenCount])}})},$t=function(){var n=e();return t((function(e){return function(e){return yt.post("/api/auth/login",e)}(e)}),{onMutate:function(){n.removeQueries(),localStorage.removeItem(at.LAST_CONVO_SETUP),localStorage.removeItem("".concat(at.LAST_CONVO_SETUP,"_0")),localStorage.removeItem("".concat(at.LAST_CONVO_SETUP,"_1")),localStorage.removeItem(at.LAST_MODEL),localStorage.removeItem(at.LAST_TOOLS),localStorage.removeItem(at.FILES_TO_DELETE)}})},Zt=function(n){var o=e();return t((function(e){return function(e){return yt.post("/api/auth/register",e)}(e)}),g(g({},n),{onSuccess:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.invalidateQueries([Rt.user]),(null==n?void 0:n.onSuccess)&&n.onSuccess.apply(n,e)}}))},en=function(){var n=e();return t((function(){return yt.refreshToken()}),{onMutate:function(){n.removeQueries()}})},tn=function(e,t){return n([Rt.name,e],(function(){return e?At(e):Promise.resolve({expiresAt:""})}),g({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1,retry:!1},t))},nn=function(){return t((function(e){return function(e){return yt.post("/api/auth/requestPasswordReset",e)}(e)}))},on=function(){return t((function(e){return function(e){return yt.post("/api/auth/resetPassword",e)}(e)}))},an=function(e){return n([Rt.availablePlugins],(function(){return yt.get("/api/plugins")}),g({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},e))},rn=function(n){var o=e(),a=null!=n?n:{},i=a.onSuccess,r=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n}(a,["onSuccess"]);return t((function(e){return function(e){return yt.post("/api/user/plugins",e)}(e)}),g(g({},r),{onSuccess:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.invalidateQueries([Rt.user]),null==i||i.apply(void 0,e)}}))},sn=function(e){return n([Rt.startupConfig],(function(){return St()}),g({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},e))},ln=function(e){return n([Rt.customConfigSpeech],(function(){return yt.get("".concat("".concat("/api/files","/speech"),"/config/get"))}),g({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},e))},un=function(e){return n([Rt.banner],(function(){return yt.get("/api/banner")}),g({refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1},e))};export{Ct as useAbortRequestWithMessage,an as useAvailablePluginsQuery,Kt as useClearConversationsMutation,Vt as useCreatePresetMutation,Yt as useDeletePresetMutation,un as useGetBannerQuery,Dt as useGetConversationByIdMutation,Ut as useGetConversationByIdQuery,ln as useGetCustomConfigSpeechQuery,Wt as useGetEndpointsQuery,Nt as useGetMessagesByConvoId,Ht as useGetModelsQuery,qt as useGetSearchEnabledQuery,wt as useGetSharedMessages,sn as useGetStartupConfig,jt as useGetUserBalance,Mt as useGetUserQuery,$t as useLoginUserMutation,en as useRefreshTokenMutation,Zt as useRegisterUserMutation,nn as useRequestPasswordResetMutation,on as useResetPasswordMutation,Bt as useRevokeAllUserKeysMutation,Qt as useRevokeUserKeyMutation,Xt as useSearchQuery,Ft as useUpdateMessageContentMutation,Gt as useUpdateMessageMutation,Jt as useUpdateTokenCountMutation,zt as useUpdateUserKeysMutation,rn as useUpdateUserPluginsMutation,tn as useUserKeyQuery};
//# sourceMappingURL=index.es.js.map
