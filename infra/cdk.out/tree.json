{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.226.0"},"children":{"EcsStack":{"id":"EcsStack","path":"EcsStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.226.0"},"children":{"ExistingVpc":{"id":"ExistingVpc","path":"EcsStack/ExistingVpc","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.226.0","metadata":[]},"children":{"PrivateSubnet1":{"id":"PrivateSubnet1","path":"EcsStack/ExistingVpc/PrivateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.226.0","metadata":[]}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"EcsStack/ExistingVpc/PrivateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.226.0","metadata":[]}},"EcrDockerEndpoint":{"id":"EcrDockerEndpoint","path":"EcsStack/ExistingVpc/EcrDockerEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/ExistingVpc/EcrDockerEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["VpcEndpointsSgB7473DD6","GroupId"]}],"serviceName":"com.amazonaws.us-east-1.ecr.dkr","subnetIds":["subnet-0184fa96237d9873f","subnet-02e553a6971550663"],"vpcEndpointType":"Interface","vpcId":"vpc-06ea0349e255c4c59"}}}}},"EcrApiEndpoint":{"id":"EcrApiEndpoint","path":"EcsStack/ExistingVpc/EcrApiEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/ExistingVpc/EcrApiEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["VpcEndpointsSgB7473DD6","GroupId"]}],"serviceName":"com.amazonaws.us-east-1.ecr.api","subnetIds":["subnet-0184fa96237d9873f","subnet-02e553a6971550663"],"vpcEndpointType":"Interface","vpcId":"vpc-06ea0349e255c4c59"}}}}},"CloudWatchLogsEndpoint":{"id":"CloudWatchLogsEndpoint","path":"EcsStack/ExistingVpc/CloudWatchLogsEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/ExistingVpc/CloudWatchLogsEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["VpcEndpointsSgB7473DD6","GroupId"]}],"serviceName":"com.amazonaws.us-east-1.logs","subnetIds":["subnet-0184fa96237d9873f","subnet-02e553a6971550663"],"vpcEndpointType":"Interface","vpcId":"vpc-06ea0349e255c4c59"}}}}},"BedrockRuntimeEndpoint":{"id":"BedrockRuntimeEndpoint","path":"EcsStack/ExistingVpc/BedrockRuntimeEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/ExistingVpc/BedrockRuntimeEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["VpcEndpointsSgB7473DD6","GroupId"]}],"serviceName":"com.amazonaws.us-east-1.bedrock-runtime","subnetIds":["subnet-0184fa96237d9873f","subnet-02e553a6971550663"],"vpcEndpointType":"Interface","vpcId":"vpc-06ea0349e255c4c59"}}}}},"S3GatewayEndpoint":{"id":"S3GatewayEndpoint","path":"EcsStack/ExistingVpc/S3GatewayEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.GatewayVpcEndpoint","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/ExistingVpc/S3GatewayEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"routeTableIds":["rtb-07b4c8c744c04d403"],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".s3"]]},"vpcEndpointType":"Gateway","vpcId":"vpc-06ea0349e255c4c59"}}}}}}},"VpcEndpointsSg":{"id":"VpcEndpointsSg","path":"EcsStack/VpcEndpointsSg","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/VpcEndpointsSg/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"EcsStack/VpcEndpointsSg","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"securityGroupIngress":[{"cidrIp":"10.43.78.0/24","ipProtocol":"tcp","fromPort":443,"toPort":443,"description":"from 10.43.78.0/24:443"}],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"vpcId":"vpc-06ea0349e255c4c59"}}}}},"AIAssistantCluster":{"id":"AIAssistantCluster","path":"EcsStack/AIAssistantCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.Cluster","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/AIAssistantCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnCluster","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Cluster","aws:cdk:cloudformation:props":{"clusterName":"ai-assistant-cluster","tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}]}}},"DefaultServiceDiscoveryNamespace":{"id":"DefaultServiceDiscoveryNamespace","path":"EcsStack/AIAssistantCluster/DefaultServiceDiscoveryNamespace","constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.PrivateDnsNamespace","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/AIAssistantCluster/DefaultServiceDiscoveryNamespace/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.CfnPrivateDnsNamespace","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ServiceDiscovery::PrivateDnsNamespace","aws:cdk:cloudformation:props":{"name":"internal","tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"vpc":"vpc-06ea0349e255c4c59"}}}}}}},"CommonTaskExecutionRole":{"id":"CommonTaskExecutionRole","path":"EcsStack/CommonTaskExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.226.0","metadata":[]},"children":{"ImportCommonTaskExecutionRole":{"id":"ImportCommonTaskExecutionRole","path":"EcsStack/CommonTaskExecutionRole/ImportCommonTaskExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.226.0","metadata":[]}},"Resource":{"id":"Resource","path":"EcsStack/CommonTaskExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Execution role for pulling ECR images and writing logs","managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/AmazonS3ReadOnlyAccess"]]}],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"EcsStack/CommonTaskExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/CommonTaskExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["LibreChatTaskDeflibrechatLogGroup0EEBFD56","Arn"]}},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MongoTaskDefmongodbLogGroupD3FC433A","Arn"]}},{"Action":["logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":{"Fn::GetAtt":["VectorDbTaskDefvectordbLogGroup62D4A81C","Arn"]}}],"Version":"2012-10-17"},"policyName":"CommonTaskExecutionRoleDefaultPolicyE1F73401","roles":[{"Ref":"CommonTaskExecutionRole35A7E9C0"}]}}}}}}},"LibreChatTaskDef":{"id":"LibreChatTaskDef","path":"EcsStack/LibreChatTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.226.0","metadata":[]},"children":{"TaskRole":{"id":"TaskRole","path":"EcsStack/LibreChatTaskDef/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.226.0","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"EcsStack/LibreChatTaskDef/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.226.0","metadata":[]}},"Resource":{"id":"Resource","path":"EcsStack/LibreChatTaskDef/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}]}}}}},"Resource":{"id":"Resource","path":"EcsStack/LibreChatTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"command":["npm","run","backend"],"essential":true,"image":"152320432929.dkr.ecr.us-east-1.amazonaws.com/newjersey/librechat:latest","name":"librechat","portMappings":[{"containerPort":3080,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"LibreChatTaskDeflibrechatLogGroup0EEBFD56"},"awslogs-stream-prefix":"librechat","awslogs-region":"us-east-1"}},"environment":[{"name":"NODE_ENV","value":"production"},{"name":"PORT","value":"3080"},{"name":"HOST","value":"0.0.0.0"},{"name":"LOG_LEVEL","value":"info"},{"name":"MONGO_URI","value":"mongodb://mongodb.internal:27017/LibreChat"},{"name":"MEILI_HOST","value":"http://rag_api.internal:7700"},{"name":"RAG_API_URL","value":"http://rag_api.internal:8000"},{"name":"CONFIG_PATH","value":"/app/nj/nj-librechat.yaml"}],"environmentFiles":[{"type":"s3","value":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":s3:::nj-librechat-env-files/dev.env"]]}}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["CommonTaskExecutionRole35A7E9C0","Arn"]},"family":"EcsStackLibreChatTaskDef1AD83E81","memory":"512","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"taskRoleArn":{"Fn::GetAtt":["LibreChatTaskDefTaskRole5B06068B","Arn"]}}}},"librechat":{"id":"librechat","path":"EcsStack/LibreChatTaskDef/librechat","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.226.0"},"children":{"LogGroup":{"id":"LogGroup","path":"EcsStack/LibreChatTaskDef/librechat/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/LibreChatTaskDef/librechat/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}]}}}}}}}}},"EnvFilesBucket":{"id":"EnvFilesBucket","path":"EcsStack/EnvFilesBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.226.0","metadata":[]}},"LibreChatFargateService":{"id":"LibreChatFargateService","path":"EcsStack/LibreChatFargateService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs_patterns.ApplicationLoadBalancedFargateService","version":"2.226.0"},"children":{"LB":{"id":"LB","path":"EcsStack/LibreChatFargateService/LB","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/LibreChatFargateService/LB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::LoadBalancer","aws:cdk:cloudformation:props":{"loadBalancerAttributes":[{"key":"deletion_protection.enabled","value":"false"}],"scheme":"internal","securityGroups":[{"Fn::GetAtt":["LibreChatFargateServiceLBSecurityGroup2D1C8350","GroupId"]}],"subnets":["subnet-0184fa96237d9873f","subnet-02e553a6971550663"],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"type":"application"}}},"SecurityGroup":{"id":"SecurityGroup","path":"EcsStack/LibreChatFargateService/LB/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/LibreChatFargateService/LB/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatically created Security Group for ELB EcsStackLibreChatFargateServiceLBC392DC30","securityGroupIngress":[{"cidrIp":"0.0.0.0/0","ipProtocol":"tcp","fromPort":80,"toPort":80,"description":"Allow from anyone on port 80"}],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"vpcId":"vpc-06ea0349e255c4c59"}}},"to EcsStackLibreChatFargateServiceSecurityGroupDEF120B9:3080":{"id":"to EcsStackLibreChatFargateServiceSecurityGroupDEF120B9:3080","path":"EcsStack/LibreChatFargateService/LB/SecurityGroup/to EcsStackLibreChatFargateServiceSecurityGroupDEF120B9:3080","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupEgress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","destinationSecurityGroupId":{"Fn::GetAtt":["LibreChatFargateServiceSecurityGroup42A8A300","GroupId"]},"fromPort":3080,"groupId":{"Fn::GetAtt":["LibreChatFargateServiceLBSecurityGroup2D1C8350","GroupId"]},"ipProtocol":"tcp","toPort":3080}}}}},"PublicListener":{"id":"PublicListener","path":"EcsStack/LibreChatFargateService/LB/PublicListener","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/LibreChatFargateService/LB/PublicListener/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::Listener","aws:cdk:cloudformation:props":{"defaultActions":[{"type":"forward","targetGroupArn":{"Ref":"LibreChatFargateServiceLBPublicListenerECSPrivateGroup2E6CBA37"}}],"loadBalancerArn":{"Ref":"LibreChatFargateServiceLB87F581BB"},"port":80,"protocol":"HTTP"}}},"ECSPrivateGroup":{"id":"ECSPrivateGroup","path":"EcsStack/LibreChatFargateService/LB/PublicListener/ECSPrivateGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup","version":"2.226.0"},"children":{"Resource":{"id":"Resource","path":"EcsStack/LibreChatFargateService/LB/PublicListener/ECSPrivateGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ElasticLoadBalancingV2::TargetGroup","aws:cdk:cloudformation:props":{"port":80,"protocol":"HTTP","tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"targetGroupAttributes":[{"key":"stickiness.enabled","value":"false"}],"targetType":"ip","vpcId":"vpc-06ea0349e255c4c59"}}}}}}}}},"LoadBalancerDNS":{"id":"LoadBalancerDNS","path":"EcsStack/LibreChatFargateService/LoadBalancerDNS","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}},"ServiceURL":{"id":"ServiceURL","path":"EcsStack/LibreChatFargateService/ServiceURL","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}},"Service":{"id":"Service","path":"EcsStack/LibreChatFargateService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.226.0","metadata":[]},"children":{"Service":{"id":"Service","path":"EcsStack/LibreChatFargateService/Service/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"AIAssistantClusterBEDDE7C3"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"desiredCount":1,"enableEcsManagedTags":false,"healthCheckGracePeriodSeconds":60,"launchType":"FARGATE","loadBalancers":[{"targetGroupArn":{"Ref":"LibreChatFargateServiceLBPublicListenerECSPrivateGroup2E6CBA37"},"containerName":"librechat","containerPort":3080}],"networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":["subnet-0184fa96237d9873f","subnet-02e553a6971550663"],"securityGroups":[{"Fn::GetAtt":["LibreChatFargateServiceSecurityGroup42A8A300","GroupId"]}]}},"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"taskDefinition":{"Ref":"LibreChatTaskDefEE9CCC48"}}}},"SecurityGroup":{"id":"SecurityGroup","path":"EcsStack/LibreChatFargateService/Service/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/LibreChatFargateService/Service/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"EcsStack/LibreChatFargateService/Service/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"vpcId":"vpc-06ea0349e255c4c59"}}},"from EcsStackLibreChatFargateServiceLBSecurityGroup1FF69EB7:3080":{"id":"from EcsStackLibreChatFargateServiceLBSecurityGroup1FF69EB7:3080","path":"EcsStack/LibreChatFargateService/Service/SecurityGroup/from EcsStackLibreChatFargateServiceLBSecurityGroup1FF69EB7:3080","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Load balancer to target","fromPort":3080,"groupId":{"Fn::GetAtt":["LibreChatFargateServiceSecurityGroup42A8A300","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LibreChatFargateServiceLBSecurityGroup2D1C8350","GroupId"]},"toPort":3080}}}}}}}}},"MongoFs":{"id":"MongoFs","path":"EcsStack/MongoFs","constructInfo":{"fqn":"aws-cdk-lib.aws_efs.FileSystem","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/MongoFs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_efs.CfnFileSystem","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EFS::FileSystem","aws:cdk:cloudformation:props":{"encrypted":true,"fileSystemTags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Name","value":"EcsStack/MongoFs"},{"key":"Project","value":"AIAssistantService"}]}}},"EfsSecurityGroup":{"id":"EfsSecurityGroup","path":"EcsStack/MongoFs/EfsSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/MongoFs/EfsSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"EcsStack/MongoFs/EfsSecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Name","value":"EcsStack/MongoFs"},{"key":"Project","value":"AIAssistantService"}],"vpcId":"vpc-06ea0349e255c4c59"}}},"from EcsStackMongoSgE07DE001:2049":{"id":"from EcsStackMongoSgE07DE001:2049","path":"EcsStack/MongoFs/EfsSecurityGroup/from EcsStackMongoSgE07DE001:2049","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"from EcsStackMongoSgE07DE001:2049","fromPort":2049,"groupId":{"Fn::GetAtt":["MongoFsEfsSecurityGroup4A7F79CB","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["MongoSg6E7F6C0F","GroupId"]},"toPort":2049}}}}},"EfsMountTarget1":{"id":"EfsMountTarget1","path":"EcsStack/MongoFs/EfsMountTarget1","constructInfo":{"fqn":"aws-cdk-lib.aws_efs.CfnMountTarget","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EFS::MountTarget","aws:cdk:cloudformation:props":{"fileSystemId":{"Ref":"MongoFs8A4E3AFE"},"securityGroups":[{"Fn::GetAtt":["MongoFsEfsSecurityGroup4A7F79CB","GroupId"]}],"subnetId":"subnet-0184fa96237d9873f"}}},"EfsMountTarget2":{"id":"EfsMountTarget2","path":"EcsStack/MongoFs/EfsMountTarget2","constructInfo":{"fqn":"aws-cdk-lib.aws_efs.CfnMountTarget","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EFS::MountTarget","aws:cdk:cloudformation:props":{"fileSystemId":{"Ref":"MongoFs8A4E3AFE"},"securityGroups":[{"Fn::GetAtt":["MongoFsEfsSecurityGroup4A7F79CB","GroupId"]}],"subnetId":"subnet-02e553a6971550663"}}}}},"MongoTaskDef":{"id":"MongoTaskDef","path":"EcsStack/MongoTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.226.0","metadata":[]},"children":{"TaskRole":{"id":"TaskRole","path":"EcsStack/MongoTaskDef/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.226.0","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"EcsStack/MongoTaskDef/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.226.0","metadata":[]}},"Resource":{"id":"Resource","path":"EcsStack/MongoTaskDef/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}]}}}}},"Resource":{"id":"Resource","path":"EcsStack/MongoTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"command":["mongod","--noauth"],"essential":true,"image":"152320432929.dkr.ecr.us-east-1.amazonaws.com/newjersey/mongo:latest","mountPoints":[{"containerPath":"/data/db","readOnly":false,"sourceVolume":"mongoData"}],"name":"mongodb","portMappings":[{"containerPort":27017,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"MongoTaskDefmongodbLogGroupD3FC433A"},"awslogs-stream-prefix":"mongodb","awslogs-region":"us-east-1"}}}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["CommonTaskExecutionRole35A7E9C0","Arn"]},"family":"EcsStackMongoTaskDefF61B82B8","memory":"1024","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"taskRoleArn":{"Fn::GetAtt":["MongoTaskDefTaskRole1EB44A24","Arn"]},"volumes":[{"name":"mongoData","efsVolumeConfiguration":{"filesystemId":{"Ref":"MongoFs8A4E3AFE"},"transitEncryption":"ENABLED"}}]}}},"mongodb":{"id":"mongodb","path":"EcsStack/MongoTaskDef/mongodb","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.226.0"},"children":{"LogGroup":{"id":"LogGroup","path":"EcsStack/MongoTaskDef/mongodb/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/MongoTaskDef/mongodb/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}]}}}}}}}}},"MongoSg":{"id":"MongoSg","path":"EcsStack/MongoSg","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/MongoSg/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"EcsStack/MongoSg","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"vpcId":"vpc-06ea0349e255c4c59"}}},"from EcsStackLibreChatFargateServiceSecurityGroupDEF120B9:27017":{"id":"from EcsStackLibreChatFargateServiceSecurityGroupDEF120B9:27017","path":"EcsStack/MongoSg/from EcsStackLibreChatFargateServiceSecurityGroupDEF120B9:27017","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"App to MongoDB","fromPort":27017,"groupId":{"Fn::GetAtt":["MongoSg6E7F6C0F","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LibreChatFargateServiceSecurityGroup42A8A300","GroupId"]},"toPort":27017}}}}},"MongoService":{"id":"MongoService","path":"EcsStack/MongoService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.226.0","metadata":[]},"children":{"Service":{"id":"Service","path":"EcsStack/MongoService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"AIAssistantClusterBEDDE7C3"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"desiredCount":1,"enableEcsManagedTags":false,"launchType":"FARGATE","networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":["subnet-0184fa96237d9873f","subnet-02e553a6971550663"],"securityGroups":[{"Fn::GetAtt":["MongoSg6E7F6C0F","GroupId"]}]}},"serviceRegistries":[{"registryArn":{"Fn::GetAtt":["MongoServiceCloudmapService4A14DF4A","Arn"]}}],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"taskDefinition":{"Ref":"MongoTaskDefF67392AF"}}}},"CloudmapService":{"id":"CloudmapService","path":"EcsStack/MongoService/CloudmapService","constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.Service","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/MongoService/CloudmapService/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.CfnService","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ServiceDiscovery::Service","aws:cdk:cloudformation:props":{"dnsConfig":{"dnsRecords":[{"type":"A","ttl":60}],"namespaceId":{"Fn::GetAtt":["AIAssistantClusterDefaultServiceDiscoveryNamespaceF8A4154E","Id"]},"routingPolicy":"MULTIVALUE"},"healthCheckCustomConfig":{"failureThreshold":1},"name":"mongodb","namespaceId":{"Fn::GetAtt":["AIAssistantClusterDefaultServiceDiscoveryNamespaceF8A4154E","Id"]},"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}]}}}}}}},"PgFs":{"id":"PgFs","path":"EcsStack/PgFs","constructInfo":{"fqn":"aws-cdk-lib.aws_efs.FileSystem","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/PgFs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_efs.CfnFileSystem","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EFS::FileSystem","aws:cdk:cloudformation:props":{"encrypted":true,"fileSystemTags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Name","value":"EcsStack/PgFs"},{"key":"Project","value":"AIAssistantService"}]}}},"EfsSecurityGroup":{"id":"EfsSecurityGroup","path":"EcsStack/PgFs/EfsSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/PgFs/EfsSecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"EcsStack/PgFs/EfsSecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Name","value":"EcsStack/PgFs"},{"key":"Project","value":"AIAssistantService"}],"vpcId":"vpc-06ea0349e255c4c59"}}},"from EcsStackPgSgDC875A29:2049":{"id":"from EcsStackPgSgDC875A29:2049","path":"EcsStack/PgFs/EfsSecurityGroup/from EcsStackPgSgDC875A29:2049","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"from EcsStackPgSgDC875A29:2049","fromPort":2049,"groupId":{"Fn::GetAtt":["PgFsEfsSecurityGroup16B704DD","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["PgSg80293D65","GroupId"]},"toPort":2049}}}}},"EfsMountTarget1":{"id":"EfsMountTarget1","path":"EcsStack/PgFs/EfsMountTarget1","constructInfo":{"fqn":"aws-cdk-lib.aws_efs.CfnMountTarget","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EFS::MountTarget","aws:cdk:cloudformation:props":{"fileSystemId":{"Ref":"PgFs81E498A5"},"securityGroups":[{"Fn::GetAtt":["PgFsEfsSecurityGroup16B704DD","GroupId"]}],"subnetId":"subnet-0184fa96237d9873f"}}},"EfsMountTarget2":{"id":"EfsMountTarget2","path":"EcsStack/PgFs/EfsMountTarget2","constructInfo":{"fqn":"aws-cdk-lib.aws_efs.CfnMountTarget","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EFS::MountTarget","aws:cdk:cloudformation:props":{"fileSystemId":{"Ref":"PgFs81E498A5"},"securityGroups":[{"Fn::GetAtt":["PgFsEfsSecurityGroup16B704DD","GroupId"]}],"subnetId":"subnet-02e553a6971550663"}}}}},"VectorDbTaskDef":{"id":"VectorDbTaskDef","path":"EcsStack/VectorDbTaskDef","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateTaskDefinition","version":"2.226.0","metadata":[]},"children":{"TaskRole":{"id":"TaskRole","path":"EcsStack/VectorDbTaskDef/TaskRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.226.0","metadata":[]},"children":{"ImportTaskRole":{"id":"ImportTaskRole","path":"EcsStack/VectorDbTaskDef/TaskRole/ImportTaskRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.226.0","metadata":[]}},"Resource":{"id":"Resource","path":"EcsStack/VectorDbTaskDef/TaskRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"ecs-tasks.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}]}}}}},"Resource":{"id":"Resource","path":"EcsStack/VectorDbTaskDef/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnTaskDefinition","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::TaskDefinition","aws:cdk:cloudformation:props":{"containerDefinitions":[{"essential":true,"image":"152320432929.dkr.ecr.us-east-1.amazonaws.com/newjersey/pgvector:0.8.0-pg15-trixie","mountPoints":[{"containerPath":"/var/lib/postgresql/data","readOnly":false,"sourceVolume":"pgData"}],"name":"vectordb","portMappings":[{"containerPort":5432,"protocol":"tcp"}],"logConfiguration":{"logDriver":"awslogs","options":{"awslogs-group":{"Ref":"VectorDbTaskDefvectordbLogGroup62D4A81C"},"awslogs-stream-prefix":"vectordb","awslogs-region":"us-east-1"}},"environment":[{"name":"POSTGRES_DB","value":"mydatabase"},{"name":"POSTGRES_USER","value":"myuser"},{"name":"POSTGRES_PASSWORD","value":"mypassword"}]}],"cpu":"256","executionRoleArn":{"Fn::GetAtt":["CommonTaskExecutionRole35A7E9C0","Arn"]},"family":"EcsStackVectorDbTaskDef02A9C275","memory":"1024","networkMode":"awsvpc","requiresCompatibilities":["FARGATE"],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"taskRoleArn":{"Fn::GetAtt":["VectorDbTaskDefTaskRoleDCE52280","Arn"]},"volumes":[{"name":"pgData","efsVolumeConfiguration":{"filesystemId":{"Ref":"PgFs81E498A5"},"transitEncryption":"ENABLED"}}]}}},"vectordb":{"id":"vectordb","path":"EcsStack/VectorDbTaskDef/vectordb","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.ContainerDefinition","version":"2.226.0"},"children":{"LogGroup":{"id":"LogGroup","path":"EcsStack/VectorDbTaskDef/vectordb/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/VectorDbTaskDef/vectordb/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}]}}}}}}}}},"PgSg":{"id":"PgSg","path":"EcsStack/PgSg","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/PgSg/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"EcsStack/PgSg","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"vpcId":"vpc-06ea0349e255c4c59"}}},"from EcsStackLibreChatFargateServiceSecurityGroupDEF120B9:5432":{"id":"from EcsStackLibreChatFargateServiceSecurityGroupDEF120B9:5432","path":"EcsStack/PgSg/from EcsStackLibreChatFargateServiceSecurityGroupDEF120B9:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"App to Postgres","fromPort":5432,"groupId":{"Fn::GetAtt":["PgSg80293D65","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LibreChatFargateServiceSecurityGroup42A8A300","GroupId"]},"toPort":5432}}}}},"VectorDbService":{"id":"VectorDbService","path":"EcsStack/VectorDbService","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.FargateService","version":"2.226.0","metadata":[]},"children":{"Service":{"id":"Service","path":"EcsStack/VectorDbService/Service","constructInfo":{"fqn":"aws-cdk-lib.aws_ecs.CfnService","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ECS::Service","aws:cdk:cloudformation:props":{"cluster":{"Ref":"AIAssistantClusterBEDDE7C3"},"deploymentConfiguration":{"maximumPercent":200,"minimumHealthyPercent":50,"alarms":{"alarmNames":[],"enable":false,"rollback":false}},"desiredCount":1,"enableEcsManagedTags":false,"launchType":"FARGATE","networkConfiguration":{"awsvpcConfiguration":{"assignPublicIp":"DISABLED","subnets":["subnet-0184fa96237d9873f","subnet-02e553a6971550663"],"securityGroups":[{"Fn::GetAtt":["PgSg80293D65","GroupId"]}]}},"serviceRegistries":[{"registryArn":{"Fn::GetAtt":["VectorDbServiceCloudmapService218F4291","Arn"]}}],"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}],"taskDefinition":{"Ref":"VectorDbTaskDefF2254F08"}}}},"CloudmapService":{"id":"CloudmapService","path":"EcsStack/VectorDbService/CloudmapService","constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.Service","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"EcsStack/VectorDbService/CloudmapService/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_servicediscovery.CfnService","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ServiceDiscovery::Service","aws:cdk:cloudformation:props":{"dnsConfig":{"dnsRecords":[{"type":"A","ttl":60}],"namespaceId":{"Fn::GetAtt":["AIAssistantClusterDefaultServiceDiscoveryNamespaceF8A4154E","Id"]},"routingPolicy":"MULTIVALUE"},"healthCheckCustomConfig":{"failureThreshold":1},"name":"vectordb","namespaceId":{"Fn::GetAtt":["AIAssistantClusterDefaultServiceDiscoveryNamespaceF8A4154E","Id"]},"tags":[{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"AIAssistantService"}]}}}}}}},"LibrechatImageUri":{"id":"LibrechatImageUri","path":"EcsStack/LibrechatImageUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}},"RagApiImageUri":{"id":"RagApiImageUri","path":"EcsStack/RagApiImageUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}},"MeiliImageUri":{"id":"MeiliImageUri","path":"EcsStack/MeiliImageUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}},"MongoImageUri":{"id":"MongoImageUri","path":"EcsStack/MongoImageUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}},"PostgresImageUri":{"id":"PostgresImageUri","path":"EcsStack/PostgresImageUri","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"EcsStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"EcsStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.226.0"}}}},"Exports":{"id":"Exports","path":"EcsStack/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Ref\":\"LibreChatFargateServiceLBPublicListener62003EAC\"}":{"id":"Output{\"Ref\":\"LibreChatFargateServiceLBPublicListener62003EAC\"}","path":"EcsStack/Exports/Output{\"Ref\":\"LibreChatFargateServiceLBPublicListener62003EAC\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"EcsStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.226.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"EcsStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.226.0"}}}},"ApiGatewayStack":{"id":"ApiGatewayStack","path":"ApiGatewayStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.226.0"},"children":{"ExistingVpcForApi":{"id":"ExistingVpcForApi","path":"ApiGatewayStack/ExistingVpcForApi","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.226.0","metadata":[]},"children":{"PrivateSubnet1":{"id":"PrivateSubnet1","path":"ApiGatewayStack/ExistingVpcForApi/PrivateSubnet1","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.226.0","metadata":[]}},"PrivateSubnet2":{"id":"PrivateSubnet2","path":"ApiGatewayStack/ExistingVpcForApi/PrivateSubnet2","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.226.0","metadata":[]}}}},"ServiceVpcLink":{"id":"ServiceVpcLink","path":"ApiGatewayStack/ServiceVpcLink","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.VpcLink","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayStack/ServiceVpcLink/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnVpcLink","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::VpcLink","aws:cdk:cloudformation:props":{"name":"service-vpc-link","securityGroupIds":[],"subnetIds":["subnet-0184fa96237d9873f","subnet-02e553a6971550663"],"tags":{"Component":"ApiGateway","Environment":"development","ManagedBy":"CDK","Project":"AIAssistantService"}}}}}},"ServiceCertificate":{"id":"ServiceCertificate","path":"ApiGatewayStack/ServiceCertificate","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.Certificate","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayStack/ServiceCertificate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.CfnCertificate","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CertificateManager::Certificate","aws:cdk:cloudformation:props":{"domainName":"dev.ai-assistant.nj.gov","tags":[{"key":"Component","value":"ApiGateway"},{"key":"Environment","value":"development"},{"key":"ManagedBy","value":"CDK"},{"key":"Name","value":"ApiGatewayStack/ServiceCertificate"},{"key":"Project","value":"AIAssistantService"}],"validationMethod":"DNS"}}}}},"ServiceDomain":{"id":"ServiceDomain","path":"ApiGatewayStack/ServiceDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.DomainName","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayStack/ServiceDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnDomainName","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::DomainName","aws:cdk:cloudformation:props":{"domainName":"dev.ai-assistant.nj.gov","domainNameConfigurations":[{"certificateArn":{"Ref":"ServiceCertificate36118B18"},"endpointType":"REGIONAL"}],"tags":{"Component":"ApiGateway","Environment":"development","ManagedBy":"CDK","Project":"AIAssistantService"}}}}}},"ServiceHttpApi":{"id":"ServiceHttpApi","path":"ApiGatewayStack/ServiceHttpApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayStack/ServiceHttpApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["*"],"allowMethods":["*"],"allowOrigins":["*"]},"description":"HTTP API for internal ALB via VPC Link","disableExecuteApiEndpoint":true,"name":"ServiceHttpApi","protocolType":"HTTP","tags":{"Component":"ApiGateway","Environment":"development","ManagedBy":"CDK","Project":"AIAssistantService"}}}},"DefaultStage":{"id":"DefaultStage","path":"ApiGatewayStack/ServiceHttpApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayStack/ServiceHttpApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ServiceHttpApiA914263C"},"autoDeploy":true,"stageName":"$default","tags":{"Component":"ApiGateway","Environment":"development","ManagedBy":"CDK","Project":"AIAssistantService"}}}}}},"ANY--":{"id":"ANY--","path":"ApiGatewayStack/ServiceHttpApi/ANY--","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.226.0","metadata":[]},"children":{"AlbIntegration":{"id":"AlbIntegration","path":"ApiGatewayStack/ServiceHttpApi/ANY--/AlbIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayStack/ServiceHttpApi/ANY--/AlbIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ServiceHttpApiA914263C"},"connectionId":{"Ref":"ServiceVpcLink9E1A08C8"},"connectionType":"VPC_LINK","integrationMethod":"ANY","integrationType":"HTTP_PROXY","integrationUri":{"Fn::ImportValue":"EcsStack:ExportsOutputRefLibreChatFargateServiceLBPublicListener62003EAC303ACE62"},"payloadFormatVersion":"1.0"}}}}},"Resource":{"id":"Resource","path":"ApiGatewayStack/ServiceHttpApi/ANY--/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ServiceHttpApiA914263C"},"authorizationType":"NONE","routeKey":"ANY /","target":{"Fn::Join":["",["integrations/",{"Ref":"ServiceHttpApiANYAlbIntegrationFCC584DC"}]]}}}}}},"ANY--{proxy+}":{"id":"ANY--{proxy+}","path":"ApiGatewayStack/ServiceHttpApi/ANY--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayStack/ServiceHttpApi/ANY--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ServiceHttpApiA914263C"},"authorizationType":"NONE","routeKey":"ANY /{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"ServiceHttpApiANYAlbIntegrationFCC584DC"}]]}}}}}}}},"ServiceApiMapping":{"id":"ServiceApiMapping","path":"ApiGatewayStack/ServiceApiMapping","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.ApiMapping","version":"2.226.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiGatewayStack/ServiceApiMapping/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApiMapping","version":"2.226.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::ApiMapping","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ServiceHttpApiA914263C"},"domainName":{"Ref":"ServiceDomain1F896CC4"},"stage":"$default"}}}}},"ApiGatewayUrl":{"id":"ApiGatewayUrl","path":"ApiGatewayStack/ApiGatewayUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}},"CustomDomainName":{"id":"CustomDomainName","path":"ApiGatewayStack/CustomDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}},"DomainNameTarget":{"id":"DomainNameTarget","path":"ApiGatewayStack/DomainNameTarget","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}},"DomainNameHostedZoneId":{"id":"DomainNameHostedZoneId","path":"ApiGatewayStack/DomainNameHostedZoneId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}},"CertificateArn":{"id":"CertificateArn","path":"ApiGatewayStack/CertificateArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.226.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"ApiGatewayStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"ApiGatewayStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.226.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApiGatewayStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.226.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApiGatewayStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.226.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}