# E2B Agent å¼€å‘å·¥ä½œæ—¥å¿—

> è®°å½• E2B Data Analyst Agent çš„æ¯æ—¥å¼€å‘è¿›å±•ã€é—®é¢˜è§£å†³å’Œå…³é”®å†³ç­–ã€‚


## 2026-01-27 (å‘¨äºŒ)

### ğŸ” æ•°æ®åº“è¿æ¥å®‰å…¨åŠ å›ºä¸ CRUD å®Œå–„
**Git Commit**: feat(e2b): Implement secure database connections with encryption, redaction, and full CRUD UI

### ä¸»è¦å·¥ä½œ
1. **æ•°æ®åº“è¿æ¥åŠŸèƒ½å…¨é—­ç¯** â­â­â­
   - **UI å®Œå–„**: å®ç°äº† Data Sources çš„å®Œæ•´ CRUDï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰ã€‚
   - **äº¤äº’ä¼˜åŒ–**: æ–°å¢ç¼–è¾‘æ¨¡å¼ï¼ˆPencilIconï¼‰ï¼Œæ”¯æŒä¿ç•™åŸå¯†ç ä¿®æ”¹å…¶ä»–å­—æ®µã€‚
   - **å›¾æ ‡ä¿®å¤**: ç»Ÿä¸€ä½¿ç”¨ Lucide çš„ `Trash2` å’Œ `Pencil` ç¡®ä¿å…¼å®¹æ€§ã€‚

2. **ä¼ä¸šçº§å®‰å…¨ä½“ç³»æ„å»º** ğŸ›¡ï¸
   - **é™æ€åŠ å¯† (Encryption at Rest)**: 
     - åœ¨ Controller å±‚ä½¿ç”¨ AES-CBC (`encryptV2`) åŠ å¯†æ•°æ®åº“å¯†ç å­˜å…¥ MongoDBã€‚
     - è¯»å–æ—¶è§£å¯†å›ä¼ ç»™å‰ç«¯ï¼ˆå…¼é¡¾ä½“éªŒä¸å®‰å…¨ï¼‰ã€‚
   - **åŠ¨æ€è§£å¯† (Runtime Injection)**:
     - ä»…åœ¨æ²™ç®±åˆå§‹åŒ–æˆ–ä»£ç æ‰§è¡Œç¬é—´è§£å¯† (`decryptV2`) å¹¶æ³¨å…¥ç¯å¢ƒå˜é‡ã€‚
     - å¯†ç åœ¨å†…å­˜ä¸­çŸ­æš‚å­˜åœ¨ï¼Œæ•°æ®åº“ä¸­å§‹ç»ˆåŠ å¯†ã€‚
   - **è¾“å‡ºè„±æ• (Output Redaction)**:
     - æ‹¦æˆª Agent æ‰§è¡Œç»“æœçš„ stdout/stderrã€‚
     - è‡ªåŠ¨æ£€æµ‹ç¯å¢ƒå˜é‡ä¸­çš„æ•æ„Ÿå€¼ï¼ˆKey/Secret/Passwordï¼‰å¹¶æ›¿æ¢ä¸º `[REDACTED]`ã€‚
     - é˜²æ­¢ç”¨æˆ·è¯±å¯¼ Agent æ‰“å°ç¯å¢ƒå˜é‡å¯¼è‡´æ³„éœ²ã€‚

3. **é²æ£’æ€§å¢å¼º**
   - **ç‰¹æ®Šå­—ç¬¦å¤„ç†**: æ›´æ–° System Promptï¼Œå¼ºåˆ¶è¦æ±‚ Python ä»£ç ä¸­ä½¿ç”¨ `urllib.parse.quote_plus` å¤„ç†æ•°æ®åº“å¯†ç ï¼Œè§£å†³ `@` ç­‰ç‰¹æ®Šå­—ç¬¦å¯¼è‡´çš„è¿æ¥å¤±è´¥ã€‚
   - **å›æ˜¾ä¿®å¤**: ä¿®å¤ `AssistantSelect` ç™½åå•é€»è¾‘ï¼Œè§£å†³æ•°ç»„ç±»å‹é…ç½® (`data_sources`) åˆ·æ–°ä¸¢å¤±çš„é—®é¢˜ã€‚

### éªŒè¯ç»“æœ
- âœ… æ•°æ®åº“å¯†ç åŠ å¯†å­˜å‚¨ï¼Œæ— æ˜æ–‡è½åœ°ã€‚
- âœ… Agent æ— æ³•é€šè¿‡ print æ³„éœ²å¯†ç ã€‚
- âœ… åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å¤æ‚å¯†ç èƒ½æˆåŠŸè¿æ¥ PostgreSQL/MySQLã€‚
- âœ… å‰ç«¯å¯ä»¥æ­£å¸¸æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤æ•°æ®åº“è¿æ¥é…ç½®ã€‚

---

## 2026-01-26 (å‘¨ä¸€)

### ğŸŒŠ æµå¼å“åº”ä½“éªŒä¸ç¨³å®šæ€§ä¼˜åŒ–
**Git Commit**: feat(e2b): Enhance streaming UX, fix race conditions and session stability

### ä¸»è¦å·¥ä½œ
1. **Pending Tool Call æœºåˆ¶** (index.js) â­
   - **é—®é¢˜**: å·¥å…·æ‰§è¡ŒæœŸé—´å‰ç«¯æ— åé¦ˆï¼ˆçœŸç©ºæœŸï¼‰ï¼Œç”¨æˆ·ä½“éªŒå¡é¡¿
   - **å®ç°**: 
     - åœ¨ `execute_code` æ‰§è¡Œå‰ç«‹å³å‘é€ Pending çŠ¶æ€äº‹ä»¶ (`progress: 0.1`)
     - ç¡®ä¿ `startNewTextPart` åœ¨æ­£ç¡®æ—¶æœºè°ƒç”¨ï¼Œåˆ‡æ–­å‰ä¸€ä¸ªæ–‡æœ¬å—
   - **æ•ˆæœ**: å‰ç«¯ç«‹å³æ˜¾ç¤º Loading çŠ¶æ€ï¼ŒUI å“åº”æå¿«

2. **å¼ºåˆ¶å•æ­¥æ‰§è¡Œç­–ç•¥** (index.js)
   - **é—®é¢˜**: LLM æœ‰æ—¶ä¼š"æ‰¹å¤„ç†"å¤šä¸ªå·¥å…·è°ƒç”¨ï¼Œå¯¼è‡´å‰ç«¯æ¸²æŸ“å‡ºé”™ï¼ˆå¤šä¸ªä»£ç å—ç²˜è¿ï¼Œè§£é‡Šæ–‡æœ¬é”™ä½ï¼‰
   - **å®ç°**: 
     - åœ¨ `index.js` ä¸­å¼ºåˆ¶æ¯æ¬¡è¿­ä»£åªæ‰§è¡Œ**ç¬¬ä¸€ä¸ª**å·¥å…·è°ƒç”¨
     - å¿½ç•¥åç»­è°ƒç”¨ï¼Œè¿«ä½¿ LLM åœ¨ä¸‹ä¸€è½®è¿­ä»£ä¸­å¤„ç†ç»“æœ
   - **æ•ˆæœ**: æ¢å¤äº† "Code -> Result -> Interpretation" çš„æ¸…æ™°çº¿æ€§æµ

3. **è‡ªåŠ¨ç»§ç»­é€»è¾‘** (index.js)
   - **é—®é¢˜**: LLM åœ¨è§£é‡Šå®ŒæŸä¸€æ­¥åï¼Œæœ‰æ—¶ä¼šç›´æ¥åœæ­¢ (`finish_reason: stop`)ï¼Œä¸å†ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ­¥
   - **å®ç°**: 
     - æ£€æµ‹åˆ°å¼‚å¸¸åœæ­¢ï¼ˆä»»åŠ¡æœªå®Œæˆä¸”æ—  `complete_task`ï¼‰æ—¶
     - è‡ªåŠ¨æ³¨å…¥ç”¨æˆ·æç¤º `"Please continue with the next step..."`
     - å¼ºåˆ¶å¾ªç¯ç»§ç»­
   - **æ•ˆæœ**: å¤æ‚çš„å¤šæ­¥ä»»åŠ¡èƒ½è‡ªåŠ¨æ¨è¿›åˆ°åº•ï¼Œä¸å†åŠé€”è€ŒåºŸ

4. **Prompt å¢å¼ºä¸è¯­è¨€ä¸€è‡´æ€§** (prompts.js)
   - **æ ¼å¼ä¼˜åŒ–**: å¼ºåˆ¶è¦æ±‚ Markdown æ ¼å¼ï¼ˆæ ‡é¢˜ã€ç²—ä½“ã€è¡¨æ ¼ï¼‰
   - **è¯­è¨€çº¦æŸ**: å¢åŠ è§„åˆ™ `Language Consistency`ï¼Œå¼ºåˆ¶ Summary ä½¿ç”¨ç”¨æˆ·è¯­è¨€ï¼ˆä¸­æ–‡ï¼‰ï¼Œè§£å†³æœ€åæ€»ç»“çªå˜è‹±æ–‡çš„é—®é¢˜
   - **é€»è¾‘å¼ºåŒ–**: å¼ºè°ƒ "Plan First" å’Œ "Error Recovery Discipline"

5. **å·¥å…·è¾“å‡ºå»é‡** (tools.js)
   - **é—®é¢˜**: Summary ä¸­å›¾ç‰‡é‡å¤æ˜¾ç¤ºï¼ˆæ–‡ä¸­å¼•ç”¨ä¸€æ¬¡ï¼Œæœ«å°¾åˆè‡ªåŠ¨é™„åŠ ä¸€æ¬¡ï¼‰
   - **å®ç°**: ç§»é™¤ `complete_task` ä¸­è‡ªåŠ¨é™„åŠ å›¾ç‰‡çš„é€»è¾‘
   - **æ•ˆæœ**: ä¾èµ– LLM çš„ Markdown å¼•ç”¨ï¼Œæ˜¾ç¤ºæ›´åŠ æ•´æ´

6. **ä¼šè¯ç¨³å®šæ€§ä¿®å¤** (.env)
   - **é—®é¢˜**: ç”¨æˆ·ç™»å½•åå¾ˆå¿«ï¼ˆ1ç§’ï¼‰è¢«è¸¢å‡º
   - **åŸå› **: `.env` ä¸­çš„è¡¨è¾¾å¼ `1000 * 60 * 15` è¢«é”™è¯¯è§£æä¸º `1000` (1ç§’)
   - **ä¿®å¤**: ä¿®æ”¹ä¸ºçº¯æ•°å€¼ `SESSION_EXPIRY=3600000` (1å°æ—¶) å’Œ `REFRESH_TOKEN_EXPIRY=2592000000` (30å¤©)

### éªŒè¯ç»“æœ
- âœ… **æµå¼ä½“éªŒ**: ä¸èˆ¬é¡ºæ»‘ï¼ŒçŠ¶æ€åˆ‡æ¢æ¸…æ™°
- âœ… **å†…å®¹é¡ºåº**: è®¡åˆ’ -> ä»£ç  -> è§£é‡Šï¼Œå±‚æ¬¡åˆ†æ˜
- âœ… **ä»»åŠ¡å®Œæˆåº¦**: è‡ªåŠ¨çº é”™ï¼Œè‡ªåŠ¨ç»§ç»­ï¼Œç›´è‡³å®Œæˆ
- âœ… **è§†è§‰æ•ˆæœ**: æ ¼å¼ç¾è§‚ï¼Œå›¾ç‰‡ä¸é‡å¤
- âœ… **ç¨³å®šæ€§**: ä¼šè¯æŒä¹…ï¼Œä¸å†æ‰çº¿

---

## 2026-01-22 (å‘¨ä¸‰) - å‡Œæ™¨

### ğŸ”§ ä¿®å¤æ— å·¥å…·è°ƒç”¨æ—¶çš„æ— é™å¾ªç¯é—®é¢˜
**Git Commit**: fix(e2b): Fix infinite loop when LLM returns text-only response

### é—®é¢˜æè¿°
å½“ç”¨æˆ·æå‡ºä¸éœ€è¦ä»£ç æ‰§è¡Œçš„ç®€å•é—®é¢˜æ—¶ï¼ˆå¦‚"è§£é‡Šä¸€ä¸‹ RÂ² æ˜¯ä»€ä¹ˆ"ï¼‰ï¼ŒLLM è¿”å›çº¯æ–‡æœ¬å“åº”ï¼ˆä¸è°ƒç”¨å·¥å…·ï¼‰ï¼Œå¯¼è‡´ï¼š
1. Agent å¾ªç¯æ‰§è¡Œ 20 æ¬¡è¿­ä»£ï¼ˆè¾¾åˆ° `maxIterations` ä¸Šé™ï¼‰
2. æ¯æ¬¡è¿­ä»£ LLM éƒ½è¾“å‡ºç›¸ä¼¼çš„å†…å®¹
3. å‰ç«¯æ˜¾ç¤ºå¤§é‡é‡å¤æ–‡æœ¬ï¼ˆ50000+ å­—ç¬¦ï¼‰
4. æ— æ³•æ­£å¸¸åœæ­¢

### æ ¹æœ¬åŸå› 
ä»£ç ç¼ºå°‘ **`finish_reason` æ£€æŸ¥æœºåˆ¶**ï¼š
- OpenAI API è¿”å›çš„æµå¼å“åº”åŒ…å« `finish_reason` å­—æ®µï¼š
  - `'stop'`: LLM è®¤ä¸ºå¯¹è¯å·²å®Œæˆï¼ˆæ­£å¸¸ç»“æŸï¼‰
  - `'tool_calls'`: LLM éœ€è¦è°ƒç”¨å·¥å…·
  - `'length'`: è¾¾åˆ° token é™åˆ¶
- åŸä»£ç åªæ£€æŸ¥ `complete_task` å·¥å…·è°ƒç”¨ï¼Œå¿½ç•¥äº† `finish_reason`
- å½“ LLM è¿”å›çº¯æ–‡æœ¬æ—¶ï¼Œ`finish_reason === 'stop'`ï¼Œä½†ä»£ç ä»ç„¶ `continue` åˆ°ä¸‹ä¸€æ¬¡è¿­ä»£

### è§£å†³æ–¹æ¡ˆ
**ä¿®æ”¹æ–‡ä»¶**: `api/server/services/Agents/e2bAgent/index.js`

1. **æ•è· finish_reason** ğŸ¯
   ```javascript
   let finishReason = null;
   for await (const chunk of response) {
     const choice = chunk.choices[0];
     if (choice?.finish_reason) {
       finishReason = choice.finish_reason;
     }
   }
   message.finish_reason = finishReason;
   ```

2. **æ™ºèƒ½åœæ­¢é€»è¾‘** ğŸ§ 
   ```javascript
   if (!message.tool_calls || message.tool_calls.length === 0) {
     if (message.finish_reason === 'stop') {
       logger.info(`[E2BAgent] finish_reason is 'stop' - LLM completed. Exiting loop.`);
       shouldExitMainLoop = true;
       break; // ç«‹å³åœæ­¢
     } else {
       // å…¶ä»– finish_reasonï¼ˆå¦‚ 'length'ï¼‰ç»§ç»­è¿­ä»£
       logger.info(`[E2BAgent] finish_reason: ${message.finish_reason}. Continuing...`);
       continue;
     }
   }
   ```

3. **ä¸¤ç§åœæ­¢æœºåˆ¶** âš¡
   - **ä¸»åŠ¨åœæ­¢**: LLM è°ƒç”¨ `complete_task` å·¥å…·ï¼ˆæ•°æ®åˆ†æä»»åŠ¡å®Œæˆï¼‰
   - **è‡ªç„¶åœæ­¢**: `finish_reason === 'stop'`ï¼ˆç®€å•é—®ç­”å®Œæˆï¼‰

### System Prompt ä¼˜åŒ–
**ä¿®æ”¹æ–‡ä»¶**: `api/server/services/Agents/e2bAgent/prompts.js`

ç”¨æˆ·æ ¹æ®å®é™…ä½¿ç”¨åé¦ˆä¼˜åŒ–äº† System Promptï¼Œä¸»è¦æ”¹è¿›ï¼š
- æ›´æ¸…æ™°çš„å·¥ä½œæµç¨‹æŒ‡å¯¼
- æ›´æ˜ç¡®çš„è¾“å‡ºè¦æ±‚ï¼ˆæ¯æ¬¡ä»£ç æ‰§è¡Œåç«‹å³è¾“å‡ºåˆ†æï¼‰
- æ›´å®Œå–„çš„é”™è¯¯å¤„ç†è¯´æ˜

**é¢„æœŸæ•ˆæœ**:
- LLM åœ¨æ¯æ¬¡å·¥å…·è°ƒç”¨åè¾“å‡ºåˆ†ææ–‡æœ¬ï¼ˆä¸å†åªæœ‰è¿ç»­ä»£ç è¾“å‡ºï¼‰
- æ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œè®©åˆ†æè¿‡ç¨‹æ›´é€æ˜

### æŠ€æœ¯ç»†èŠ‚
- **finish_reason ä½ç½®**: åœ¨æµå¼å“åº”çš„æœ€åä¸€ä¸ª chunk ä¸­
- **åœæ­¢æ—¶æœº**: æ£€æµ‹åˆ° `stop` åç«‹å³ `break`ï¼Œé¿å…å¤šä½™çš„ LLM è°ƒç”¨
- **æ—¥å¿—å¢å¼º**: æ·»åŠ  `finish_reason` åˆ°æ—¥å¿—è¾“å‡ºï¼Œæ–¹ä¾¿è°ƒè¯•

### éªŒè¯ç»“æœ
- âœ… ç®€å•é—®ç­”ï¼ˆå¦‚"ä»€ä¹ˆæ˜¯ RÂ²"ï¼‰ï¼šLLM å›ç­”åç«‹å³åœæ­¢ï¼ˆ1 æ¬¡è¿­ä»£ï¼‰
- âœ… æ•°æ®åˆ†æä»»åŠ¡ï¼ˆå¦‚"åˆ†æ titanic"ï¼‰ï¼šæ­£å¸¸æ‰§è¡Œå·¥å…·ï¼Œæœ€åè°ƒç”¨ `complete_task`
- âœ… æ— é‡å¤æ–‡æœ¬è¾“å‡º
- âœ… æ— æ€§èƒ½é—®é¢˜ï¼ˆé¿å…äº† 19 æ¬¡æ— æ•ˆçš„ LLM è°ƒç”¨ï¼‰

### å½±å“èŒƒå›´
- **å—ç›Šåœºæ™¯**: æ‰€æœ‰çº¯æ–‡æœ¬é—®ç­”ï¼ˆçº¦å  20-30% çš„ç”¨æˆ·æŸ¥è¯¢ï¼‰
- **å…¼å®¹æ€§**: å®Œå…¨å‘åå…¼å®¹ï¼Œä¸å½±å“ç°æœ‰å·¥å…·è°ƒç”¨æµç¨‹
- **æ€§èƒ½æå‡**: å‡å°‘æ— æ•ˆ LLM è°ƒç”¨ï¼ŒèŠ‚çœ API æˆæœ¬

---

## 2026-01-21 (å‘¨äºŒ) - æ™šä¸Š

### â±ï¸ E2B æ‰§è¡Œæ—¶é—´æ˜¾ç¤ºåŠŸèƒ½
**Git Commit**: feat(e2b): Add execution timer display for E2B code execution

### ä¸»è¦å·¥ä½œ
1. **åç«¯è®¡æ—¶å™¨å®ç°** ğŸ•’
   - **æ–‡ä»¶**: `api/server/services/Agents/e2bAgent/index.js`
   - **å®ç°**:
     - åœ¨å·¥å…·æ‰§è¡Œå‰æ•è· `startTime = Date.now()`
     - åœ¨å·¥å…·æ‰§è¡Œåè®¡ç®— `elapsedTime = Date.now() - startTime`
     - å°† `startTime` å’Œ `elapsedTime` æ·»åŠ åˆ° `toolCallPart` ä¸­
     - é€šè¿‡ SSE äº‹ä»¶å‘é€ç»™å‰ç«¯
   - **è°ƒè¯•æ—¥å¿—**: æ·»åŠ  `[E2BAgent] ğŸ•’ Timer data sent` éªŒè¯æ•°æ®å‘é€

2. **TypeScript ç±»å‹å®šä¹‰** ğŸ“
   - **æ–‡ä»¶**: 
     - `packages/data-provider/src/types/agents.ts`
     - `packages/data-provider/src/types/assistants.ts`
   - **ä¿®æ”¹**: åœ¨ `ToolCall` å’Œ `PartMetadata` æ¥å£ä¸­æ·»åŠ å¯é€‰å­—æ®µï¼š
     ```typescript
     startTime?: number;
     elapsedTime?: number;
     ```
   - **åŸå› **: ç¡®ä¿ç±»å‹å®‰å…¨ï¼ŒåŒæ—¶ä¿æŒå¯¹å…¶ä»–æ¨¡å—çš„å…¼å®¹æ€§ï¼ˆAzure Assistants ä¸å—å½±å“ï¼‰

3. **å‰ç«¯è®¡æ—¶å™¨ç»„ä»¶** â°
   - **æ–‡ä»¶**: `client/src/components/Chat/Messages/Content/Parts/ExecuteCode.tsx`
   - **å®ç°**:
     - æ·»åŠ  `startTime` å’Œ `elapsedTime` ä½œä¸ºç»„ä»¶ props
     - ä½¿ç”¨ `useState` ç®¡ç†å½“å‰æ—¶é—´æ˜¾ç¤º
     - ä½¿ç”¨ `useEffect` å®ç°ï¼š
       - æ‰§è¡Œä¸­ï¼šæ¯ 100ms æ›´æ–°ä¸€æ¬¡è®¡æ—¶å™¨ï¼ˆå®æ—¶æ˜¾ç¤ºï¼‰
       - å·²å®Œæˆï¼šæ˜¾ç¤ºå›ºå®šçš„ `elapsedTime`
     - æ·»åŠ  `formatTime` å‡½æ•°ï¼šæ ¼å¼åŒ–ä¸º "XXms" æˆ– "X.Xs"
   - **UI ä½ç½®**:
     - åˆå§‹æ–¹æ¡ˆï¼šä¸ ProgressText åŒè¡Œï¼ˆå¯¼è‡´é‡å ï¼‰
     - æœ€ç»ˆæ–¹æ¡ˆï¼šç‹¬ç«‹è¡Œæ˜¾ç¤ºåœ¨ä»£ç å—å’Œè¾“å‡ºä¸‹æ–¹
     - æ ·å¼ï¼š`mt-0.5 mb-3` - ä¸Šè¾¹è·å°ï¼ˆé è¿‘è¾“å‡ºï¼‰ï¼Œä¸‹è¾¹è·å¤§ï¼ˆè¿œç¦»ä¸‹æ–¹æ–‡å­—ï¼‰

4. **æ•°æ®æµè°ƒè¯•** ğŸ›
   - **é—®é¢˜**: å‰ç«¯æ— è¾“å‡ºï¼Œè®¡æ—¶å™¨ä¸æ˜¾ç¤º
   - **è¯Šæ–­æµç¨‹**:
     - åç«¯æ—¥å¿—ç¡®è®¤æ•°æ®å‘é€æˆåŠŸ
     - å‰ç«¯æ§åˆ¶å°å‘ç° LLM ç›´æ¥è°ƒç”¨ `complete_task`ï¼Œè·³è¿‡ `execute_code`
     - å‘ç°æµ‹è¯•æŸ¥è¯¢å¤ªç®€å•ï¼ˆ"1+1", "2+2"ï¼‰ï¼ŒLLM ä¸æ‰§è¡Œä»£ç 
   - **è§£å†³**: ä½¿ç”¨å¤æ‚æŸ¥è¯¢æµ‹è¯•ï¼ˆ"åˆ†æ titanic æ•°æ®"ï¼‰
   - **éªŒè¯**: æ§åˆ¶å°æ˜¾ç¤ºï¼š
     ```
     [Part.tsx] toolCall object: {startTime: 1768981522584, elapsedTime: 619, ...}
     [ExecuteCode] Timer data: {startTime: 1768981522584, elapsedTime: 619, currentTime: 619}
     ```

5. **Docker æ„å»ºä¸éƒ¨ç½²** ğŸ³
   - **é—®é¢˜**: ä¿®æ”¹ `.tsx` æ–‡ä»¶åå‰ç«¯æ— å˜åŒ–
   - **åŸå› **: Docker ä½¿ç”¨ç”Ÿäº§æ„å»ºæ¨¡å¼ï¼Œéœ€é‡æ–°æ„å»ºé•œåƒ
   - **è§£å†³**:
     - æŒ‚è½½ `client/src` å’Œ `packages` ç›®å½•åˆ°å®¹å™¨ï¼ˆå®æ—¶æ›´æ–°ï¼‰
     - é‡æ–°æ„å»º Docker é•œåƒï¼ˆ`docker compose build api`ï¼‰
     - æ¸…ç† Docker ç¼“å­˜ï¼ˆé‡Šæ”¾ 7GB ç©ºé—´ï¼‰

### æŠ€æœ¯ç»†èŠ‚
- **è®¡æ—¶ç²¾åº¦**: æ¯«ç§’çº§ï¼ˆDate.now()ï¼‰
- **æ€§èƒ½å½±å“**: å¯å¿½ç•¥ï¼ˆä»…æ·»åŠ ä¸¤ä¸ªæ—¶é—´æˆ³å­—æ®µï¼‰
- **å…¼å®¹æ€§**: å®Œå…¨å‘åå…¼å®¹ï¼ˆå­—æ®µä¸ºå¯é€‰ï¼Œä¸å½±å“å…¶ä»–æ¨¡å—ï¼‰
- **éš”ç¦»æ€§**: ä»…åœ¨ E2B execute_code å·¥å…·ä¸­ä½¿ç”¨

### éªŒè¯ç»“æœ
- âœ… åç«¯æ­£ç¡®å‘é€ startTime å’Œ elapsedTime
- âœ… å‰ç«¯æ­£ç¡®æ¥æ”¶å¹¶æ˜¾ç¤ºè®¡æ—¶å™¨
- âœ… è®¡æ—¶å™¨ä½ç½®åˆç†ï¼Œä¸ä¸å…¶ä»–å…ƒç´ é‡å 
- âœ… å®æ—¶æ›´æ–°åŠŸèƒ½æ­£å¸¸ï¼ˆæ‰§è¡Œä¸­æ¯ 100ms åˆ·æ–°ï¼‰
- âœ… æ ¼å¼åŒ–æ˜¾ç¤ºæ­£ç¡®ï¼ˆ230ms, 1.8s ç­‰ï¼‰

### é—ç•™ä»»åŠ¡
- ğŸ”² ç§»é™¤è°ƒè¯•æ—¥å¿—ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- ğŸ”² å¯é€‰ï¼šæ·»åŠ å›½é™…åŒ–æ”¯æŒï¼ˆi18nï¼‰

---

## 2026-01-19 (å‘¨æ—¥) - ä¸‹åˆ

### âš¡ E2B èµ„æºé…ç½®ä¼˜åŒ–ä¸ PyTorch æ”¯æŒ
**Git Commit**: feat(e2b): Optimize resource limits and add PyTorch support

### ä¸»è¦å·¥ä½œ
1. **E2B èµ„æºé™åˆ¶æ‹‰æ»¡ï¼ˆHobby Planï¼‰** â­â­â­
   - **éœ€æ±‚**: æ”¯æŒé•¿æ—¶é—´è¿è¡Œçš„æœºå™¨å­¦ä¹ ä»»åŠ¡ï¼ˆæ¨¡å‹è®­ç»ƒã€å¤§æ•°æ®å¤„ç†ï¼‰
   - **å®ç°**:
     - ä¿®æ”¹ `build.dev.ts`: æ·»åŠ  `cpuCount: 8` å’Œ `memoryMB: 8192`
     - ä¿®æ”¹ `initialize.js`: ç§»é™¤è¿è¡Œæ—¶æ— æ•ˆçš„èµ„æºé…ç½®ï¼ˆmaxMemoryMB/maxCpuPercent/maxDiskMBï¼‰
     - å¢åŠ æ²™ç®±è¶…æ—¶ï¼šä» 5 åˆ†é’Ÿæ”¹ä¸º **1 å°æ—¶**ï¼ˆ3600000msï¼‰
   - **E2B é…ç½®åŸç†**:
     - CPU å’Œå†…å­˜ï¼šåœ¨**æ„å»ºæ¨¡æ¿æ—¶**è®¾å®šï¼ˆ`Template.build()`ï¼‰
     - è¶…æ—¶æ—¶é—´ï¼šåœ¨**åˆ›å»º Sandbox æ—¶**è®¾å®šï¼ˆ`Sandbox.create()`ï¼‰
     - ç£ç›˜ç©ºé—´ï¼šE2B Hobby Plan å›ºå®š 10GBï¼ˆæ— æ³•é…ç½®ï¼‰

2. **PyTorch æ”¯æŒ** ğŸ”¥
   - **éœ€æ±‚**: æ”¯æŒæ·±åº¦å­¦ä¹ ä»»åŠ¡ï¼ˆæ¨¡å‹è®­ç»ƒã€æ¨ç†ã€model.eval()ï¼‰
   - **å®ç°**:
     - ä¿®æ”¹ `template.ts`: æ·»åŠ  `pipInstall(['torch', 'torchvision', 'torchaudio'])`
     - é‡æ–°æ„å»ºæ¨¡æ¿ï¼š`npm run e2b:build:dev`
   - **å®‰å…¨éªŒè¯å…¼å®¹æ€§**:
     - ä¹‹å‰å·²ä¿®å¤ `codeExecutor.js` çš„ eval æ£€æµ‹ï¼ˆä½¿ç”¨ negative lookbehindï¼‰
     - ç¡®ä¿ `model.eval()` ä¸ä¼šè§¦å‘å®‰å…¨è­¦å‘Š

3. **é…ç½®æ¶æ„æ¸…ç†** ğŸ§¹
   - **é—®é¢˜**: defaultConfig ä¸­å®šä¹‰äº†æ— æ³•ä¼ é€’ç»™ E2B SDK çš„å‚æ•°
   - **è§£å†³**:
     - åˆ é™¤ `maxMemoryMB`, `maxCpuPercent`, `maxDiskMB`ï¼ˆè¿è¡Œæ—¶ä¸æ”¯æŒï¼‰
     - æ·»åŠ æ³¨é‡Šè¯´æ˜ï¼šCPU/å†…å­˜åœ¨æ„å»ºæ—¶è®¾å®š
     - ç®€åŒ–æ—¥å¿—è¾“å‡ºï¼šåªæ˜¾ç¤º template å’Œ timeout

4. **æ¨¡æ¿æ„å»ºéªŒè¯** âœ…
   - æ¨¡æ¿ ID: `xed696qfsyzpaei3ulh5`ï¼ˆalias å›ºå®šï¼Œä¸ä¼šå˜åŒ–ï¼‰
   - Build ID: æ¯æ¬¡æ„å»ºç”Ÿæˆæ–°çš„ï¼ˆE2B è‡ªåŠ¨ä½¿ç”¨æœ€æ–° Buildï¼‰
   - æ„å»ºåŒ…å«ï¼š
     - PyTorch 2.5+ (CPU ç‰ˆæœ¬ï¼Œ~2GB)
     - åŸæœ‰æ‰€æœ‰åŒ…ï¼ˆpandas, numpy, scikit-learn, xgboost, nltk, spacy ç­‰ï¼‰
     - æ–°èµ„æºé™åˆ¶ï¼š8 vCPUs, 8GB RAM, 1 å°æ—¶è¶…æ—¶

### éªŒè¯ç»“æœ
- âœ… æ¨¡æ¿æ„å»ºæˆåŠŸï¼ˆåŒ…å« PyTorchï¼‰
- âœ… èµ„æºé…ç½®ç”Ÿæ•ˆï¼ˆ8 vCPUs, 8GB RAMï¼‰
- âœ… è¶…æ—¶æ—¶é—´å¢åŠ åˆ° 1 å°æ—¶
- âœ… é…ç½®ä»£ç ç®€åŒ–ï¼ˆç§»é™¤æ— æ•ˆå‚æ•°ï¼‰
- âœ… API æœåŠ¡é‡å¯å®Œæˆ

### æŠ€æœ¯ç»†èŠ‚
**E2B èµ„æºé…ç½®å±‚çº§**:
| é…ç½®é¡¹ | è®¾å®šæ—¶æœº | é…ç½®ä½ç½® | è¯´æ˜ |
|--------|---------|---------|------|
| CPU æ ¸å¿ƒæ•° | æ¨¡æ¿æ„å»ºæ—¶ | `build.dev.ts` | 8 vCPUs (Hobby Max) |
| å†…å­˜å¤§å° | æ¨¡æ¿æ„å»ºæ—¶ | `build.dev.ts` | 8GB (Hobby Max) |
| ç£ç›˜ç©ºé—´ | E2B å›ºå®š | æ— æ³•é…ç½® | 10GB (Hobby Plan) |
| è¶…æ—¶æ—¶é—´ | Sandbox åˆ›å»ºæ—¶ | `initialize.js` | 1 å°æ—¶ (3600000ms) |

**æ–‡ä»¶ä¿®æ”¹**:
1. `e2b_template/data-analyst/build.dev.ts` (+2 è¡Œ)
   - æ·»åŠ  cpuCount å’Œ memoryMB å‚æ•°
2. `e2b_template/data-analyst/template.ts` (+1 è¡Œ)
   - æ·»åŠ  PyTorch å®‰è£…
3. `api/server/services/Endpoints/e2bAssistants/initialize.js` (-4 è¡Œ)
   - ç§»é™¤æ— æ•ˆçš„èµ„æºé…ç½®ï¼Œç®€åŒ–æ³¨é‡Š

**æ¨¡æ¿æ„å»ºå‘½ä»¤**:
```bash
cd /home/airi/LibreChat/e2b_template/data-analyst
npm run e2b:build:dev
```

### å·¥ä½œæ—¶é•¿
çº¦ 1.5 å°æ—¶ï¼ˆéœ€æ±‚åˆ†æ + E2B æ–‡æ¡£ç ”ç©¶ + é…ç½®ä¿®æ”¹ + æ¨¡æ¿æ„å»ºï¼‰

---

## 2026-01-19 (å‘¨æ—¥)

### ğŸ¯ æ™ºèƒ½ä»»åŠ¡å®Œæˆæœºåˆ¶
**Git Commit**: feat(e2b): Add intelligent task completion with complete_task tool

### ä¸»è¦å·¥ä½œ
1. **æ·»åŠ  `complete_task` å·¥å…·** â­â­â­
   - **éœ€æ±‚**: è§£å†³ LLM æ‰§è¡Œå¤šæ­¥è®¡åˆ’æ—¶æå‰åœæ­¢çš„é—®é¢˜
   - **é—®é¢˜**: ä¹‹å‰ä»…ä¾èµ–"æ²¡æœ‰ tool_calls"åˆ¤æ–­ä»»åŠ¡å®Œæˆï¼Œå¯¼è‡´ LLM æ‰§è¡Œä¸€æ­¥åå°±åœæ­¢
   - **å®ç°**:
     - æ–°å¢ `complete_task` å·¥å…·ï¼ˆtools.jsï¼‰ï¼šæ¥å— summary å‚æ•°ï¼Œè¿”å›ä»»åŠ¡å®Œæˆæ ‡è®°
     - æ·»åŠ å·¥å…·å®šä¹‰ï¼ˆprompts.jsï¼‰ï¼šæè¿°ä½•æ—¶è°ƒç”¨è¯¥å·¥å…·
     - ä¿®æ”¹åœæ­¢é€»è¾‘ï¼ˆindex.jsï¼‰ï¼šæ£€æµ‹ `complete_task` è°ƒç”¨æ—¶ç«‹å³åœæ­¢å¾ªç¯
     - æ›´æ–° System Promptï¼šæ˜ç¡®è¦æ±‚å®Œæˆæ‰€æœ‰æ­¥éª¤å MUST è°ƒç”¨ `complete_task`

2. **å·¥ä½œæµç¨‹ä¼˜åŒ–** ğŸ”„
   - **ä¹‹å‰çš„é—®é¢˜**:
     ```
     Iteration 1: è®¡åˆ’ (4æ­¥) + æ‰§è¡Œ Step 1 â†’ åœæ­¢ âŒ
     ç”¨æˆ·æ‰‹åŠ¨æç¤º â†’ Iteration 2: æ‰§è¡Œ Step 2 â†’ åœæ­¢ âŒ
     ```
   - **ä¼˜åŒ–å**:
     ```
     Iteration 1: è®¡åˆ’ + Step 1 å·¥å…·è°ƒç”¨
     Iteration 2: Step 1 è§£é‡Š + Step 2 å·¥å…·è°ƒç”¨
     Iteration 3: Step 2 è§£é‡Š + Step 3 å·¥å…·è°ƒç”¨
     ...
     Iteration N: æœ€åä¸€æ­¥è§£é‡Š + complete_task("æ‰€æœ‰æ­¥éª¤å®Œæˆï¼Œä¸»è¦å‘ç°...") âœ…
     ```

3. **Prompt ä¼˜åŒ–** ğŸ“
   - ç®€åŒ– Execution Workflow æè¿°ï¼ˆä»å†—é•¿çš„æŠ€æœ¯æµç¨‹è¯´æ˜æ”¹ä¸ºç®€æ´è§„åˆ™ï¼‰
   - åˆ é™¤"One tool per turn"è§„åˆ™ï¼ˆä¸å¿…è¦çš„é™åˆ¶ï¼‰
   - å¼ºè°ƒ"MUST call complete_task"ï¼ˆä½¿ç”¨å¤§å†™ MUSTï¼‰
   - æ·»åŠ å…·ä½“ç¤ºä¾‹ï¼š`complete_task(summary="...")`
   - æ˜ç¡®ç¦æ­¢è¡Œä¸ºï¼š"do NOT just say 'will summarize', actually call the tool"

4. **åœæ­¢æœºåˆ¶æ”¹è¿›** âš™ï¸
   - ä»è¢«åŠ¨åˆ¤æ–­æ”¹ä¸ºä¸»åŠ¨å†³ç­–
   - LLM è‡ªä¸»å†³å®šä»»åŠ¡ä½•æ—¶å®Œæˆ
   - ç³»ç»Ÿæ£€æµ‹åˆ° `complete_task` è°ƒç”¨åç«‹å³åœæ­¢
   - é¿å…ä¾èµ–"æ²¡æœ‰ tool_calls"çš„æ¨¡ç³Šåˆ¤æ–­

### éªŒè¯ç»“æœ
- âœ… LLM è‡ªåŠ¨æ‰§è¡Œå¤šæ­¥è®¡åˆ’ï¼ˆæ— éœ€æ‰‹åŠ¨æç¤ºç»§ç»­ï¼‰
- âœ… æ¯æ­¥æ‰§è¡Œåç«‹å³è§£é‡Šï¼Œä½“éªŒæµç•…
- âœ… å®Œæˆæ‰€æœ‰æ­¥éª¤åè°ƒç”¨ `complete_task`
- âœ… ä»»åŠ¡å®Œæˆæ ‡è®°æ˜ç¡®ï¼Œä¸å†æå‰åœæ­¢

### æŠ€æœ¯ç»†èŠ‚
**æ–‡ä»¶ä¿®æ”¹**:
1. `api/server/services/Agents/e2bAgent/tools.js` (+18 è¡Œ)
   - æ–°å¢ `complete_task` å·¥å…·å®ç°
2. `api/server/services/Agents/e2bAgent/prompts.js` (+17 è¡Œ)
   - æ·»åŠ å·¥å…·å®šä¹‰å’Œ workflow ä¼˜åŒ–
3. `api/server/services/Agents/e2bAgent/index.js` (+10 è¡Œ)
   - æ™ºèƒ½åœæ­¢æœºåˆ¶ï¼ˆæ£€æµ‹ complete_taskï¼‰

**åœæ­¢æœºåˆ¶å¯¹æ¯”**:
| æ–¹å¼ | åˆ¤æ–­ä¾æ® | é—®é¢˜ |
|------|---------|------|
| æ—§æ–¹å¼ | `!message.tool_calls` | LLM è§£é‡Šåæ²¡è°ƒç”¨å·¥å…·å°±åœæ­¢ |
| æ–°æ–¹å¼ | `hasCompleteTask` æ£€æµ‹ | LLM ä¸»åŠ¨å£°æ˜å®Œæˆ âœ… |

---

## 2026-01-15 (å‘¨ä¸‰)

###  E2B Assistant æ–‡ä»¶æŒä¹…åŒ–åŠŸèƒ½
**Git Commit**: (å¾…æäº¤) - feat(e2b): Add persistent file upload support for E2B Assistants

### ä¸»è¦å·¥ä½œ
1. **E2B Assistant ä¾§è¾¹æ æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½** â­â­â­
   - **éœ€æ±‚**: å®ç°ç±»ä¼¼ Azure Assistants çš„æ–‡ä»¶æŒä¹…åŒ–åŠŸèƒ½
   - **å®ç°**:
     - ä¿®æ”¹åç«¯æ–‡ä»¶ä¸Šä¼ è·¯ç”±ï¼ˆ`files.js`ï¼‰ï¼šæ£€æµ‹ E2B assistant_id å¹¶æ­£ç¡®è®¾ç½® endpoint
     - ä¿®æ”¹æ–‡ä»¶å¤„ç†æœåŠ¡ï¼ˆ`process.js`ï¼‰ï¼šE2B ç‰¹å®šçš„æ–‡ä»¶å…³è”é€»è¾‘
     - ä¿®æ”¹ E2B Agentï¼ˆ`index.js`ï¼‰ï¼šä»ä¸‰ä¸ªæ¥æºæ”¶é›†æ–‡ä»¶ï¼ˆæ¶ˆæ¯é™„ä»¶ã€tool_resourcesã€root file_idsï¼‰
     - ä¿®æ”¹å‰ç«¯ä¸Šä¼ é€»è¾‘ï¼ˆ`useFileHandling.ts`ï¼‰ï¼šç§»é™¤é”™è¯¯çš„ endpoint è¦†ç›–
     - æ·»åŠ æ–‡ä»¶å…ƒæ•°æ®æ£€ç´¢ï¼ˆ`controller.js`ï¼‰ï¼špopulateCodeFiles å‡½æ•°

2. **Bug ä¿®å¤è¿‡ç¨‹** ğŸ›
   - **é—®é¢˜ 1**: æ–‡ä»¶æœªåŒæ­¥åˆ°æ²™ç®±
     - åŸå› : E2B Agent åªè¯»å–æ¶ˆæ¯é™„ä»¶ï¼ˆthis.filesï¼‰ï¼Œæœªè¯»å– assistant.tool_resources
     - ä¿®å¤: ä¿®æ”¹ index.js æ”¶é›†ä¸‰ä¸ªæ¥æºçš„æ–‡ä»¶å¹¶å»é‡
   
   - **é—®é¢˜ 2**: æ–‡ä»¶ file_id æ˜¾ç¤ºä¸º undefined
     - åŸå› : å­˜å‚¨ç­–ç•¥ï¼ˆLocal/S3/Azureï¼‰ä¸è¿”å› 'id' å­—æ®µï¼ˆåªæœ‰ OpenAI è¿”å›ï¼‰
     - è§£å†³æ–¹æ¡ˆ: åœ¨ process.js ä¸­æ·»åŠ  E2B ç‰¹å®šçš„ fallbackï¼š`actualFileId = id || file_id`
   
   - **é—®é¢˜ 3**: æ–‡ä»¶åœ¨é‡æ–°ç™»å½•åæ¶ˆå¤±
     - åŸå› : å‰ç«¯é”™è¯¯åœ°è¦†ç›–äº† endpoint ä¸º 'default'
     - ä¿®å¤: ç§»é™¤ useFileHandling.ts ä¸­çš„ endpoint è¦†ç›–é€»è¾‘

3. **ä»£ç å®¡æŸ¥ä¸å®‰å…¨éªŒè¯** ğŸ”’
   - åˆ†ææ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶ï¼ˆ5 ä¸ªæ–‡ä»¶ï¼Œ~500 è¡Œï¼‰
   - ç¡®è®¤æ‰€æœ‰ E2B é€»è¾‘éƒ½æœ‰æ¡ä»¶æ£€æŸ¥ï¼ˆ`isE2BAssistant`, `metadata.e2b_assistant_id`ï¼‰
   - éªŒè¯äº’æ–¥åˆ†æ”¯ï¼ˆif-elseï¼‰ä¿æŠ¤åŸæœ‰é€»è¾‘
   - é£é™©è¯„ä¼°: ğŸŸ¢ æ— é£é™©åˆ° ğŸŸ¡ ä½é£é™©
   - ç»“è®º: ä¿®æ”¹å·²æ­£ç¡®éš”ç¦»ï¼Œä¸å½±å“å…¶ä»– LibreChat åŠŸèƒ½

4. **æ–‡æ¡£åˆ›å»º** ğŸ“
   - åˆ›å»º `æ–‡ä»¶æµé€»è¾‘.md`ï¼šè¯¦ç»†è®°å½•ä¸¤ç§ä¸Šä¼ æ¨¡å¼çš„ 16 æ­¥æµç¨‹
   - åŒ…å«ä¾§è¾¹æ åŠ©æ‰‹ä¸Šä¼ ï¼ˆæŒä¹…åŒ–ï¼‰vs èŠå¤©æ¶ˆæ¯é™„ä»¶ï¼ˆä¸´æ—¶ï¼‰çš„å¯¹æ¯”
   - è®°å½• E2B Agent æ–‡ä»¶åŒæ­¥æœºåˆ¶ï¼ˆ12 æ­¥ï¼‰

### éªŒè¯ç»“æœ
- âœ… ä¾§è¾¹æ æ–‡ä»¶ä¸Šä¼ ï¼šfile_id æ­£ç¡®ä¿å­˜åˆ°æ•°æ®åº“
- âœ… æ–‡ä»¶å…³è”ï¼štool_resources.code_interpreter.file_ids æ­£ç¡®æ›´æ–°
- âœ… æ–‡ä»¶åŒæ­¥ï¼šæ–‡ä»¶æˆåŠŸä¸Šä¼ åˆ°æ²™ç®± /home/user/
- âœ… Context Managerï¼šç³»ç»Ÿæç¤ºåŒ…å«æ–‡ä»¶åˆ—è¡¨å’Œè·¯å¾„
- âœ… LLM æ„ŸçŸ¥ï¼šAI åœ¨æ‰§è¡Œä»£ç å‰çŸ¥é“æ–‡ä»¶å­˜åœ¨
- âœ… è·¨ä¼šè¯æŒä¹…åŒ–ï¼šé‡æ–°ç™»å½•åæ–‡ä»¶ä»ç„¶å­˜åœ¨
- âœ… å®‰å…¨æ€§ï¼šæ‰€æœ‰ä¿®æ”¹å·²æ­£ç¡®éš”ç¦»ï¼Œä¸å½±å“å…¶ä»–åŠŸèƒ½

### æŠ€æœ¯ç»†èŠ‚
- **æ–‡ä»¶ä¸Šä¼ æµç¨‹**:
  1. å‰ç«¯å‘é€ formDataï¼ˆåŒ…å« e2b_assistant_idï¼‰
  2. files.js æ£€æµ‹ E2B å¹¶è®¾ç½®æ­£ç¡®çš„ endpoint å’Œ metadata
  3. process.js å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼ˆä½¿ç”¨ Local/S3/Azure å­˜å‚¨ï¼‰
  4. process.js ä½¿ç”¨ fallback ç¡®ä¿ file_id å­˜åœ¨ï¼š`actualFileId = id || file_id`
  5. process.js æ›´æ–° assistant çš„ tool_resources.code_interpreter.file_ids
  6. controller.js çš„ populateCodeFiles æ£€ç´¢æ–‡ä»¶å…ƒæ•°æ®å¹¶è¿”å›å‰ç«¯

- **E2B Agent æ–‡ä»¶åŒæ­¥**:
  1. æ”¶é›†æ¶ˆæ¯é™„ä»¶æ–‡ä»¶ï¼ˆthis.filesï¼‰
  2. æ”¶é›† assistant.tool_resources.code_interpreter.file_ids
  3. æ”¶é›† assistant.file_idsï¼ˆV1 å…¼å®¹ï¼‰
  4. å»é‡å¹¶æŸ¥è¯¢æ•°æ®åº“è·å–æ–‡ä»¶è¯¦æƒ…
  5. è°ƒç”¨ syncFilesToSandbox ä¸Šä¼ åˆ°æ²™ç®±

- **å®‰å…¨éš”ç¦»æœºåˆ¶**:
  1. Endpoint çº§åˆ«æ£€æŸ¥ï¼š`endpoint === 'e2bAssistants'`
  2. Metadata çº§åˆ«æ£€æŸ¥ï¼š`metadata.e2b_assistant_id`
  3. äº’æ–¥åˆ†æ”¯ï¼š`if (isE2BAssistant) {...} else if (...)`
  4. Fallback å®‰å…¨ï¼šå…¶ä»–ç«¯ç‚¹çš„å­˜å‚¨ç­–ç•¥è¿”å› 'id'ï¼Œä¸å—å½±å“

### å·¥ä½œæ—¶é•¿
çº¦ 6 å°æ—¶ï¼ˆéœ€æ±‚åˆ†æ + å®ç° + Bug ä¿®å¤ + æ–‡æ¡£ + å®‰å…¨éªŒè¯ï¼‰

---

## 2026-01-15 (å‘¨ä¸‰) - æ—©ä¸Š

### ğŸš€ Azure OpenAI é›†æˆ + System Prompt ä¼˜åŒ–
**Git Commit**: å·²å®Œæˆ - feat: Add Azure OpenAI support and optimize system prompt for gpt-5-mini

### ä¸»è¦å·¥ä½œ
1. **Azure OpenAI API é›†æˆ** â­â­â­
   - **éœ€æ±‚**: ä»ç¡¬ç¼–ç çš„ OpenAI API Key è¿ç§»åˆ° Azure OpenAI Service
   - **å®ç°**:
     - ä¿®æ”¹ `initialize.js`: æ£€æµ‹ `OPENAI_API_KEY=user_provided` æ—¶ä¼˜å…ˆä½¿ç”¨ Azure é…ç½®
     - ä½¿ç”¨éƒ¨ç½²ç‰¹å®šçš„ baseURL: `${azureEndpoint}/openai/deployments/${azureDeployment}`
     - åœ¨ OpenAI å®¢æˆ·ç«¯å¯¹è±¡ä¸Šé™„åŠ  `azureDeployment` å±æ€§
   - **ç¯å¢ƒå˜é‡**:
     ```env
     OPENAI_API_KEY=user_provided
     AZURE_OPENAI_ENDPOINT=https://hkubs-airi.cognitiveservices.azure.com/
     AZURE_OPENAI_API_KEY=A4J32nz2...
     AZURE_OPENAI_API_VERSION=2025-01-01-preview
     AZURE_OPENAI_DEPLOYMENT=gpt-5-mini
     ```

2. **é”™è¯¯ä¿®å¤è¿‡ç¨‹** ğŸ›
   - **é”™è¯¯ 1**: `azureOpenAIApiVersion is not defined`
     - åŸå› : ES6 property shorthand å˜é‡åä¸åŒ¹é…
     - ä¿®å¤: ä½¿ç”¨æ˜¾å¼èµ‹å€¼ `azureOpenAIApiVersion: azureApiVersion`
   
   - **é”™è¯¯ 2**: 401 Incorrect API key "user_pro*ided"
     - åŸå› : `index.js` åˆ›å»ºäº†æ–°çš„ OpenAI å®¢æˆ·ç«¯è¦†ç›– initialize.js çš„é…ç½®
     - ä¿®å¤: åˆ é™¤ `index.js` ä¸­çš„é‡å¤å®¢æˆ·ç«¯åˆ›å»ºé€»è¾‘
   
   - **é”™è¯¯ 3**: 400 temperature does not support 0
     - åŸå› : Azure OpenAI gpt-5-mini ä»…æ”¯æŒ temperature=1ï¼ˆé»˜è®¤å€¼ï¼‰
     - ä¿®å¤: åœ¨ `e2bAgent/index.js` ä¸­æ£€æµ‹ Azure å¹¶è·³è¿‡ temperature å‚æ•°
   
   - **é”™è¯¯ 4**: æ¨¡å‹åç§°æ˜¾ç¤ºä¸º gpt-4o è€Œé gpt-5-mini
     - åŸå› : `this.assistant.model` ä¸ºç©ºï¼Œä½¿ç”¨äº†é»˜è®¤å€¼
     - ä¿®å¤: ä¼˜å…ˆä½¿ç”¨ `this.openai.azureDeployment`

3. **System Prompt ä¼˜åŒ–** ğŸ“
   - **èƒŒæ™¯**: gpt-5-mini æ˜¯è½»é‡çº§æ¨¡å‹ï¼Œå­˜åœ¨é‡å¤æ€§è¾“å‡ºã€ç»“æ„åŒ–ä¸è¶³é—®é¢˜
   - **ä¼˜åŒ–å†…å®¹** (`prompts.js`):
     - æ˜ç¡®å·¥ä½œæµç¨‹: Plan (é¦–æ¬¡) â†’ Execute (è¿­ä»£å¾ªç¯)
     - å¼ºè°ƒç›´æ¥è°ƒç”¨å·¥å…·ï¼Œç¦æ­¢å…ˆå†™ ```python ä»£ç å—
     - å¼ºåˆ¶ä½¿ç”¨ Markdown è¯­æ³•æ˜¾ç¤ºå›¾åƒ: `![Description](path)`
     - æ”¹è¿›é”™è¯¯å¤„ç†æç¤º: åˆ†æ tracebackï¼Œè‡ªä¸»ä¿®å¤ï¼Œæ— éœ€è¯¢é—®
   - **æ•ˆæœ**: è¾“å‡ºæ›´ç»“æ„åŒ–ï¼Œå‡å°‘é‡å¤ï¼Œå›¾åƒæ˜¾ç¤ºæ›´å¯é 

4. **ä»£ç æ¸…ç†**
   - æ¸…ç†æ‰€æœ‰ä¸´æ—¶è°ƒè¯•æ—¥å¿—ï¼ˆåŸè®¡åˆ’çš„ lines 237-240, 247 å·²åœ¨ä¹‹å‰ç‰ˆæœ¬æ¸…ç†ï¼‰
   - ç®€åŒ– temperature å¤„ç†é€»è¾‘
   - Azure æ£€æµ‹æœºåˆ¶ç¨³å®š

### éªŒè¯ç»“æœ
- âœ… Azure OpenAI åˆå§‹åŒ–æˆåŠŸï¼ˆæ—¥å¿—æ˜¾ç¤ºæ­£ç¡®çš„ endpoint, deployment, versionï¼‰
- âœ… E2B Agent ä½¿ç”¨ gpt-5-mini éƒ¨ç½²åç§°
- âœ… Temperature å‚æ•°æ­£ç¡®çœç•¥
- âœ… Titanic æ•°æ®é›†åˆ†ææˆåŠŸï¼ˆ5 æ¬¡å·¥å…·è°ƒç”¨ï¼Œç”Ÿæˆ 1 å¼ çƒ­åŠ›å›¾ï¼‰
- âœ… ä¼˜åŒ–åçš„ prompt è¾“å‡ºæ›´ç»“æ„åŒ–
- âœ… å›¾åƒæ­£ç¡®æ˜¾ç¤ºåœ¨å‰ç«¯

### æ–‡æ¡£æ›´æ–°
- æ›´æ–° `E2B_DATA_ANALYST_AGENT_DEVELOPMENT.md`:
  - æ·»åŠ  Azure OpenAI é›†æˆç« èŠ‚
  - æ·»åŠ  System Prompt ä¼˜åŒ–ç« èŠ‚
  - æ›´æ–°æœ€åæ›´æ–°æ—¥æœŸå’ŒçŠ¶æ€

### å¾…åŠäº‹é¡¹
- â³ åˆ›å»º Git commit å¹¶æ¨é€åˆ°è¿œç¨‹ä»“åº“
- â³ è€ƒè™‘æ”¯æŒå‰ç«¯åŠ¨æ€é€‰æ‹© OpenAI / Azure OpenAI
- â³ é’ˆå¯¹ä¸åŒæ¨¡å‹å¾®è°ƒ promptï¼ˆGPT-4o vs gpt-5-miniï¼‰

---

## 2026-01-14 (å‘¨äºŒ)

### ğŸ› å…³é”® Bug ä¿®å¤æ—¥
**Git Commit**: `9a854cb67` - fix: critical E2B Agent bug fixes and TOOL_CALL integration

### ä¸»è¦å·¥ä½œ
1. **é”™è¯¯æ£€æµ‹é€»è¾‘ä¸¥é‡ Bug ä¿®å¤** â­â­â­
   - **é—®é¢˜**: JavaScript `!{}` åˆ¤æ–­å¯¼è‡´é”™è¯¯å¯¹è±¡è¢«è¯¯åˆ¤ä¸ºæˆåŠŸ
   - **å½±å“**: LLM æ— æ³•æ„ŸçŸ¥ä»£ç æ‰§è¡Œå¤±è´¥ï¼Œé™·å…¥æ— é™é‡è¯•å¾ªç¯
   - **ä¿®å¤**: ä½¿ç”¨æ˜¾å¼ `hasError` boolean å˜é‡
   - **æ–‡ä»¶**: `initialize.js`, `codeExecutor.js`, `tools.js`

2. **å®Œæ•´é”™è¯¯ä¿¡æ¯ä¼ é€’é“¾**
   - æ·»åŠ  `errorName` å’Œ `traceback` å­—æ®µ
   - ä» initialize.js â†’ codeExecutor.js â†’ tools.js â†’ LLM
   - LLM ç°åœ¨èƒ½æ ¹æ®å®Œæ•´å †æ ˆè·Ÿè¸ªè‡ªåŠ¨ä¿®å¤é”™è¯¯

3. **TOOL_CALL äº‹ä»¶ç³»ç»Ÿå®ç°** (Azure Assistant é£æ ¼)
   - å®ç° Content æ•°ç»„æ¶æ„ï¼ˆTEXT å’Œ TOOL_CALL äº¤é”™ï¼‰
   - ä»£ç å—å’Œè¾“å‡ºç´§å¯†æ˜¾ç¤º
   - æ–‡ä»¶: `index.js`, `controller.js`

4. **å›¾è¡¨æ˜¾ç¤ºé—®é¢˜ä¿®å¤**
   - System Prompt æ˜ç¡®è¦æ±‚è¾“å‡º markdown è¯­æ³•
   - ç§»é™¤ "automatically displayed" è¯¯å¯¼æ€§æè¿°

5. **é€šç”¨é”™è¯¯å¤„ç†ç­–ç•¥**
   - ç§»é™¤ç‰¹å®šé”™è¯¯ç±»å‹çš„ç¡¬ç¼–ç æç¤º
   - æä¾›é€šç”¨è°ƒè¯•æ–¹æ³•è®º

6. **æ–‡æ¡£é‡ç»„** ğŸ“š
   - åˆ›å»º `README.md` - æ–‡æ¡£å¯¼èˆª
   - åˆ›å»º `E2B_TROUBLESHOOTING.md` - æ•…éšœæ’æŸ¥æ‰‹å†Œ
   - åˆ›å»º `E2B_DEVELOPMENT_GUIDE.md` - å¼€å‘æŒ‡å—
   - åˆ›å»º `E2B_DEPLOYMENT.md` - éƒ¨ç½²æŒ‡å—
   - åˆ›å»º `CHANGELOG.md` - ç‰ˆæœ¬æ›´æ–°æ—¥å¿—
   - åˆ›å»º `WORK_LOG.md` - å·¥ä½œæ—¥å¿—ï¼ˆæœ¬æ–‡ä»¶ï¼‰

### éªŒè¯ç»“æœ
- âœ… é”™è¯¯è‡ªåŠ¨ä¿®å¤æˆåŠŸï¼ˆValueError â†’ df.select_dtypes() ä¿®å¤ï¼‰
- âœ… 4 å¼ å›¾è¡¨ç”ŸæˆæˆåŠŸ
- âœ… TOOL_CALL äº‹ä»¶æ­£ç¡®å‘é€
- âœ… ExecuteCode ç»„ä»¶æ­£ç¡®æ˜¾ç¤º
- â³ å›¾è¡¨ markdown æ˜¾ç¤ºå¾…ç”¨æˆ·æµ‹è¯•

### å·¥ä½œæ—¶é•¿
çº¦ 6 å°æ—¶ï¼ˆBug ä¿®å¤ + æ–‡æ¡£é‡ç»„ï¼‰

---

## 2026-01-12 (å‘¨æ—¥)

### ğŸš€ æµå¼ä¼ è¾“ä¼˜åŒ–æ—¥
**Git Commits**:
- `7f49fd4f0` - chore: æ·»åŠ  AI è¾…åŠ©æ–‡ä»¶åˆ° .gitignore
- `2033fa101` - feat(e2b-agent): æµå¼ä¼ è¾“ä¸ç”¨æˆ·ä½“éªŒå…¨é¢ä¼˜åŒ–
- `3b0342bfd` - fix: E2B Agent æµå¼ä¼ è¾“å®Œæ•´ä¿®å¤

### ä¸»è¦å·¥ä½œ
1. **SSE æµå¼ä¼ è¾“å®Œæ•´ä¿®å¤** â­
   - **é—®é¢˜è¯Šæ–­**: E2B äº‹ä»¶æ ¼å¼ä¸ OpenAI Assistants ä¸ä¸€è‡´
   - **ä¿®å¤**: ç»Ÿä¸€äº‹ä»¶æ ¼å¼ä¸º OpenAI å…¼å®¹æ ¼å¼
     ```javascript
     { type: 'text', index: 0, text: { value: "..." } }
     ```
   - **Compression ä¸­é—´ä»¶é—®é¢˜**: æ·»åŠ  `res.flush()` å¼ºåˆ¶åˆ·æ–°ç¼“å†²åŒº
   - **æ•ˆæœ**: çœŸæ­£çš„å®æ—¶æµå¼ä½“éªŒ

2. **å‰ç«¯äº‹ä»¶è·¯ç”±ä¼˜åŒ–**
   - ä¿®æ”¹ `contentHandler` åˆ¤æ–­é€»è¾‘
   - ç§»é™¤å¯¹ `thread_id` çš„ä¾èµ–ï¼ˆE2B ä¸ä½¿ç”¨ OpenAI threadsï¼‰

3. **æŠ€æœ¯æ–‡æ¡£**
   - åˆ›å»º `docs/E2B_STREAMING_UX_FIXES_2026-01-12.md`
   - è¯¦ç»†è®°å½• SSE æµå¼ä¼ è¾“çš„åŸç†å’Œä¿®å¤è¿‡ç¨‹

### å…³é”®å‘ç°
- Express `compression()` ä¸­é—´ä»¶ä¼šç¼“å†²å“åº”
- å¿…é¡»æ˜¾å¼è°ƒç”¨ `res.flush()` æ‰èƒ½å®ç°çœŸæ­£çš„æµå¼ä¼ è¾“
- OpenAI ä½¿ç”¨åµŒå¥—æ ¼å¼ `text: { value: string }`

### å·¥ä½œæ—¶é•¿
çº¦ 4 å°æ—¶

---

## 2026-01-08 (å‘¨ä¸‰)

### ğŸ“ æ–‡æ¡£é‡ç»„æ—¥
**Git Commit**: `e524a56b6` - docs: é‡ç»„æ–‡æ¡£ç»“æ„ - åˆ†ç¦»æ¶æ„è¯´æ˜å’Œé—®é¢˜è§£å†³

### ä¸»è¦å·¥ä½œ
1. **æ–‡æ¡£æ‹†åˆ†**
   - åˆ›å»º `E2B_AGENT_ARCHITECTURE.md` - ç³»ç»Ÿæ¶æ„ï¼ˆ1006è¡Œï¼‰
   - åˆ›å»º `E2B_AGENT_FIXES.md` - é—®é¢˜è§£å†³ï¼ˆä»å¼€å‘æ–‡æ¡£ä¸­åˆ†ç¦»ï¼‰
   - ä¿æŒ `E2B_DATA_ANALYST_AGENT_DEVELOPMENT.md` ä½œä¸ºå¼€å‘å†å²è®°å½•

2. **æ–‡æ¡£ç»„ç»‡åŸåˆ™**
   - æ¶æ„æ–‡æ¡£ï¼šåªè®²"æ˜¯ä»€ä¹ˆ"å’Œ"ä¸ºä»€ä¹ˆ"
   - ä¿®å¤æ–‡æ¡£ï¼šè®°å½•é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
   - å¼€å‘æ–‡æ¡£ï¼šä¿ç•™å®Œæ•´å¼€å‘å†å²

### å·¥ä½œæ—¶é•¿
çº¦ 2 å°æ—¶

---

## 2026-01-07 ~ 2026-01-08 (å‘¨ä¸€-å‘¨äºŒ)

### ğŸ—ï¸ æ ¸å¿ƒç³»ç»Ÿå®Œå–„ä¸æ¶æ„ä¼˜åŒ–
**Git Commit**: `551a783bd` - feat: æ ¸å¿ƒç³»ç»Ÿå®Œå–„ - Context Manager, æ²™ç®±æ¢å¤, è¿­ä»£ä¼˜åŒ–, é”™è¯¯è‡ªæ„ˆ

### ä¸»è¦å·¥ä½œ
1. **Context Manager å®Œæ•´å®ç°** â­â­â­
   - Single Source of Truth ç»Ÿä¸€ç®¡ç†ä¼šè¯çŠ¶æ€
   - å†…éƒ¨/å¤–éƒ¨éš”ç¦»ï¼ˆå†…éƒ¨å­˜å‚¨ file_idï¼Œå¤–éƒ¨æš´éœ² clean filenameï¼‰
   - ç»“æ„åŒ–ä¸Šä¸‹æ–‡ç”Ÿæˆæ–¹æ³•
   - conversationId è¿½è¸ªé˜²æ­¢æ··æ·†

2. **åŒå±‚æ²™ç®±æ¢å¤ç³»ç»Ÿ**
   - Layer 1: åˆå§‹åŒ–æ¢å¤ï¼ˆä»æ•°æ®åº“æ¢å¤æ–‡ä»¶ï¼‰
   - Layer 2: æ‰§è¡Œè¶…æ—¶æ¢å¤ï¼ˆè‡ªåŠ¨é‡å»ºæ²™ç®±ï¼‰
   - æ–‡ä»¶æ¢å¤æµç¨‹å®Œæ•´å®ç°

3. **è¿­ä»£æ§åˆ¶ç³»ç»Ÿä¼˜åŒ–**
   - è¿­ä»£é™åˆ¶ä» 10 æ¬¡æå‡åˆ° 20 æ¬¡
   - æå‰æé†’æœºåˆ¶ï¼ˆç¬¬ 17 æ¬¡è¿­ä»£è­¦å‘Šï¼‰
   - System Prompt å¼ºåŒ–ï¼ˆå¼ºè°ƒæä¾›æ–‡å­—è¯´æ˜ï¼‰

4. **é”™è¯¯æ¢å¤ç­–ç•¥é‡æ„**
   - ä»å…·ä½“åˆ°é€šç”¨çš„è½¬å˜
   - ç§»é™¤ç‰¹å®šé”™è¯¯ç±»å‹çš„ç¡¬ç¼–ç è§£å†³æ–¹æ¡ˆ
   - å®ç°é€šç”¨è°ƒè¯•æŒ‡å¯¼æ–¹æ³•
   - è®¾è®¡å“²å­¦ï¼š"Teach how to debug" > "Memorize solutions"

5. **å¯è§†åŒ–è·¯å¾„é—®é¢˜ä¿®å¤**
   - System Prompt æ˜ç¡®ï¼šä¸è¦ä¿å­˜åˆ° /images/
   - åªä½¿ç”¨ `plt.show()` æˆ–ä¿å­˜åˆ° `/tmp/`
   - ç³»ç»Ÿè‡ªåŠ¨æŒä¹…åŒ–

6. **å›¾ç‰‡è·¯å¾„æ¶æ„ç®€åŒ–** â­
   - ç§»é™¤å¤æ‚çš„è·¯å¾„æ›¿æ¢é€»è¾‘
   - ç›´æ¥åœ¨ observation ä¸­æä¾›æœ€ç»ˆè·¯å¾„
   - è§£å†³è·¯å¾„åŒé‡åµŒå¥— bug

7. **æ— é™é‡è¯•å¾ªç¯ä¿®å¤**
   - ç»Ÿä¸€ observation æ ¼å¼ï¼ˆæˆåŠŸ/å¤±è´¥éƒ½è¿”å›å®Œæ•´ç»“æ„ï¼‰
   - LLM èƒ½æ­£ç¡®åˆ†æå¤±è´¥åŸå› 

8. **å·¥å…·ç²¾ç®€**
   - ç§»é™¤ `download_file` å·¥å…·ï¼ˆä¸è‡ªåŠ¨æŒä¹…åŒ–å†—ä½™ï¼‰
   - åªä¿ç•™ `execute_code` å’Œ `upload_file`

9. **è¯Šæ–­æ—¥å¿—å¢å¼º**
   - ä½¿ç”¨ `logger.debug()` è€Œé `logger.info()`
   - è¯¦ç»†è®°å½•å·¥å…·è°ƒç”¨å’Œæ‰§è¡Œç»“æœ

### è¯¦ç»†ä»»åŠ¡æ¸…å• (å·²å®Œæˆ)
- [x] **Context Manager å®Œæ•´å®ç°**:
  - [x] Single Source of Truth ç»Ÿä¸€ç®¡ç†ä¼šè¯çŠ¶æ€ã€æ–‡ä»¶ã€ç”Ÿæˆçš„å·¥ä»¶
  - [x] å†…éƒ¨/å¤–éƒ¨éš”ç¦»ï¼šå†…éƒ¨å­˜å‚¨ `file_id`ï¼ˆå¸¦UUIDå‰ç¼€ï¼‰ï¼Œå¤–éƒ¨åªæš´éœ² clean filename
  - [x] ç»“æ„åŒ–ä¸Šä¸‹æ–‡ç”Ÿæˆï¼š`generateFilesContext`, `generateArtifactsContext`, `generateErrorRecoveryContext`
  - [x] conversationId è¿½è¸ªï¼šæ¯ä¸ª artifact è®°å½•æ‰€å±å¯¹è¯
- [x] **åŒå±‚æ²™ç®±æ¢å¤ç³»ç»Ÿ**:
  - [x] Layer 1 - åˆå§‹åŒ–æ¢å¤ï¼šæ£€æµ‹å¯¹è¯ä¸­æ–‡ä»¶ï¼Œä»æ•°æ®åº“æå– file_idsï¼Œè°ƒç”¨ `syncFilesToSandbox`
  - [x] Layer 2 - æ‰§è¡Œè¶…æ—¶æ¢å¤ï¼šæ£€æµ‹æ²™ç®±è¶…æ—¶ï¼Œè‡ªåŠ¨é‡å»ºæ²™ç®±å¹¶æ¢å¤æ‰€æœ‰æ–‡ä»¶
- [x] **è¿­ä»£æ§åˆ¶ç³»ç»Ÿä¼˜åŒ–**:
  - [x] è¿­ä»£é™åˆ¶æå‡è‡³ 20 æ¬¡
  - [x] æå‰æé†’æœºåˆ¶ï¼ˆç¬¬ 17 æ¬¡è­¦å‘Šï¼‰
  - [x] System Prompt å¼ºåŒ–ï¼šæ¯æ¬¡æ‰§è¡Œåæä¾›æ–‡å­—è¯´æ˜
- [x] **é”™è¯¯æ¢å¤ç­–ç•¥é‡æ„**:
  - [x] ç§»é™¤ `_generatePandasDataTypeRecovery` ç¡¬ç¼–ç 
  - [x] æ–°å¢ `_generateGenericErrorGuidance` é€šç”¨è°ƒè¯•æŒ‡å¯¼
- [x] **å¯è§†åŒ–è·¯å¾„é—®é¢˜ä¿®å¤**:
  - [x] System Prompt å¢å¼ºï¼šç¦æ­¢ä¿å­˜åˆ° `/images/`
  - [x] Context Manager åŠ¨æ€æé†’
- [x] **å›¾ç‰‡è·¯å¾„æ¶æ„ç®€åŒ–**:
  - [x] ç§»é™¤ `replaceImagePaths`
  - [x] tools.js ç›´æ¥æä¾›æ­£ç¡®è·¯å¾„
  - [x] System Prompt æŒ‡å¯¼ä½¿ç”¨ observation ä¸­çš„è·¯å¾„
- [x] **æ— é™é‡è¯•å¾ªç¯ä¿®å¤**:
  - [x] ç»Ÿä¸€ observation æ ¼å¼ï¼Œå¤±è´¥æ—¶è¿”å› `{ success: false, error, stderr, ... }`
- [x] **å·¥å…·ç²¾ç®€**:
  - [x] ç§»é™¤ `download_file` å·¥å…·
  - [x] ä¿®å¤ `initialize.js` ä¸­çš„ E2B API è°ƒç”¨ (`.arrayBuffer()`, `.text()`)
- [x] **è¯Šæ–­æ—¥å¿—å¢å¼º**:
  - [x] å¢åŠ  codeExecutor, tools, index çš„è¯¦ç»† debug æ—¥å¿—

### å…³é”®å†³ç­–
- **é”™è¯¯å¤„ç†å“²å­¦**: é€šç”¨æ–¹æ³• > ç‰¹å®šè§£å†³æ–¹æ¡ˆ
- **è·¯å¾„æ¶æ„**: ç›´æ¥è·¯å¾„ > å­—ç¬¦ä¸²æ›¿æ¢
- **å·¥å…·è®¾è®¡**: ç®€åŒ– > åŠŸèƒ½å†—ä½™

### å·¥ä½œæ—¶é•¿
çº¦ 10-12 å°æ—¶ï¼ˆè·¨ä¸¤å¤©ï¼‰

---

## 2026-01-07 (å‘¨ä¸€)

### ğŸ”§ æ¶æ„ä¼˜åŒ–ä¸å…³é”® Bug ä¿®å¤
**Git Commit**: `843c5dc0d` - feat(e2b): æ¶æ„ä¼˜åŒ–ä¸å…³é”®Bugä¿®å¤

### ä¸»è¦å·¥ä½œ
1. **å›¾ç‰‡è·¯å¾„æ¶æ„ç®€åŒ–** (ç¬¬ä¸€ç‰ˆ)
   - åˆæ­¥ç§»é™¤å¤æ‚è·¯å¾„æ˜ å°„
   - å®ç°ç›´æ¥è·¯å¾„æä¾›

2. **æ— é™é‡è¯•å¾ªç¯åˆæ­¥ä¿®å¤**
   - æ·»åŠ æœ€å¤§è¿­ä»£æ¬¡æ•°é™åˆ¶
   - ä¼ é€’ traceback ç»™ LLM

3. **å·¥å…·ç²¾ç®€åˆæ­¥æ¢ç´¢**
   - åˆ†æ `download_file` å·¥å…·çš„å¿…è¦æ€§

### å·¥ä½œæ—¶é•¿
çº¦ 5 å°æ—¶

---

## 2026-01-04 (å‘¨äº”)

### ğŸ¯ ç”¨æˆ·ä½“éªŒå…¨é¢ä¼˜åŒ–æ—¥
**Git Commits**:
- `2c321ff16` - feat(e2b): ä¿®å¤åŠ©æ‰‹é…ç½®ä¿å­˜ã€å¯¹è¯å†å²å’Œå›¾åƒæ˜¾ç¤ºé—®é¢˜
- `c73d706fc` - fix: E2Bæ–‡ä»¶ä¸Šä¼ ã€SSEæ¶ˆæ¯æµå’Œæ•°æ®æŒä¹…åŒ–ä¸‰å¤§å…³é”®Bugä¿®å¤
- `b507caa5f` - feat(e2b): Fix frontend creation bugs, add backend routes, update docs

### ä¸»è¦å·¥ä½œ
1. **æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿä¿®å¤** â­
   - å‰ç«¯ç¼–è¯‘é”™è¯¯ä¿®å¤ï¼ˆ`useFileHandling.ts` ç¼ºå¤±å¯¼å…¥ï¼‰
   - é…ç½®ä¸­é—´ä»¶ç¼ºå¤±ï¼ˆ`req.config` æœªåˆå§‹åŒ–ï¼‰
   - æ–‡ä»¶ä¸Šä¼ æ ‡è®°ä¸º `message_file: 'true'`

2. **SSE æ¶ˆæ¯æµä¿®å¤**
   - æ¶ˆæ¯æ ¼å¼å®Œå…¨å¯¹é½ Agent Controller
   - å®ç° `created` äº‹ä»¶
   - å®Œæ•´çš„ `final` äº‹ä»¶ç»“æ„
   - æ¶ˆæ¯æŒä¹…åŒ–åˆ°æ•°æ®åº“

3. **åŠ©æ‰‹åˆ—è¡¨æ˜¾ç¤ºä¿®å¤**
   - API å“åº”æ ¼å¼ä¿®æ”¹ä¸º `{ data: [...] }`
   - ä¸ Azure Assistants ä¸€è‡´

4. **åŠ©æ‰‹é…ç½®å®Œæ•´æŒä¹…åŒ–**
   - Schema æ‰©å±•ï¼ˆæ·»åŠ  `append_current_datetime`, `tools`, `tool_resources`ï¼‰
   - å­—æ®µæ˜ å°„ä¿®å¤ï¼ˆ`instructions` â†” `prompt`ï¼‰
   - é»˜è®¤å€¼å¤„ç†
   - ç™½åå•æ›´æ–°

5. **å¯¹è¯å†å²ä¿æŒ**
   - å†å²æ¶ˆæ¯åŠ è½½
   - ä¸Šä¸‹æ–‡ä¼ é€’ç»™ Agent
   - å¤šè½®å¯¹è¯æ”¯æŒ
   - æ²™ç®±å¤ç”¨éªŒè¯

6. **å›¾åƒè·¯å¾„æ›¿æ¢å¢å¼º**
   - æ‰©å±•è·¯å¾„æ˜ å°„ï¼ˆ6 ç§å¸¸è§ sandbox è·¯å¾„æ¨¡å¼ï¼‰
   - åŒå±‚æ›¿æ¢ç­–ç•¥
   - æ¨¡å¼åŒ¹é…å¢å¼º

7. **æ–‡æ¡£æ›´æ–°**
   - åˆ›å»º `docs/E2B_FILE_UPLOAD_FIX.md`
   - æ›´æ–°å¼€å‘æ–‡æ¡£å’Œ TODO

### è¯¦ç»†ä»»åŠ¡æ¸…å• (å·²å®Œæˆ)
- [x] **æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿä¿®å¤**:
  - [x] å‰ç«¯ç¼–è¯‘é”™è¯¯ä¿®å¤
  - [x] E2B è·¯ç”±æ·»åŠ  `configMiddleware`
  - [x] æ–‡ä»¶ä¸Šä¼ æ ‡è®°ä¸º `message_file: 'true'`
  - [x] æœ¬åœ°æ–‡ä»¶æºé…ç½®æ£€æŸ¥
- [x] **SSE æ¶ˆæ¯æµä¿®å¤**:
  - [x] æ¶ˆæ¯æ ¼å¼å¯¹é½
  - [x] å®ç° `created` å’Œ `final` äº‹ä»¶
  - [x] æ¶ˆæ¯æŒä¹…åŒ–åˆ°æ•°æ®åº“
- [x] **åŠ©æ‰‹åˆ—è¡¨æ˜¾ç¤ºä¿®å¤**:
  - [x] API å“åº”æ ¼å¼ä¿®æ”¹ä¸º `{ data: [...] }`
- [x] **åŠ©æ‰‹é…ç½®å®Œæ•´æŒä¹…åŒ–**:
  - [x] Schema æ‰©å±• (`append_current_datetime`, `tools`, `tool_resources`)
  - [x] å­—æ®µæ˜ å°„ (`instructions` â†” `prompt`)
  - [x] `updateAssistant` ç™½åå•æ›´æ–°
- [x] **å¯¹è¯å†å²ä¿æŒ**:
  - [x] `controller.js` å¯¼å…¥ `getMessages`
  - [x] å†å²æ¶ˆæ¯åŠ è½½å¹¶è½¬æ¢ä¸º OpenAI æ ¼å¼
- [x] **å›¾åƒè·¯å¾„æ›¿æ¢å¢å¼º**:
  - [x] æ‰©å±•è·¯å¾„æ˜ å°„ï¼ˆ6ç§æ¨¡å¼ï¼‰
  - [x] åŒå±‚æ›¿æ¢ç­–ç•¥

### å·²éªŒè¯åŠŸèƒ½
- âœ… åŠ©æ‰‹åˆ›å»ºå’Œåˆ—è¡¨æ˜¾ç¤º
- âœ… æ‰€æœ‰é…ç½®å­—æ®µå®Œæ•´ä¿å­˜
- âœ… æ–‡ä»¶ä¸Šä¼ åˆ°æ²™ç®±
- âœ… ä»£ç æ‰§è¡Œå’Œç»“æœè¿”å›
- âœ… å›¾åƒç”Ÿæˆå’Œæ˜¾ç¤º
- âœ… æ¶ˆæ¯æŒä¹…åŒ–
- âœ… å¤šè½®å¯¹è¯
- âœ… æ²™ç®±å¤ç”¨

### å·¥ä½œæ—¶é•¿
çº¦ 8 å°æ—¶

---

## 2025-12-31 (å‘¨äºŒ)

### ğŸ–¥ï¸ å‰ç«¯é›†æˆä¸ Bug ä¿®å¤
**é˜¶æ®µä»»åŠ¡**: åŸºç¡€è®¾æ–½ä¿®å¤ä¸å‰ç«¯è”è°ƒ

### ä¸»è¦å·¥ä½œ
1. **åŸºç¡€è®¾æ–½ä¿®å¤**
   - ä¿®å¤ `librechat.yaml` éªŒè¯é”™è¯¯ (Unrecognized key)
   - è¡¥å…¨åç«¯è·¯ç”± (`/tools`, `/documents`)

2. **å‰ç«¯æ„å»ºä¸ UI**
   - ä¿®å¤ `tsconfig.json` å’Œ `vite.config.ts`
   - æ·»åŠ  E2B åŠ©æ‰‹å›¾æ ‡ (Sparkles)
   - ä¿®å¤åŠ©æ‰‹åˆ›å»ºæ—¶çš„ JSON é”™è¯¯

### è¯¦ç»†ä»»åŠ¡æ¸…å• (å·²å®Œæˆ)
- [x] **åç«¯Schema**: ä¿®å¤ `librechat.yaml` éªŒè¯é”™è¯¯
- [x] **åç«¯è·¯ç”±**: è¡¥å…¨ `/tools` å’Œ `/documents` è·¯ç”±
- [x] **å‰ç«¯æ„å»º**: ä¿®å¤ `tsconfig.json` å’Œ `vite.config.ts`
- [x] **UIå›¾æ ‡**: æ·»åŠ  E2B åŠ©æ‰‹å›¾æ ‡æ”¯æŒ
- [x] **åŠ©æ‰‹åˆ›å»º**: ä¿®å¤å‰ç«¯ `undefined is not valid JSON` é”™è¯¯
- [x] **IDç”Ÿæˆ**: ç»Ÿä¸€åç«¯ç”Ÿæˆçš„åŠ©æ‰‹ ID å‰ç¼€ä¸º `asst_`

---

## 2025-12-30 (å‘¨ä¸€)

### ğŸ“š æ–‡æ¡£æ•´ç†ä¸æ¨¡æ¿ä¼˜åŒ–
**Git Commits**:
- `882c5aa8f` - docs(e2b): Restore core module details in development docs
- `831e257c3` - feat(e2b): Adopt TS-based template and update tests

### ä¸»è¦å·¥ä½œ
1. **æ–‡æ¡£æ¢å¤**
   - æ¢å¤æ ¸å¿ƒæ¨¡å—å®ç°ç»†èŠ‚
   - æ›´æ–°å¼€å‘æ–‡æ¡£

2. **æ¨¡æ¿ç³»ç»Ÿè¿ç§»**
   - é‡‡ç”¨ TypeScript æ¨¡æ¿
   - æ›´æ–°æµ‹è¯•ç”¨ä¾‹

### å·¥ä½œæ—¶é•¿
çº¦ 3 å°æ—¶

---

## 2025-12-29 (å‘¨æ—¥)

### ğŸ¨ æ•°æ®åˆ†æç¯å¢ƒå®Œå–„
**Git Commits**:
- `338337c8a` - feat(e2b): Finalize comprehensive data analyst environment
- `f3c2a3781` - docs(e2b): Finalize documentation and configuration for release
- `6f9447665` - feat(e2b): Finalize comprehensive data analyst environment
- `fe537d51b` - docs(e2b): Restore core implementation details and update template guides
- `bcd349adb` - feat(e2b): Enhance data science template and persist test tools
- `cf83355db` - feat(e2b): Add custom template support and updated docs

### ä¸»è¦å·¥ä½œ
1. **å®Œå–„æ•°æ®åˆ†æç¯å¢ƒ**
   - ä¼˜åŒ–é¢„è£…åº“åˆ—è¡¨
   - è°ƒæ•´ Dockerfile é…ç½®

2. **è‡ªå®šä¹‰æ¨¡æ¿æ”¯æŒ**
   - å®ç°è‡ªå®šä¹‰æ¨¡æ¿æ„å»ºæµç¨‹
   - æ›´æ–°æ–‡æ¡£å’Œé…ç½®æŒ‡å—

3. **æµ‹è¯•å·¥å…·æŒä¹…åŒ–**
   - ä¿å­˜æµ‹è¯•å·¥å…·å’Œè„šæœ¬

### å·¥ä½œæ—¶é•¿
çº¦ 6 å°æ—¶

---

## 2025-12-26 (å‘¨å››)

### ğŸš€ åç«¯å®ç°å®Œæˆä¸é›†æˆæµ‹è¯•
**Git Commits**:
- `1a66d83db` - feat(e2b): Finalize E2B backend implementation and integration tests
- `1e8d87ac4` - docs(todo): Correct task completion timeline for Dec 25-26
- `b0ec66f8b` - feat(e2b): Complete MVP of E2B Data Analyst Agent and API integration
- `ad6235e50` - fix(e2b): Export buildOptions from endpoint index
- `3d704b557` - refactor(e2b): Standardize endpoint initialization and exports
- `da2af6807` - feat(e2b): Implement API layer for E2B Assistants
- `1b6d72c04` - feat(e2b): Complete Phase 1 integrations and update docs

### ä¸»è¦å·¥ä½œ
1. **Agent æ ¸å¿ƒç±»å®ç°** â­â­â­
   - `E2BDataAnalystAgent` ç±»ï¼ˆReAct å¾ªç¯ï¼‰
   - `tools.js` å·¥å…·å°è£…
   - Controller é›†æˆ

2. **API å±‚å®Œæ•´å®ç°**
   - CRUD æ§åˆ¶å™¨
   - è·¯ç”±å®šä¹‰
   - ä¸­é—´ä»¶é…ç½®
   - ç³»ç»ŸæŒ‚è½½

3. **é›†æˆæµ‹è¯•**
   - `real_integration.js` çœŸå®ç¯å¢ƒæµ‹è¯•
   - éªŒè¯å®Œæ•´æµç¨‹

4. **ç«¯ç‚¹æ ‡å‡†åŒ–**
   - æ ‡å‡†åŒ– `initializeClient` å¯¼å‡º
   - è§„èŒƒåŒ–ç«¯ç‚¹æ¶æ„

### è¯¦ç»†ä»»åŠ¡æ¸…å• (å·²å®Œæˆ)
- [x] **æ ¸å¿ƒæœåŠ¡é‡æ„ä¸ä¼˜åŒ–**:
  - [x] `fileHandler.js`: æ”¯æŒå¤šå­˜å‚¨åç«¯ï¼ŒArtifact æŒä¹…åŒ–ï¼Œå†…å­˜ Buffer æ”¯æŒ
  - [x] `codeExecutor.js`: å¢å¼ºå›¾è¡¨æå–ï¼Œå¼ºåŒ–å®‰å…¨æ ¡éªŒ
- [x] **Agent æ ¸å¿ƒç±»ä¸å·¥å…·**:
  - [x] å®ç° `E2BDataAnalystAgent` (ReAct å¾ªç¯)
  - [x] å®ç° `tools.js`
  - [x] é›†æˆè‡³ Controller `chat` æ–¹æ³•
- [x] **ç³»ç»Ÿåˆå§‹åŒ–è§„èŒƒåŒ–**:
  - [x] è§„èŒƒåŒ– `initialize.js`
  - [x] å®Œå–„ `index.js` (Endpoint)
- [x] **è‡ªåŠ¨åŒ–ä¸é›†æˆæµ‹è¯•**:
  - [x] å•å…ƒæµ‹è¯•: `codeExecutor.test.js`, `fileHandler.test.js`
  - [x] é›†æˆæµ‹è¯•: `real_integration.js`
- [x] **API å±‚**:
  - [x] å®ç° CRUD æ§åˆ¶å™¨ã€è·¯ç”±ã€ä¸­é—´ä»¶æŒ‚è½½

### å·¥ä½œæ—¶é•¿
çº¦ 10 å°æ—¶

---

## 2025-12-25 (å‘¨ä¸‰)

### ğŸ§  Agent é€»è¾‘èµ·æ­¥
**Git Commits**:
- `05f26df1b` - feat(e2b): Add fileHandler tests and update task list
- `f2d7406fe` - feat(e2b): Implement E2B Sandbox services and tests

### ä¸»è¦å·¥ä½œ
1. **Prompts å®ç°**
   - å®šä¹‰ System Prompt
   - å·¥å…·å‡½æ•°å£°æ˜

2. **æ–‡ä»¶å¤„ç†æœåŠ¡**
   - å®ç° `fileHandler.js`
   - æ”¯æŒå¤šå­˜å‚¨åç«¯ï¼ˆLocal, S3, Azureï¼‰
   - Artifact æŒä¹…åŒ–

3. **å•å…ƒæµ‹è¯•**
   - `codeExecutor.test.js`
   - `fileHandler.test.js`

### è¯¦ç»†ä»»åŠ¡æ¸…å• (å·²å®Œæˆ)
- [x] å®ç° `prompts.js`
- [x] å®ç° `fileHandler.js` åŸºç¡€åŠŸèƒ½
- [x] ç¼–å†™å•å…ƒæµ‹è¯•

### å·¥ä½œæ—¶é•¿
çº¦ 6 å°æ—¶

---

## 2025-12-24 (å‘¨äºŒ)

### ğŸ”Œ E2B SDK æ·±åº¦é›†æˆ
**Git Commits**:
- `ec1eb275f` - fix(e2b): ä¿®æ­£E2B SDK APIè°ƒç”¨æ–¹å¼
- `43ff2aea5` - Phase 3.1: ä¼˜åŒ–E2Bä»£ç æ‰§è¡Œå’Œæ–‡ä»¶æ“ä½œ
- `0c45d6b3e` - feat(e2b): Complete Phase 2.5 and 3 - E2B Schema enhancement and CodeEx

### ä¸»è¦å·¥ä½œ
1. **é‡æ„ `initialize.js`** â­
   - é€‚é… E2B SDK v2.8.4
   - ä¿®æ­£å±æ€§åï¼ˆ`sandboxId`ï¼‰
   - ä¿®æ­£ API è°ƒç”¨æ–¹å¼
   - å®ç° `.files` æ¨¡å—æ“ä½œ
   - é€‚é…åµŒå¥—æ—¥å¿—ç»“æ„
   - å®ç°ä¼˜é›…å…³é—­é€»è¾‘

2. **é‡æ„ `codeExecutor.js`** â­
   - Python ä»£ç å®‰å…¨æ ¡éªŒ
   - Base64 å›¾è¡¨æå–ï¼ˆé‡å¤§çªç ´ï¼‰
   - æ‰¹é‡æ‰§è¡Œé€»è¾‘

3. **æ•°æ®åº“é›†æˆ**
   - åˆ›å»º E2B Assistant Schema
   - åˆ›å»º Model å’Œç±»å‹å®šä¹‰
   - æ³¨å†Œåˆ°ç³»ç»Ÿ

### è¯¦ç»†ä»»åŠ¡æ¸…å• (å·²å®Œæˆ)
- [x] **E2B SDK æ·±åº¦é›†æˆ**:
  - [x] ä¿®æ­£å±æ€§å `sandboxId`
  - [x] ä¿®æ­£ `Sandbox.create` ä¼ å‚
  - [x] åˆ‡æ¢è‡³ `.files` æ¨¡å—
  - [x] é€‚é…åµŒå¥—æ—¥å¿—ç»“æ„
  - [x] å®ç°ä¼˜é›…å…³é—­é€»è¾‘
- [x] **codeExecutor.js é‡æ„**:
  - [x] Python ä»£ç å®‰å…¨åˆ†çº§æ ¡éªŒ
  - [x] Base64 å›¾è¡¨è‡ªåŠ¨æå–
  - [x] å¤šä»£ç å—æ‰¹é‡æ‰§è¡Œ
- [x] **æ•°æ®åº“ä¸ç³»ç»Ÿé›†æˆ**:
  - [x] åˆ›å»º Schema, Model, Types
  - [x] æ³¨å†Œæ–°æ¨¡å‹
  - [x] æ³¨å†Œæ„å»ºå‡½æ•°

### å…³é”®çªç ´
- å®ç°ä» `results` æ•°ç»„è‡ªåŠ¨æå–å›¾è¡¨
- æ”¯æŒ PNG/JPEG/SVG å¤šæ ¼å¼

### å·¥ä½œæ—¶é•¿
çº¦ 8 å°æ—¶

---

## 2025-12-23 (å‘¨ä¸€)

### ğŸ¬ é¡¹ç›®å¯åŠ¨ä¸åŸºç¡€æ¶æ„
**Git Commit**: `23d4654e1` - Initial E2B Agent documentation and planning

### ä¸»è¦å·¥ä½œ
1. **éœ€æ±‚åˆ†æ**
   - åˆ†æ LibreChat ä»£ç åº“ç»“æ„
   - ç†è§£ Azure Assistants æ¶æ„
   - è®¾è®¡ E2B Agent æ¶æ„

2. **æ–‡æ¡£ç¼–å†™**
   - åˆ›å»º `E2B_DATA_ANALYST_AGENT_DEVELOPMENT.md`
   - æ˜ç¡®èŒè´£åˆ†å·¥
   - è§„åˆ’å¼€å‘é˜¶æ®µ

3. **åŸºç¡€è®¾æ–½æ­å»º**
   - æ·»åŠ  `e2bAssistants` æšä¸¾åˆ° Schema
   - åˆ›å»ºç«¯ç‚¹ç›®å½•ç»“æ„
   - å®ç° `buildOptions.js`
   - åˆ›å»º `initialize.js` åŸºç¡€æ¶æ„

### è¯¦ç»†ä»»åŠ¡æ¸…å• (å·²å®Œæˆ)
- [x] **åŸºç¡€å·¥ä½œ**:
  - [x] åˆ†æä»£ç åº“ç»“æ„
  - [x] ç†è§£ Azure Assistants æ¶æ„
  - [x] è®¾è®¡ E2B Agent æ¶æ„
  - [x] ç¼–å†™å¼€å‘æ–‡æ¡£
- [x] **ç³»ç»Ÿé›†æˆå‡†å¤‡**:
  - [x] è¡¥å……ç³»ç»Ÿé›†æˆæ­¥éª¤
  - [x] è¡¥å……é”™è¯¯å¤„ç†ç« èŠ‚
- [x] **Phase 1 - æ•°æ®åº“/ç«¯ç‚¹**:
  - [x] æ·»åŠ  `e2bAssistants` æšä¸¾
  - [x] åˆ›å»º `buildOptions.js`
- [x] **Phase 1 - E2Bå®¢æˆ·ç«¯ç®¡ç†å™¨**:
  - [x] åˆ›å»º `initialize.js`
  - [x] å®ç°æ²™ç®±ç”Ÿå‘½å‘¨æœŸç®¡ç†æ–¹æ³•

### å…³é”®å†³ç­–
- ä½¿ç”¨ E2B Cloud Sandboxï¼ˆè€Œéæœ¬åœ° Dockerï¼‰
- é‡‡ç”¨ ReAct å¾ªç¯æ¶æ„
- æ¨¡å—åŒ–è®¾è®¡ï¼ˆContext Manager, File Handler ç­‰ï¼‰

### å·¥ä½œæ—¶é•¿
çº¦ 4 å°æ—¶

---

## ç»Ÿè®¡æ‘˜è¦

### æ€»å·¥ä½œæ—¶é•¿
çº¦ **86-90 å°æ—¶**ï¼ˆåˆ†å¸ƒåœ¨ 2025-12-23 è‡³ 2026-01-26ï¼‰

### å…³é”®é‡Œç¨‹ç¢‘
1. **2025-12-23**: é¡¹ç›®å¯åŠ¨ï¼Œæ¶æ„è®¾è®¡
2. **2025-12-24**: E2B SDK æ·±åº¦é›†æˆ
3. **2025-12-25**: Sandbox æœåŠ¡å®ç°
4. **2025-12-26**: Agent æ ¸å¿ƒé€»è¾‘å®Œæˆï¼ŒMVP è¾¾æˆ
5. **2025-12-29**: æ•°æ®åˆ†æç¯å¢ƒå®Œå–„
6. **2026-01-04**: ç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼ˆæ–‡ä»¶ä¸Šä¼ ã€SSEã€å†å²å¯¹è¯ï¼‰
7. **2026-01-07**: æ¶æ„ä¼˜åŒ–ï¼ˆè·¯å¾„ç®€åŒ–ã€é”™è¯¯æ¢å¤ï¼‰
8. **2026-01-08**: æ ¸å¿ƒç³»ç»Ÿå®Œå–„ï¼ˆContext Managerã€æ²™ç®±æ¢å¤ï¼‰
9. **2026-01-12**: æµå¼ä¼ è¾“ä¼˜åŒ–
10. **2026-01-14**: å…³é”® Bug ä¿®å¤ + æ–‡æ¡£é‡ç»„
11. **2026-01-26**: æµå¼ä½“éªŒæœ€ç»ˆä¼˜åŒ– (Pending, Race Conditions, Stability)

### ä»£ç é‡ç»Ÿè®¡
- **æ€»ä»£ç **: ~3200+ è¡Œï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
- **æ–‡æ¡£**: ~6200+ è¡Œï¼ˆå¼€å‘ã€æ¶æ„ã€æµ‹è¯•ã€æ•…éšœæ’æŸ¥ç­‰ï¼‰
- **æµ‹è¯•**: ~500 è¡Œ

### ä¸»è¦æŠ€æœ¯æŒ‘æˆ˜
1. âœ… E2B SDK é€‚é…ï¼ˆå±æ€§åã€API è°ƒç”¨æ–¹å¼ï¼‰
2. âœ… å›¾è¡¨è‡ªåŠ¨æå–ï¼ˆBase64 å¤„ç†ï¼‰
3. âœ… æ²™ç®±ç”Ÿå‘½å‘¨æœŸç®¡ç†
4. âœ… å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ä¿æŒ
5. âœ… SSE æµå¼ä¼ è¾“ï¼ˆCompression ä¸­é—´ä»¶é—®é¢˜ï¼‰
6. âœ… é”™è¯¯æ£€æµ‹é€»è¾‘ Bugï¼ˆJavaScript truthinessï¼‰
7. âœ… å›¾ç‰‡è·¯å¾„æ¶æ„ï¼ˆä»å¤æ‚æ›¿æ¢åˆ°ç›´æ¥è·¯å¾„ï¼‰
8. âœ… æ— é™é‡è¯•å¾ªç¯ï¼ˆobservation æ ¼å¼ç»Ÿä¸€ï¼‰
9. âœ… æµå¼å“åº”çš„â€œçœŸç©ºæœŸâ€ä¸çŠ¶æ€åŒæ­¥ï¼ˆPending Eventï¼‰
10. âœ… LLM æ‰¹å¤„ç†å·¥å…·è°ƒç”¨å¯¼è‡´çš„æ¸²æŸ“é”™ä½ï¼ˆå¼ºåˆ¶å•æ­¥æ‰§è¡Œï¼‰

### å·²è§£å†³çš„æ ¸å¿ƒé—®é¢˜
- âœ… é”™è¯¯è‡ªåŠ¨æ¢å¤
- âœ… æ²™ç®±è¶…æ—¶æ¢å¤
- âœ… æ–‡ä»¶æŒä¹…åŒ–
- âœ… å›¾è¡¨ç”Ÿæˆå’Œæ˜¾ç¤º
- âœ… å¤šè½®å¯¹è¯
- âœ… å®æ—¶æµå¼å“åº” (Ultimate UX)
- âœ… Azure Assistant é£æ ¼è¾“å‡º
- âœ… ä¼šè¯æŒä¹…æ€§

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.2  
**æœ€åæ›´æ–°**: 2026-01-26  
**ç»´æŠ¤è€…**: @airi

**ç›¸å…³æ–‡æ¡£**:
- [TODO.md](TODO.md) - ä»»åŠ¡æ¸…å•
- [CHANGELOG.md](CHANGELOG.md) - ç‰ˆæœ¬æ›´æ–°æ—¥å¿—
- [E2B_DATA_ANALYST_AGENT_DEVELOPMENT.md](E2B_DATA_ANALYST_AGENT_DEVELOPMENT.md) - å®Œæ•´å¼€å‘å†å²

