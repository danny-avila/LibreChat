# Stripe API Tool для LibreChat

## Описание
StripeAPI Tool предоставляет полную интеграцию с Stripe API для управления платежами, клиентами, инвойсами, подписками, продуктами и ценами прямо из LibreChat.

## Возможности

### Управление клиентами
- `getCustomers` - Получить список клиентов
- `getCustomer` - Получить данные конкретного клиента
- `createCustomer` - Создать нового клиента
- `updateCustomer` - Обновить данные клиента
- `deleteCustomer` - Удалить клиента
- `searchCustomers` - Поиск клиентов

### Управление продуктами и ценами
- `getProducts` - Получить список продуктов
- `getProduct` - Получить данные продукта
- `createProduct` - Создать новый продукт
- `updateProduct` - Обновить продукт
- `getPrices` - Получить список цен
- `getPrice` - Получить данные цены
- `createPrice` - Создать новую цену
- `updatePrice` - Обновить цену

### Управление инвойсами
- `getInvoices` - Получить список инвойсов
- `getInvoice` - Получить данные инвойса
- `createInvoice` - Создать новый инвойс
- `updateInvoice` - Обновить инвойс
- `deleteInvoice` - Удалить инвойс
- `addInvoiceItemToDraft` - Добавить позицию в черновик инвойса
- `createPendingInvoiceItem` - Создать позицию для следующего автоматического инвойса
- `finalizeInvoice` - Финализировать черновик инвойса
- `voidInvoice` - Аннулировать открытый инвойс
- `sendInvoice` - Отправить инвойс клиенту
- `getInvoicePdf` - Получить PDF инвойса
- `createCompleteInvoice` - Создать полный инвойс с позициями за один вызов

### Управление платежами
- `getPayments` - Получить список платежей
- `getPayment` - Получить данные платежа
- `createPayment` - Создать новый платеж
- `createRefund` - Создать возврат

### Управление подписками
- `getSubscriptions` - Получить список подписок
- `getSubscription` - Получить данные подписки
- `createSubscription` - Создать новую подписку
- `updateSubscription` - Обновить подписку
- `cancelSubscription` - Отменить подписку

### Утилиты
- `checkApiHealth` - Проверить состояние API

## Настройка

### 1. Получение API ключа
1. Зайдите в [Stripe Dashboard](https://dashboard.stripe.com/)
2. Перейдите в Developers → API keys
3. Скопируйте ключ:
   - `sk_test_...` для тестового режима
   - `sk_live_...` для боевого режима

### 2. Добавление ключа в LibreChat
1. В интерфейсе LibreChat выберите модель с поддержкой функций
2. В настройках tools найдите "Stripe API"
3. Введите ваш API ключ

## Примеры использования

### Создание клиента
```
Создай нового клиента в Stripe с email test@example.com и именем "John Doe"
```

### Создание инвойса с позициями
```
Создай инвойс для клиента cus_xxx со следующими позициями:
- Консультация - $100
- Разработка - $500
```

### Получение списка платежей
```
Покажи последние 10 платежей в Stripe
```

### Создание подписки
```
Создай месячную подписку для клиента cus_xxx на продукт prod_xxx
```

## Важные замечания

1. **Валюта**: Все суммы указываются в наименьшей единице валюты (центы для USD)
2. **Черновики инвойсов**: Для добавления позиций в существующий инвойс, он должен быть в статусе "draft"
3. **Отправка инвойсов**: Для инвойсов с методом оплаты "send_invoice" автоматически устанавливается срок оплаты 7 дней
4. **Расширение данных**: Используйте параметр `expand` для получения связанных объектов (например, `["customer", "lines"]`)

## Безопасность

- Никогда не делитесь вашим секретным API ключом
- Используйте тестовые ключи для разработки
- В продакшене используйте только `sk_live_` ключи с ограниченными правами

## Поддержка

При возникновении проблем:
1. Проверьте правильность API ключа
2. Убедитесь, что у ключа есть необходимые права
3. Проверьте логи в консоли браузера или сервера
4. Обратитесь к [документации Stripe API](https://stripe.com/docs/api) 